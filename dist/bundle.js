!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n,r=function(){function t(t,e,i,n,r,o){this.path=t,this.border=e,this.tileHeight=n,this.tileWidth=i,this.rows=r,this.columns=o,this.bigTexture=PIXI.Texture.fromImage(t,!0,PIXI.SCALE_MODES.NEAREST),this.textures=[]}return t.prototype.getTexture=function(t){if(this.textures[t])return this.textures[t];var e=Math.floor((t-1)/this.columns),i=(t-1)%this.columns,n=this.tileWidth,r=this.tileHeight,o=i*n+i*this.border,a=e*r+e*this.border,s=new PIXI.Texture(this.bigTexture.baseTexture,new PIXI.Rectangle(o,a,n,r));return this.textures[t]=s,s},t}(),o=function(){function t(e,i,n,r){this.map=n,this.playerId=r,this.animations=[];for(var o=PIXI.Texture.fromImage("data/assets/player_"+r+".png").baseTexture,a=0;a<4;a++){for(var s=[],p=0;p<3;p++){var c=new PIXI.Texture(o,new PIXI.Rectangle(p*t.SPRITE_WIDTH,a*t.SPRITE_HEIGHT,t.SPRITE_WIDTH,t.SPRITE_HEIGHT));s.push(c)}this.animations.push(s)}this.sprite=new PIXI.extras.AnimatedSprite(this.animations[t.DOWN]),this.sprite.x=e,this.sprite.y=i,this.vx=0,this.vy=0,this.sprite.scale=t.SPRITE_SCALE,this.sprite.animationSpeed=.13,this.sprite.loop=!0,this.lastKey=""}return t.prototype.changeDirection=function(e){0<=e&&e<=3?(this.sprite.textures=this.animations[e],this.sprite.play()):e==t.STOP&&this.sprite.stop()},t.prototype.keyDown=function(e){if(e.key!=this.lastKey)switch(this.lastKey=e.key,e.key){case"ArrowUp":this.vy=-1*t.PLAYER_SPEED,this.changeDirection(t.UP);break;case"ArrowDown":this.vy=1*t.PLAYER_SPEED,this.changeDirection(t.DOWN);break;case"ArrowLeft":this.vx=-1*t.PLAYER_SPEED,this.changeDirection(t.LEFT);break;case"ArrowRight":this.vx=1*t.PLAYER_SPEED,this.changeDirection(t.RIGHT)}},t.prototype.keyUp=function(e){switch(this.lastKey="",e.key){case"ArrowUp":case"ArrowDown":this.vy=0,this.changeDirection(t.STOP);break;case"ArrowLeft":case"ArrowRight":this.vx=0,this.changeDirection(t.STOP)}},t.prototype.doStep=function(t){var e=this.sprite.x+this.vx*t,i=this.sprite.y+this.vy*t;Math.floor(e/this.map.finalTileWidth),Math.floor((e+this.sprite.width)/this.map.finalTileWidth),Math.floor(i/this.map.finalTileHeight),Math.floor((i+this.sprite.height)/this.map.finalTileHeight);this.sprite.x=e,this.sprite.y=i;var n=this.sprite.x/this.map.finalTileWidth;n=Math.round(n);var r=this.sprite.y/this.map.finalTileHeight;r=Math.round(r)},t.UP=0,t.RIGHT=1,t.DOWN=2,t.LEFT=3,t.STOP=4,t.SPRITE_WIDTH=32,t.SPRITE_HEIGHT=36,t.SPRITE_SCALE=new PIXI.Point(1.5,1.5),t.PLAYER_SPEED=3,t}(),a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.gridX=i,o.gridY=n,o.map=r,o.x=i*r.finalTileWidth,o.y=n*r.finalTileHeight,o}return a(e,t),e.prototype.onHit=function(t){this.tileObject&&this.tileObject.onHit(t)},e.prototype.onPlant=function(t){this.tileObject&&this.tileObject.onPlant(t)},e.prototype.onPlace=function(t){null==this.tileObject&&console.log("Placing Pumpkin TNT")},e.prototype.onHarvest=function(t){this.tileObject&&this.tileObject.onHarvest(t)},e.prototype.isFree=function(){return!this.tileObject},e}(PIXI.Sprite),p=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),c=function(t){function e(e,i){var n=t.call(this,e)||this;if(n.parent=i,!n.parent.isFree())throw new Error("Can't add TileObject to a Tile that allready has an TileObject");return n.parent.tileObject=n,n.x=n.parent.x,n.y=n.parent.y,n}return p(e,t),e.prototype.onHit=function(t){},e.prototype.onPlant=function(t){},e.prototype.onHarvest=function(t){},e.prototype.onDestroy=function(t){delete this.parent.tileObject,this.destroy()},e}(PIXI.Sprite),u=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),h=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r.owner=n,r}return u(e,t),e.prototype.onHit=function(t){},e.prototype.onDestroy=function(t){},e}(c),l=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),f=function(t){function e(e,i){return t.call(this,e,i)||this}return l(e,t),e.prototype.onHit=function(t){},e.prototype.onDestroy=function(t){},e.prototype.onHarvest=function(t){},e}(c),y=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(t){function e(){var e=t.call(this)||this;return e.tileContainer=new PIXI.Container,e.addChild(e.tileContainer),e.tileObjectContainer=new PIXI.Container,e.addChild(e.tileObjectContainer),e.playerContainer=new PIXI.Container,e.addChild(e.playerContainer),e.players=[],e}return y(e,t),e.prototype.getMapObjectProperty=function(t,e){for(var i=0,n=t.properties;i<n.length;i++){var r=n[i];if(r.name==e)return r.value}},e.loadMap=function(t,i,n){var r=new e,a=new PIXI.Point(e.MAP_ZOOM,e.MAP_ZOOM);r.finalTileWidth=i.tileWidth*a.x,r.finalTileHeight=i.tileHeight*a.y,r.spritesheet=i,$.getJSON(t,{},(function(t){for(var e=0,p=t.layers;e<p.length;e++){if("tilelayer"==(_=p[e]).type){r.gridWidth=_.width,r.gridHeight=_.height,r.tiles=new Array(r.gridHeight);for(var c=0;c<r.tiles.length;c++)r.tiles[c]=new Array(r.gridWidth);for(var u=0;u<_.height;u++)for(var l=0;l<_.width;l++){var y=u*_.width+l;if(_.data[y]>0){var d=i.getTexture(_.data[y]),P=new s(d,u,l,r);r.addTile(P)}}}}for(var g=0,v=t.layers;g<v.length;g++){var _;if("objectgroup"==(_=v[g]).type){for(var T=0,w=_.objects;T<w.length;T++){if("player"==(j=w[T]).type){var O=Math.round(j.x*a.x),I=(Math.round(j.y)-j.height)*a.y,b=r.getMapObjectProperty(j,"playerId"),E=new o(O,I,this,b);r.addPlayer(E)}}for(var S=0,x=_.objects;S<x.length;S++){var j;if("tower"==(j=x[S]).type){d=i.getTexture(j.gid);var m=r.getMapObjectProperty(j,"owner"),A=r.players[m],C=r.getTileNearestTo(j),D=new h(d,C,A);r.addTileObject(D)}else if("tree"==j.type){d=i.getTexture(j.gid);var k=r.getTileNearestTo(j),H=new f(d,k);r.addTileObject(H)}}}}n(r)}))},e.prototype.addPlayer=function(t){this.players[t.playerId]=t,this.playerContainer.addChild(t.sprite)},e.prototype.addTileObject=function(t){t.scale=e.SPRITE_SCALE,this.playerContainer.addChild(t)},e.prototype.addTile=function(t){t.x=t.gridX*this.spritesheet.tileWidth*e.SPRITE_SCALE.x,t.y=t.gridY*this.spritesheet.tileHeight*e.SPRITE_SCALE.y,t.scale=e.SPRITE_SCALE,this.tiles[t.gridY][t.gridX]=t,this.tileContainer.addChild(t)},e.prototype.pause=function(){this.isPaused=!0},e.prototype.play=function(){this.isPaused=!1},e.prototype.getObjectCoordinates=function(t){var i=t.x*e.SPRITE_SCALE.x/this.finalTileWidth;i=Math.round(i);var n=(t.y-t.height)*e.SPRITE_SCALE.y/this.finalTileHeight;return{gridX:i,gridY:n=Math.round(n)}},e.prototype.getTileNearestTo=function(t){var e=this.getObjectCoordinates(t);return this.tiles[e.gridY][e.gridX]},e.MAP_ZOOM=4,e.SPRITE_SCALE=new PIXI.Point(e.MAP_ZOOM,e.MAP_ZOOM),e}(PIXI.Container),P=function(){function t(){}return t.init=function(){document.addEventListener("keyup",t.onKeyUp),document.addEventListener("keydown",t.onKeyDown)},t.onKeyUp=function(e){for(var i in t.keyUps){var n=t.keyUps[i];e.key==n.key&&"function"==typeof n.onKeyUp&&n.onKeyUp(e)}},t.onKeyDown=function(e){for(var i in t.keyDowns){var n=t.keyDowns[i];e.key==n.key&&"function"==typeof n.onKeyDown&&n.onKeyDown(e)}},t.registerKey=function(e,i,n,r){t.keyDowns[r]={key:e,onKeyDown:i},t.keyUps[r]={key:e,onKeyUp:n}},t.unregisterKey=function(e){delete t.keyDowns[e],delete t.keyUps[e]},t.keyUps={},t.keyDowns={},t}(),g=function(){function t(){}return t.register=function(e,i,n){t.clients[e]={callback:i,myself:n}},t.unregister=function(e){delete t.clients[e]},t.doStep=function(e){if(!t.isPaused)for(var i in t.clients){(0,t.clients[i].callback)(t.clients[i].myself,e)}},t.clients={},t.isPaused=!0,t}(),v=new r("data/assets/spritesheet.png",1,16,16,31,57);(function(){function t(){}return t.startGame=function(){var e=new function(t,e,i){this.width=t,this.height=e,this.view=i}(1e3,700,t.myCanvas);t.pixiApp=new PIXI.Application(e),document.body.appendChild(t.pixiApp.view),P.init(),t.pixiApp.ticker.add(g.doStep),d.loadMap("/data/maps/map1.json",v,(function(e){console.log("Map parsed"),t.map=e,t.pixiApp.stage.addChild(e),t.pixiApp.ticker.start()}))},t.myCanvas=document.getElementById("#pixiCanvas"),t})().startGame()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL1RpbGVkU3ByaXRlc2hlZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL1BsYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVGlsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVGlsZU9iamVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVG93ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL1RyZWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL1RpbGVkTWFwLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9LZXlib2FyZE1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL1VwZGF0ZVNjaGVkdWxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvR2FtZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicGF0aCIsImJvcmRlciIsInRpbGVXaWR0aCIsInRpbGVIZWlnaHQiLCJyb3dzIiwiY29sdW1ucyIsInRoaXMiLCJiaWdUZXh0dXJlIiwiUElYSSIsIlRleHR1cmUiLCJmcm9tSW1hZ2UiLCJTQ0FMRV9NT0RFUyIsIk5FQVJFU1QiLCJ0ZXh0dXJlcyIsImdldFRleHR1cmUiLCJnaWQiLCJyb3ciLCJNYXRoIiwiZmxvb3IiLCJjb2x1bW4iLCJ4IiwieSIsImJhc2VUZXh0dXJlIiwiUmVjdGFuZ2xlIiwibWFwIiwicGxheWVySWQiLCJhbmltYXRpb25zIiwidGV4dHVyZUFycmF5IiwiUGxheWVyIiwiU1BSSVRFX1dJRFRIIiwiU1BSSVRFX0hFSUdIVCIsInB1c2giLCJzcHJpdGUiLCJleHRyYXMiLCJBbmltYXRlZFNwcml0ZSIsIkRPV04iLCJ2eCIsInZ5Iiwic2NhbGUiLCJTUFJJVEVfU0NBTEUiLCJhbmltYXRpb25TcGVlZCIsImxvb3AiLCJsYXN0S2V5IiwiY2hhbmdlRGlyZWN0aW9uIiwiZGlyZWN0aW9uIiwicGxheSIsIlNUT1AiLCJzdG9wIiwia2V5RG93biIsImV2ZW50IiwiUExBWUVSX1NQRUVEIiwiVVAiLCJMRUZUIiwiUklHSFQiLCJrZXlVcCIsImRvU3RlcCIsImRlbHRhIiwibmV3WCIsIm5ld1kiLCJmaW5hbFRpbGVXaWR0aCIsIndpZHRoIiwiZmluYWxUaWxlSGVpZ2h0IiwiaGVpZ2h0IiwieFRpbGVzIiwicm91bmQiLCJ5VGlsZXMiLCJQb2ludCIsInRleHR1cmUiLCJncmlkWCIsImdyaWRZIiwib25IaXQiLCJoaXRFdmVudCIsInRpbGVPYmplY3QiLCJvblBsYW50IiwicGxhbnQiLCJvblBsYWNlIiwicHVtcGtpbiIsInVuZGVmaW5lZCIsImNvbnNvbGUiLCJsb2ciLCJvbkhhcnZlc3QiLCJpbml0aWF0b3IiLCJpc0ZyZWUiLCJTcHJpdGUiLCJwYXJlbnQiLCJFcnJvciIsImhpdGV2ZW50Iiwib25EZXN0cm95IiwiZGVzdHJveSIsIm93bmVyIiwiVGlsZU9iamVjdCIsInRpbGVDb250YWluZXIiLCJDb250YWluZXIiLCJhZGRDaGlsZCIsInRpbGVPYmplY3RDb250YWluZXIiLCJwbGF5ZXJDb250YWluZXIiLCJwbGF5ZXJzIiwiZ2V0TWFwT2JqZWN0UHJvcGVydHkiLCJtYXBPYmplY3QiLCJwcm9wZXJ0aWVzIiwicHJvcCIsImxvYWRNYXAiLCJtYXBQYXRoIiwic3ByaXRlc2hlZXQiLCJjYWxsYmFjayIsIlRpbGVkTWFwIiwiTUFQX1pPT00iLCIkIiwiZ2V0SlNPTiIsIm1hcERhdGEiLCJsYXllcnMiLCJ0bCIsInR5cGUiLCJncmlkV2lkdGgiLCJncmlkSGVpZ2h0IiwidGlsZXMiLCJBcnJheSIsImxlbmd0aCIsImluZGV4IiwiZGF0YSIsIm5ld1RpbGUiLCJUaWxlIiwiYWRkVGlsZSIsIm9iamVjdHMiLCJjbyIsIm5ld1BsYXllciIsImFkZFBsYXllciIsIm93bmVySWQiLCJnZXRUaWxlTmVhcmVzdFRvIiwibmV3VG93ZXIiLCJUb3dlciIsImFkZFRpbGVPYmplY3QiLCJuZXdUcmVlIiwiVHJlZSIsInBsYXllciIsInRpbGUiLCJwYXVzZSIsImlzUGF1c2VkIiwiZ2V0T2JqZWN0Q29vcmRpbmF0ZXMiLCJwb3MiLCJpbml0IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiS2V5Ym9hcmRNYW5hZ2VyIiwib25LZXlVcCIsIm9uS2V5RG93biIsImtleVVwcyIsImVsZW1lbnQiLCJrZXlEb3ducyIsInJlZ2lzdGVyS2V5IiwiaWRlbnRpZmllciIsInVucmVnaXN0ZXJLZXkiLCJyZWdpc3RlciIsImlkIiwibXlzZWxmIiwiVXBkYXRlU2NoZWR1bGVyIiwiY2xpZW50cyIsInVucmVnaXN0ZXIiLCJjdXJyZW50Q2FsbGJhY2siLCJTUFJJVEVTSEVFVCIsIlRpbGVkU3ByaXRlc2hlZXQiLCJzdGFydEdhbWUiLCJwaXhpT3B0aW9ucyIsInZpZXciLCJHYW1lTWFuYWdlciIsIm15Q2FudmFzIiwicGl4aUFwcCIsIkFwcGxpY2F0aW9uIiwiYm9keSIsImFwcGVuZENoaWxkIiwidGlja2VyIiwiYWRkIiwicGFyc2VkTWFwIiwic3RhZ2UiLCJzdGFydCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RELEVBQVBFLEdBQTRCLGlCQUFURixFQUFtQixJQUFJLElBQUlNLEtBQU9OLEVBQU9yQixFQUFvQlUsRUFBRWUsRUFBSUUsRUFBSyxTQUFTQSxHQUFPLE9BQU9OLEVBQU1NLElBQVFDLEtBQUssS0FBTUQsSUFDOUksT0FBT0YsR0FJUnpCLEVBQW9CNkIsRUFBSSxTQUFTMUIsR0FDaEMsSUFBSVMsRUFBU1QsR0FBVUEsRUFBT3FCLFdBQzdCLFdBQXdCLE9BQU9yQixFQUFnQixTQUMvQyxXQUE4QixPQUFPQSxHQUV0QyxPQURBSCxFQUFvQlUsRUFBRUUsRUFBUSxJQUFLQSxHQUM1QkEsR0FJUlosRUFBb0JhLEVBQUksU0FBU2lCLEVBQVFDLEdBQVksT0FBT2pCLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VCLEVBQVFDLElBR3pHL0IsRUFBb0JrQyxFQUFJLEdBSWpCbEMsRUFBb0JBLEVBQW9CbUMsRUFBSSxHLHNDQ2xGckQsSSxFQUFBLGFBV0MsV0FBWUMsRUFBS0MsRUFBT0MsRUFBVUMsRUFBV0MsRUFBS0MsR0FDakRDLEtBQUtOLEtBQU9BLEVBQ1pNLEtBQUtMLE9BQVNBLEVBQ2RLLEtBQUtILFdBQWFBLEVBQ2xCRyxLQUFLSixVQUFZQSxFQUNqQkksS0FBS0YsS0FBT0EsRUFDWkUsS0FBS0QsUUFBVUEsRUFDZkMsS0FBS0MsV0FBYUMsS0FBS0MsUUFBUUMsVUFBVVYsR0FBTSxFQUFNUSxLQUFLRyxZQUFZQyxTQUN0RU4sS0FBS08sU0FBVyxHQTBCbEIsT0F2QkMsWUFBQUMsV0FBQSxTQUFXQyxHQUVWLEdBQUlULEtBQUtPLFNBQVNFLEdBQ2hCLE9BQU9ULEtBQUtPLFNBQVNFLEdBR3JCLElBQUlDLEVBQWFDLEtBQUtDLE9BQU9ILEVBQU0sR0FBS1QsS0FBS0QsU0FDekNjLEdBQWlCSixFQUFNLEdBQUtULEtBQUtELFFBRWpDSCxFQUFtQkksS0FBS0osVUFDeEJDLEVBQW9CRyxLQUFLSCxXQUV6QmlCLEVBQVdELEVBQVNqQixFQUFZaUIsRUFBU2IsS0FBS0wsT0FDOUNvQixFQUFXTCxFQUFNYixFQUFhYSxFQUFNVixLQUFLTCxPQUV6Q2YsRUFBaUIsSUFBSXNCLEtBQUtDLFFBQVFILEtBQUtDLFdBQVdlLFlBQWEsSUFBSWQsS0FBS2UsVUFBVUgsRUFBR0MsRUFBR25CLEVBQVdDLElBR3ZHLE9BREFHLEtBQUtPLFNBQVNFLEdBQU83QixFQUNkQSxHQUtYLEVBN0NBLEdDRUEsYUF1QkksV0FBWWtDLEVBQVdDLEVBQVdHLEVBQWNDLEdBQzVDbkIsS0FBS2tCLElBQU1BLEVBQ1hsQixLQUFLbUIsU0FBV0EsRUFDaEJuQixLQUFLb0IsV0FBYSxHQUVsQixJQURBLElBQUlKLEVBQWdDZCxLQUFLQyxRQUFRQyxVQUFVLHNCQUFzQmUsRUFBUSxRQUFRSCxZQUN4Rk4sRUFBTSxFQUFHQSxFQUFNLEVBQUdBLElBQU8sQ0FFOUIsSUFEQSxJQUFJVyxFQUErQixHQUMxQlIsRUFBUyxFQUFHQSxFQUFTLEVBQUdBLElBQVUsQ0FDdkMsSUFBSWpDLEVBQUksSUFBSXNCLEtBQUtDLFFBQVFhLEVBQWEsSUFBSWQsS0FBS2UsVUFBVUosRUFBU1MsRUFBT0MsYUFBY2IsRUFBTVksRUFBT0UsY0FBZUYsRUFBT0MsYUFBY0QsRUFBT0UsZ0JBQy9JSCxFQUFhSSxLQUFLN0MsR0FFdEJvQixLQUFLb0IsV0FBV0ssS0FBS0osR0FHekJyQixLQUFLMEIsT0FBUyxJQUFJeEIsS0FBS3lCLE9BQU9DLGVBQWU1QixLQUFLb0IsV0FBV0UsRUFBT08sT0FDcEU3QixLQUFLMEIsT0FBT1osRUFBSUEsRUFDaEJkLEtBQUswQixPQUFPWCxFQUFJQSxFQUNoQmYsS0FBSzhCLEdBQUssRUFDVjlCLEtBQUsrQixHQUFLLEVBQ1YvQixLQUFLMEIsT0FBT00sTUFBUVYsRUFBT1csYUFDM0JqQyxLQUFLMEIsT0FBT1EsZUFBaUIsSUFDN0JsQyxLQUFLMEIsT0FBT1MsTUFBTyxFQUNuQm5DLEtBQUtvQyxRQUFVLEdBMEd2QixPQXRHSSxZQUFBQyxnQkFBQSxTQUFnQkMsR0FDUixHQUFLQSxHQUFhQSxHQUFhLEdBQy9CdEMsS0FBSzBCLE9BQU9uQixTQUFXUCxLQUFLb0IsV0FBV2tCLEdBQ3ZDdEMsS0FBSzBCLE9BQU9hLFFBRVBELEdBQWFoQixFQUFPa0IsTUFDekJ4QyxLQUFLMEIsT0FBT2UsUUFJcEIsWUFBQUMsUUFBQSxTQUFRQyxHQUNKLEdBQUlBLEVBQU0xRCxLQUFPZSxLQUFLb0MsUUFFbEIsT0FEQXBDLEtBQUtvQyxRQUFVTyxFQUFNMUQsSUFDYjBELEVBQU0xRCxLQUNWLElBQUssVUFDRGUsS0FBSytCLElBQU0sRUFBSVQsRUFBT3NCLGFBQ3RCNUMsS0FBS3FDLGdCQUFnQmYsRUFBT3VCLElBQzVCLE1BQ0osSUFBSyxZQUNEN0MsS0FBSytCLEdBQUssRUFBSVQsRUFBT3NCLGFBQ3JCNUMsS0FBS3FDLGdCQUFnQmYsRUFBT08sTUFDNUIsTUFDSixJQUFLLFlBQ0Q3QixLQUFLOEIsSUFBTSxFQUFJUixFQUFPc0IsYUFDdEI1QyxLQUFLcUMsZ0JBQWdCZixFQUFPd0IsTUFDNUIsTUFDSixJQUFLLGFBQ0Q5QyxLQUFLOEIsR0FBSyxFQUFJUixFQUFPc0IsYUFDckI1QyxLQUFLcUMsZ0JBQWdCZixFQUFPeUIsU0FPNUMsWUFBQUMsTUFBQSxTQUFNTCxHQUVGLE9BREEzQyxLQUFLb0MsUUFBVSxHQUNQTyxFQUFNMUQsS0FDVixJQUFLLFVBSUwsSUFBSyxZQUNEZSxLQUFLK0IsR0FBSyxFQUNWL0IsS0FBS3FDLGdCQUFnQmYsRUFBT2tCLE1BQzVCLE1BQ0osSUFBSyxZQUlMLElBQUssYUFDRHhDLEtBQUs4QixHQUFLLEVBQ1Y5QixLQUFLcUMsZ0JBQWdCZixFQUFPa0IsUUFNeEMsWUFBQVMsT0FBQSxTQUFPQyxHQUVILElBQUlDLEVBQU9uRCxLQUFLMEIsT0FBT1osRUFBSWQsS0FBSzhCLEdBQUtvQixFQUNqQ0UsRUFBT3BELEtBQUswQixPQUFPWCxFQUFJZixLQUFLK0IsR0FBS21CLEVBRzNCdkMsS0FBS0MsTUFBTXVDLEVBQU9uRCxLQUFLa0IsSUFBSW1DLGdCQUM3QjFDLEtBQUtDLE9BQU91QyxFQUFPbkQsS0FBSzBCLE9BQU80QixPQUFTdEQsS0FBS2tCLElBQUltQyxnQkFJL0MxQyxLQUFLQyxNQUFNd0MsRUFBT3BELEtBQUtrQixJQUFJcUMsaUJBQzdCNUMsS0FBS0MsT0FBT3dDLEVBQU9wRCxLQUFLMEIsT0FBTzhCLFFBQVV4RCxLQUFLa0IsSUFBSXFDLGlCQWdCdER2RCxLQUFLMEIsT0FBT1osRUFBSXFDLEVBQ2hCbkQsS0FBSzBCLE9BQU9YLEVBQUlxQyxFQUtwQixJQUNJSyxFQURZekQsS0FBSzBCLE9BQU9aLEVBQ0hkLEtBQUtrQixJQUFJbUMsZUFDbENJLEVBQVM5QyxLQUFLK0MsTUFBTUQsR0FFcEIsSUFDSUUsRUFEWTNELEtBQUswQixPQUFPWCxFQUNIZixLQUFLa0IsSUFBSXFDLGdCQUNsQ0ksRUFBU2hELEtBQUsrQyxNQUFNQyxJQWhKakIsRUFBQWQsR0FBYSxFQUNiLEVBQUFFLE1BQWdCLEVBQ2hCLEVBQUFsQixLQUFlLEVBQ2YsRUFBQWlCLEtBQWUsRUFDZixFQUFBTixLQUFlLEVBRWYsRUFBQWpCLGFBQXVCLEdBQ3ZCLEVBQUFDLGNBQXdCLEdBQ3hCLEVBQUFTLGFBQTJCLElBQUkvQixLQUFLMEQsTUFBTSxJQUFLLEtBQy9DLEVBQUFoQixhQUFlLEVBMkkxQixFQXZKQSxHLG9UQ0tBLGNBT0ksV0FBWWlCLEVBQXVCQyxFQUFlQyxFQUFlN0MsR0FBakUsTUFDSSxZQUFNMkMsSUFBUSxLLE9BQ2QsRUFBS0MsTUFBUUEsRUFDYixFQUFLQyxNQUFRQSxFQUNiLEVBQUs3QyxJQUFNQSxFQUVYLEVBQUtKLEVBQUlnRCxFQUFRNUMsRUFBSW1DLGVBQ3JCLEVBQUt0QyxFQUFJZ0QsRUFBUTdDLEVBQUlxQyxnQixFQW9DN0IsT0FsRDBCLE9BaUJ0QixZQUFBUyxNQUFBLFNBQU1DLEdBQ0VqRSxLQUFLa0UsWUFDTGxFLEtBQUtrRSxXQUFXRixNQUFNQyxJQUk5QixZQUFBRSxRQUFBLFNBQVFDLEdBQ0FwRSxLQUFLa0UsWUFDTGxFLEtBQUtrRSxXQUFXQyxRQUFRQyxJQUloQyxZQUFBQyxRQUFBLFNBQVFDLEdBQ21CQyxNQUFuQnZFLEtBQUtrRSxZQUNMTSxRQUFRQyxJQUFJLHdCQUlwQixZQUFBQyxVQUFBLFNBQVVDLEdBQ0YzRSxLQUFLa0UsWUFDTGxFLEtBQUtrRSxXQUFXUSxVQUFVQyxJQUlsQyxZQUFBQyxPQUFBLFdBQ0ksT0FBTzVFLEtBQUtrRSxZQVFwQixFQWxEQSxDQUEwQmhFLEtBQUsyRSxRLDJVQ0YvQixjQUtJLFdBQVloQixFQUF1QmlCLEdBQW5DLE1BQ0ksWUFBTWpCLElBQVEsS0FFZCxHQURBLEVBQUtpQixPQUFTQSxHQUNWLEVBQUtBLE9BQU9GLFNBSVosTUFBTSxJQUFJRyxNQUFNLGtFLE9BSGhCLEVBQUtELE9BQU9aLFdBQWEsRUFPN0IsRUFBS3BELEVBQUksRUFBS2dFLE9BQU9oRSxFQUNyQixFQUFLQyxFQUFJLEVBQUsrRCxPQUFPL0QsRSxFQWdCN0IsT0FqQ3lDLE9Bb0JyQyxZQUFBaUQsTUFBQSxTQUFNZ0IsS0FFTixZQUFBYixRQUFBLFNBQVFDLEtBRVIsWUFBQU0sVUFBQSxTQUFVQyxLQUVWLFlBQUFNLFVBQUEsU0FBVU4sVUFDQzNFLEtBQUs4RSxPQUFPWixXQUNuQmxFLEtBQUtrRixXQUtiLEVBakNBLENBQXlDaEYsS0FBSzJFLFEsMlVDQzlDLGNBS0ksV0FBWWhCLEVBQXVCaUIsRUFBY0ssR0FBakQsTUFDSSxZQUFNdEIsRUFBU2lCLElBQU8sSyxPQUN0QixFQUFLSyxNQUFRQSxFLEVBV3JCLE9BbEIyQixPQVV2QixZQUFBbkIsTUFBQSxTQUFNQyxLQUdOLFlBQUFnQixVQUFBLFNBQVVOLEtBS2QsRUFsQkEsQ0FBMkJTLEcsMlVDQTNCLGNBS0ksV0FBWXZCLEVBQXVCaUIsRyxPQUMvQixZQUFNakIsRUFBU2lCLElBQU8sS0FlOUIsT0FyQjBCLE9BU3RCLFlBQUFkLE1BQUEsU0FBTUMsS0FHTixZQUFBZ0IsVUFBQSxTQUFVTixLQUlWLFlBQUFELFVBQUEsU0FBVUMsS0FLZCxFQXJCQSxDQUEwQlMsRywyVUNDMUIsY0FrQkksbUJBQ0ksY0FBTyxLLE9BRVAsRUFBS0MsY0FBZ0IsSUFBSW5GLEtBQUtvRixVQUM5QixFQUFLQyxTQUFTLEVBQUtGLGVBRW5CLEVBQUtHLG9CQUFzQixJQUFJdEYsS0FBS29GLFVBQ3BDLEVBQUtDLFNBQVMsRUFBS0MscUJBRW5CLEVBQUtDLGdCQUFrQixJQUFJdkYsS0FBS29GLFVBQ2hDLEVBQUtDLFNBQVMsRUFBS0UsaUJBRW5CLEVBQUtDLFFBQVUsRyxFQStMdkIsT0E3TjhCLE9Ba0MxQixZQUFBQyxxQkFBQSxTQUFxQkMsRUFBZ0IzSCxHQUNqQyxJQUFtQixVQUFBMkgsRUFBVUMsV0FBVixlQUFzQixDQUFwQyxJQUFNQyxFQUFJLEtBQ1gsR0FBSUEsRUFBSzdILE1BQVFBLEVBQ2IsT0FBTzZILEVBQUtuSCxRQU9qQixFQUFBb0gsUUFBUCxTQUFlQyxFQUFpQkMsRUFBK0JDLEdBRTNELElBQU1oRixFQUFNLElBQUlpRixFQUdabEUsRUFBMkIsSUFBSS9CLEtBQUswRCxNQUFNdUMsRUFBU0MsU0FBVUQsRUFBU0MsVUFDMUVsRixFQUFJbUMsZUFBaUI0QyxFQUFZckcsVUFBWXFDLEVBQWFuQixFQUMxREksRUFBSXFDLGdCQUFrQjBDLEVBQVlwRyxXQUFhb0MsRUFBYWxCLEVBQzVERyxFQUFJK0UsWUFBY0EsRUFHbEJJLEVBQUVDLFFBQVFOLEVBQVMsSUFBSSxTQUFVTyxHQUc3QixJQUFpQixVQUFBQSxFQUFRQyxPQUFSLGVBQWdCLENBQzdCLEdBQWUsY0FEUkMsRUFBRSxNQUNGQyxLQUFxQixDQUV4QnhGLEVBQUl5RixVQUFZRixFQUFHbkQsTUFDbkJwQyxFQUFJMEYsV0FBYUgsRUFBR2pELE9BR3BCdEMsRUFBSTJGLE1BQVEsSUFBSUMsTUFBTTVGLEVBQUkwRixZQUMxQixJQUFJLElBQUlsSixFQUFFLEVBQUdBLEVBQUV3RCxFQUFJMkYsTUFBTUUsT0FBUXJKLElBQzdCd0QsRUFBSTJGLE1BQU1uSixHQUFLLElBQUlvSixNQUFNNUYsRUFBSXlGLFdBSWpDLElBQUssSUFBSWpHLEVBQU0sRUFBR0EsRUFBTStGLEVBQUdqRCxPQUFROUMsSUFDL0IsSUFBSyxJQUFJRyxFQUFTLEVBQUdBLEVBQVM0RixFQUFHbkQsTUFBT3pDLElBQVUsQ0FDOUMsSUFBSW1HLEVBQVF0RyxFQUFNK0YsRUFBR25ELE1BQVF6QyxFQUM3QixHQUFJNEYsRUFBR1EsS0FBS0QsR0FBUyxFQUFHLENBQ3BCLElBQUluRCxFQUFVb0MsRUFBWXpGLFdBQVdpRyxFQUFHUSxLQUFLRCxJQUN2Q0UsRUFBVSxJQUFJQyxFQUFLdEQsRUFBU25ELEVBQUtHLEVBQU9LLEdBQzlDQSxFQUFJa0csUUFBUUYsTUFTaEMsSUFBaUIsVUFBQVgsRUFBUUMsT0FBUixlQUFnQixDQUE1QixJQUFNQyxFQUVQLEdBQWUsZ0JBRlJBLEVBQUUsTUFFRkMsS0FBdUIsQ0FJMUIsSUFBaUIsVUFBQUQsRUFBR1ksUUFBSCxlQUFZLENBWXpCLEdBQWUsV0FaUkMsRUFBRSxNQVlGWixLQUFrQixDQUNyQixJQUFJNUYsRUFBSUgsS0FBSytDLE1BQU00RCxFQUFHeEcsRUFBSW1CLEVBQWFuQixHQUNuQ0MsR0FBS0osS0FBSytDLE1BQU00RCxFQUFHdkcsR0FBS3VHLEVBQUc5RCxRQUFVdkIsRUFBYWxCLEVBQ2hESSxFQUFtQkQsRUFBSXlFLHFCQUFxQjJCLEVBQUksWUFDaERDLEVBQVksSUFBSWpHLEVBQU9SLEVBQUdDLEVBQUdmLEtBQU1tQixHQUN6Q0QsRUFBSXNHLFVBQVVELElBT3RCLElBQWlCLFVBQUFkLEVBQUdZLFFBQUgsZUFBWSxDQUF4QixJQUFNQyxFQWFQLEdBQWUsVUFiUkEsRUFBRSxNQWFGWixLQUFpQixDQUVoQjdDLEVBQVVvQyxFQUFZekYsV0FBVzhHLEVBQUc3RyxLQUF4QyxJQUNNZ0gsRUFBVXZHLEVBQUl5RSxxQkFBcUIyQixFQUFJLFNBQ3ZDbkMsRUFBUWpFLEVBQUl3RSxRQUFRK0IsR0FDcEIsRUFBU3ZHLEVBQUl3RyxpQkFBaUJKLEdBQ2hDSyxFQUFXLElBQUlDLEVBQU0vRCxFQUFTLEVBQVFzQixHQUMxQ2pFLEVBQUkyRyxjQUFjRixRQWNqQixHQUFlLFFBQVhMLEVBQUdaLEtBQWdCLENBQ3BCN0MsRUFBVW9DLEVBQVl6RixXQUFXOEcsRUFBRzdHLEtBQXhDLElBQ00sRUFBU1MsRUFBSXdHLGlCQUFpQkosR0FDaENRLEVBQVUsSUFBSUMsRUFBS2xFLEVBQVMsR0FDaEMzQyxFQUFJMkcsY0FBY0MsTUFjbEM1QixFQUFTaEYsT0FLakIsWUFBQXNHLFVBQUEsU0FBVVEsR0FFTmhJLEtBQUswRixRQUFRc0MsRUFBTzdHLFVBQVk2RyxFQUNoQ2hJLEtBQUt5RixnQkFBZ0JGLFNBQVN5QyxFQUFPdEcsU0FHekMsWUFBQW1HLGNBQUEsU0FBYzNELEdBQ1ZBLEVBQVdsQyxNQUFRbUUsRUFBU2xFLGFBQzVCakMsS0FBS3lGLGdCQUFnQkYsU0FBU3JCLElBR2xDLFlBQUFrRCxRQUFBLFNBQVFhLEdBQ0pBLEVBQUtuSCxFQUFJbUgsRUFBS25FLE1BQVE5RCxLQUFLaUcsWUFBWXJHLFVBQVl1RyxFQUFTbEUsYUFBYW5CLEVBQ3pFbUgsRUFBS2xILEVBQUlrSCxFQUFLbEUsTUFBUS9ELEtBQUtpRyxZQUFZcEcsV0FBYXNHLEVBQVNsRSxhQUFhbEIsRUFDMUVrSCxFQUFLakcsTUFBUW1FLEVBQVNsRSxhQUV0QmpDLEtBQUs2RyxNQUFNb0IsRUFBS2xFLE9BQU9rRSxFQUFLbkUsT0FBU21FLEVBQ3JDakksS0FBS3FGLGNBQWNFLFNBQVMwQyxJQUdoQyxZQUFBQyxNQUFBLFdBQ0lsSSxLQUFLbUksVUFBVyxHQUdwQixZQUFBNUYsS0FBQSxXQUNJdkMsS0FBS21JLFVBQVcsR0FHcEIsWUFBQUMscUJBQUEsU0FBcUJ4QyxHQUlqQixJQUNJbkMsRUFEWW1DLEVBQVU5RSxFQUFJcUYsRUFBU2xFLGFBQWFuQixFQUMzQmQsS0FBS3FELGVBQzlCSSxFQUFTOUMsS0FBSytDLE1BQU1ELEdBRXBCLElBQ0lFLEdBRGFpQyxFQUFVN0UsRUFBSTZFLEVBQVVwQyxRQUFVMkMsRUFBU2xFLGFBQWFsQixFQUNoRGYsS0FBS3VELGdCQUc5QixNQUFPLENBQUVPLE1BQU9MLEVBQVFNLE1BRnhCSixFQUFTaEQsS0FBSytDLE1BQU1DLEtBS3hCLFlBQUErRCxpQkFBQSxTQUFpQjlCLEdBQ2IsSUFBTXlDLEVBQU1ySSxLQUFLb0kscUJBQXFCeEMsR0FDdEMsT0FBTzVGLEtBQUs2RyxNQUFNd0IsRUFBSXRFLE9BQU9zRSxFQUFJdkUsUUF4TjlCLEVBQUFzQyxTQUFXLEVBQ1gsRUFBQW5FLGFBQTJCLElBQUkvQixLQUFLMEQsTUFBTXVDLEVBQVNDLFNBQVVELEVBQVNDLFVBME5qRixFQTdOQSxDQUE4QmxHLEtBQUtvRixXQ1BuQywyQkE0Q0EsT0F2Q1csRUFBQWdELEtBQVAsV0FDSUMsU0FBU0MsaUJBQWlCLFFBQVNDLEVBQWdCQyxTQUNuREgsU0FBU0MsaUJBQWlCLFVBQVdDLEVBQWdCRSxZQUdsRCxFQUFBRCxRQUFQLFNBQWUvRixHQUNYLElBQUssSUFBTWpGLEtBQUsrSyxFQUFnQkcsT0FBUSxDQUNwQyxJQUFNQyxFQUFVSixFQUFnQkcsT0FBT2xMLEdBQ25DaUYsRUFBTTFELEtBQU80SixFQUFRNUosS0FDUyxtQkFBbkI0SixFQUFRSCxTQUNmRyxFQUFRSCxRQUFRL0YsS0FNekIsRUFBQWdHLFVBQVAsU0FBaUJoRyxHQUNiLElBQUssSUFBTWpGLEtBQUsrSyxFQUFnQkssU0FBVSxDQUN0QyxJQUFNRCxFQUFVSixFQUFnQkssU0FBU3BMLEdBQ3JDaUYsRUFBTTFELEtBQU80SixFQUFRNUosS0FDVyxtQkFBckI0SixFQUFRRixXQUNmRSxFQUFRRixVQUFVaEcsS0FNM0IsRUFBQW9HLFlBQVAsU0FBbUI5SixFQUFLMEosRUFBV0QsRUFBU00sR0FDeENQLEVBQWdCSyxTQUFTRSxHQUFjLENBQUUvSixJQUFLQSxFQUFLMEosVUFBV0EsR0FDOURGLEVBQWdCRyxPQUFPSSxHQUFjLENBQUUvSixJQUFLQSxFQUFLeUosUUFBU0EsSUFHdkQsRUFBQU8sY0FBUCxTQUFxQkQsVUFDVlAsRUFBZ0JLLFNBQVNFLFVBQ3pCUCxFQUFnQkcsT0FBT0ksSUFyQzNCLEVBQUFKLE9BQVMsR0FDVCxFQUFBRSxTQUFXLEdBeUN0QixFQTVDQSxHQ0FBLDJCQTRCQSxPQXZCVyxFQUFBSSxTQUFQLFNBQWdCQyxFQUFZakQsRUFBb0JrRCxHQUM1Q0MsRUFBZ0JDLFFBQVFILEdBQU0sQ0FDMUJqRCxTQUFVQSxFQUNWa0QsT0FBUUEsSUFJVCxFQUFBRyxXQUFQLFNBQWtCSixVQUNQRSxFQUFnQkMsUUFBUUgsSUFHNUIsRUFBQWxHLE9BQVAsU0FBY0MsR0FDVixJQUFLbUcsRUFBZ0JsQixTQUNqQixJQUFLLElBQUl6SyxLQUFLMkwsRUFBZ0JDLFFBQVMsRUFHbkNFLEVBRnNCSCxFQUFnQkMsUUFBUTVMLEdBQUd3SSxVQUNwQ21ELEVBQWdCQyxRQUFRNUwsR0FBRzBMLE9BQ2hCbEcsS0FuQjdCLEVBQUFvRyxRQUFrQixHQUNsQixFQUFBbkIsVUFBb0IsRUF5Qi9CLEVBNUJBLEdDS01zQixFQUFjLElBQUlDLEVBQWlCLDhCQUErQixFQUFHLEdBQUksR0FBSSxHQUFJLEtBTXZGLHlCQXFDQSxPQTdCVyxFQUFBQyxVQUFQLFdBR0ksSUFHTUMsRUFBYyxJQUZoQixTQUFtQnRHLEVBQWFFLEVBQWNxRyxHQUEzQixLQUFBdkcsUUFBYSxLQUFBRSxTQUFjLEtBQUFxRyxPQUU5QixDQWpCVixJQUNDLElBZ0I4Q0MsRUFBWUMsVUFFckVELEVBQVlFLFFBQVUsSUFBSTlKLEtBQUsrSixZQUFZTCxHQUkzQ3JCLFNBQVMyQixLQUFLQyxZQUFZTCxFQUFZRSxRQUFRSCxNQUc5Q3BCLEVBQWdCSCxPQUdoQndCLEVBQVlFLFFBQVFJLE9BQU9DLElBQUloQixFQUFnQnBHLFFBRy9DLEVBQVM4QyxRQUFRLHVCQUF1QjBELEdBQVksU0FBU2EsR0FDekQ5RixRQUFRQyxJQUFJLGNBQ1pxRixFQUFZNUksSUFBTW9KLEVBQ2xCUixFQUFZRSxRQUFRTyxNQUFNaEYsU0FBUytFLEdBQ25DUixFQUFZRSxRQUFRSSxPQUFPSSxZQTdCNUIsRUFBQVQsU0FBV3hCLFNBQVNrQyxlQUFlLGVBaUM5QyxHQXJDQSxHQ1RZZCIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgY2xhc3MgVGlsZWRTcHJpdGVzaGVldHtcblxuXHRwYXRoOiBzdHJpbmc7XG5cdGJvcmRlcjogbnVtYmVyO1xuXHR0aWxlSGVpZ2h0OiBudW1iZXI7XG5cdHRpbGVXaWR0aDogbnVtYmVyO1xuXHRyb3dzOiBudW1iZXI7XG5cdGNvbHVtbnM6IG51bWJlcjtcblx0YmlnVGV4dHVyZTogUElYSS5UZXh0dXJlO1xuXHR0ZXh0dXJlczogUElYSS5UZXh0dXJlW107XG5cblx0Y29uc3RydWN0b3IocGF0aCxib3JkZXIsdGlsZVdpZHRoLHRpbGVIZWlnaHQscm93cyxjb2x1bW5zKXtcblx0XHR0aGlzLnBhdGggPSBwYXRoO1xuXHRcdHRoaXMuYm9yZGVyID0gYm9yZGVyO1xuXHRcdHRoaXMudGlsZUhlaWdodCA9IHRpbGVIZWlnaHQ7XG5cdFx0dGhpcy50aWxlV2lkdGggPSB0aWxlV2lkdGg7XG5cdFx0dGhpcy5yb3dzID0gcm93cztcblx0XHR0aGlzLmNvbHVtbnMgPSBjb2x1bW5zO1xuXHRcdHRoaXMuYmlnVGV4dHVyZSA9IFBJWEkuVGV4dHVyZS5mcm9tSW1hZ2UocGF0aCwgdHJ1ZSwgUElYSS5TQ0FMRV9NT0RFUy5ORUFSRVNUKTtcblx0XHR0aGlzLnRleHR1cmVzID0gW107XG5cdH1cblxuXHRnZXRUZXh0dXJlKGdpZCk6UElYSS5UZXh0dXJlICB7XG5cdFx0Ly9DaGVjayB3ZXRoZXIgdGV4dHVyZXMgd2FzIGFsbHJlYWR5IGZyYW1lZCBmb3JtIHNwcml0ZXNoZWV0XG5cdFx0aWYgKHRoaXMudGV4dHVyZXNbZ2lkXSkge1xuXHRcdCAgcmV0dXJuIHRoaXMudGV4dHVyZXNbZ2lkXTtcblx0XHR9IGVsc2Uge1xuXHRcdCAgLy9DYWxjdWxhdGUgcm93IGFuZCBjb2x1bW4gZnJvbSBnaWRcblx0XHQgIGxldCByb3c6bnVtYmVyID0gTWF0aC5mbG9vcigoZ2lkIC0gMSkgLyB0aGlzLmNvbHVtbnMpO1xuXHRcdCAgbGV0IGNvbHVtbjpudW1iZXIgPSAoZ2lkIC0gMSkgJSB0aGlzLmNvbHVtbnM7XG5cdFxuXHRcdCAgbGV0IHRpbGVXaWR0aDpudW1iZXIgPSB0aGlzLnRpbGVXaWR0aDtcblx0XHQgIGxldCB0aWxlSGVpZ2h0Om51bWJlciA9IHRoaXMudGlsZUhlaWdodDtcblx0XG5cdFx0ICBsZXQgeDpudW1iZXIgPSBjb2x1bW4gKiB0aWxlV2lkdGggKyBjb2x1bW4gKiB0aGlzLmJvcmRlcjtcblx0XHQgIGxldCB5Om51bWJlciA9IHJvdyAqIHRpbGVIZWlnaHQgKyByb3cgKiB0aGlzLmJvcmRlcjtcblx0XG5cdFx0ICBsZXQgdDpQSVhJLlRleHR1cmUgPSBuZXcgUElYSS5UZXh0dXJlKHRoaXMuYmlnVGV4dHVyZS5iYXNlVGV4dHVyZSwgbmV3IFBJWEkuUmVjdGFuZ2xlKHgsIHksIHRpbGVXaWR0aCwgdGlsZUhlaWdodCkpO1xuXHRcdCAgLy9TYXZlIFRleHR1cmUgaW4gY2FjaGUgYXJyYXlcblx0XHQgIHRoaXMudGV4dHVyZXNbZ2lkXSA9IHQ7XG5cdFx0ICByZXR1cm4gdDtcblx0XHR9XG5cdCAgfVxuXHRcblxufSIsImltcG9ydCB7IFRpbGVkTWFwIH0gZnJvbSBcIi4vVGlsZWRNYXBcIjtcblxuZXhwb3J0IGNsYXNzIFBsYXllciB7XG5cblxuICAgIHN0YXRpYyBVUDogbnVtYmVyID0gMDtcbiAgICBzdGF0aWMgUklHSFQ6IG51bWJlciA9IDE7XG4gICAgc3RhdGljIERPV046IG51bWJlciA9IDI7XG4gICAgc3RhdGljIExFRlQ6IG51bWJlciA9IDM7XG4gICAgc3RhdGljIFNUT1A6IG51bWJlciA9IDQ7XG5cbiAgICBzdGF0aWMgU1BSSVRFX1dJRFRIOiBudW1iZXIgPSA5NiAvIDM7XG4gICAgc3RhdGljIFNQUklURV9IRUlHSFQ6IG51bWJlciA9IDE0NCAvIDQ7XG4gICAgc3RhdGljIFNQUklURV9TQ0FMRTogUElYSS5Qb2ludCA9IG5ldyBQSVhJLlBvaW50KDEuNSwgMS41KTtcbiAgICBzdGF0aWMgUExBWUVSX1NQRUVEID0gMztcblxuXG4gICAgc3ByaXRlOiBQSVhJLmV4dHJhcy5BbmltYXRlZFNwcml0ZTtcbiAgICB2eDogbnVtYmVyO1xuICAgIHZ5OiBudW1iZXI7XG4gICAgYW5pbWF0aW9uczogUElYSS5UZXh0dXJlW11bXTtcbiAgICBtYXA6IFRpbGVkTWFwO1xuICAgIGxhc3RLZXk6IHN0cmluZztcbiAgICBwbGF5ZXJJZDpudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgbWFwOiBUaWxlZE1hcCxwbGF5ZXJJZDpudW1iZXIpIHtcbiAgICAgICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgICAgIHRoaXMucGxheWVySWQgPSBwbGF5ZXJJZDtcbiAgICAgICAgdGhpcy5hbmltYXRpb25zID0gW107XG4gICAgICAgIGxldCBiYXNlVGV4dHVyZTogUElYSS5CYXNlVGV4dHVyZSA9IFBJWEkuVGV4dHVyZS5mcm9tSW1hZ2UoYGRhdGEvYXNzZXRzL3BsYXllcl8ke3BsYXllcklkfS5wbmdgKS5iYXNlVGV4dHVyZTtcbiAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgNDsgcm93KyspIHtcbiAgICAgICAgICAgIGxldCB0ZXh0dXJlQXJyYXk6IFBJWEkuVGV4dHVyZVtdID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCAzOyBjb2x1bW4rKykge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gbmV3IFBJWEkuVGV4dHVyZShiYXNlVGV4dHVyZSwgbmV3IFBJWEkuUmVjdGFuZ2xlKGNvbHVtbiAqIFBsYXllci5TUFJJVEVfV0lEVEgsIHJvdyAqIFBsYXllci5TUFJJVEVfSEVJR0hULCBQbGF5ZXIuU1BSSVRFX1dJRFRILCBQbGF5ZXIuU1BSSVRFX0hFSUdIVCkpO1xuICAgICAgICAgICAgICAgIHRleHR1cmVBcnJheS5wdXNoKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25zLnB1c2godGV4dHVyZUFycmF5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3ByaXRlID0gbmV3IFBJWEkuZXh0cmFzLkFuaW1hdGVkU3ByaXRlKHRoaXMuYW5pbWF0aW9uc1tQbGF5ZXIuRE9XTl0pO1xuICAgICAgICB0aGlzLnNwcml0ZS54ID0geDtcbiAgICAgICAgdGhpcy5zcHJpdGUueSA9IHk7XG4gICAgICAgIHRoaXMudnggPSAwO1xuICAgICAgICB0aGlzLnZ5ID0gMDtcbiAgICAgICAgdGhpcy5zcHJpdGUuc2NhbGUgPSBQbGF5ZXIuU1BSSVRFX1NDQUxFO1xuICAgICAgICB0aGlzLnNwcml0ZS5hbmltYXRpb25TcGVlZCA9IDAuMTM7XG4gICAgICAgIHRoaXMuc3ByaXRlLmxvb3AgPSB0cnVlO1xuICAgICAgICB0aGlzLmxhc3RLZXkgPSBcIlwiO1xuXG4gICAgfVxuXG4gICAgY2hhbmdlRGlyZWN0aW9uKGRpcmVjdGlvbjogbnVtYmVyKSB7XG4gICAgICAgIGlmICgwIDw9IGRpcmVjdGlvbiAmJiBkaXJlY3Rpb24gPD0gMykge1xuICAgICAgICAgICAgdGhpcy5zcHJpdGUudGV4dHVyZXMgPSB0aGlzLmFuaW1hdGlvbnNbZGlyZWN0aW9uXTtcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT0gUGxheWVyLlNUT1ApIHtcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnN0b3AoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGtleURvd24oZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSAhPSB0aGlzLmxhc3RLZXkpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdEtleSA9IGV2ZW50LmtleTtcbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkFycm93VXBcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52eSA9IC0xICogUGxheWVyLlBMQVlFUl9TUEVFRDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXJlY3Rpb24oUGxheWVyLlVQKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkFycm93RG93blwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZ5ID0gMSAqIFBsYXllci5QTEFZRVJfU1BFRUQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGlyZWN0aW9uKFBsYXllci5ET1dOKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZ4ID0gLTEgKiBQbGF5ZXIuUExBWUVSX1NQRUVEO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURpcmVjdGlvbihQbGF5ZXIuTEVGVCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudnggPSAxICogUGxheWVyLlBMQVlFUl9TUEVFRDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXJlY3Rpb24oUGxheWVyLlJJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGtleVVwKGV2ZW50KSB7XG4gICAgICAgIHRoaXMubGFzdEtleSA9IFwiXCI7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dVcFwiOlxuICAgICAgICAgICAgICAgIHRoaXMudnkgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGlyZWN0aW9uKFBsYXllci5TVE9QKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgICAgICAgICAgICB0aGlzLnZ5ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURpcmVjdGlvbihQbGF5ZXIuU1RPUCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XG4gICAgICAgICAgICAgICAgdGhpcy52eCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXJlY3Rpb24oUGxheWVyLlNUT1ApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnZ4ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURpcmVjdGlvbihQbGF5ZXIuU1RPUCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGRvU3RlcChkZWx0YSkge1xuXG4gICAgICAgIGxldCBuZXdYID0gdGhpcy5zcHJpdGUueCArIHRoaXMudnggKiBkZWx0YTtcbiAgICAgICAgbGV0IG5ld1kgPSB0aGlzLnNwcml0ZS55ICsgdGhpcy52eSAqIGRlbHRhO1xuXG4gICAgICAgIGxldCB4UmFuZ2UgPSB7XG4gICAgICAgICAgICBmcm9tOiBNYXRoLmZsb29yKG5ld1ggLyB0aGlzLm1hcC5maW5hbFRpbGVXaWR0aCksXG4gICAgICAgICAgICB0bzogTWF0aC5mbG9vcigobmV3WCArIHRoaXMuc3ByaXRlLndpZHRoKSAvIHRoaXMubWFwLmZpbmFsVGlsZVdpZHRoKVxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCB5UmFuZ2UgPSB7XG4gICAgICAgICAgICBmcm9tOiBNYXRoLmZsb29yKG5ld1kgLyB0aGlzLm1hcC5maW5hbFRpbGVIZWlnaHQpLFxuICAgICAgICAgICAgdG86IE1hdGguZmxvb3IoKG5ld1kgKyB0aGlzLnNwcml0ZS5oZWlnaHQpIC8gdGhpcy5tYXAuZmluYWxUaWxlSGVpZ2h0KVxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBibG9ja2VkID0gZmFsc2U7XG5cbiAgICAgICAgLypcbiAgICAgICAgZm9yIChsZXQgeCA9IHhSYW5nZS5mcm9tOyB4IDw9IHhSYW5nZS50bzsgeCsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0geVJhbmdlLmZyb207IHkgPD0geVJhbmdlLnRvOyB5KyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXAuY29sbGlzaW9uQml0TWFwW3ldID09IHVuZGVmaW5lZCB8fCB0aGlzLm1hcC5jb2xsaXNpb25CaXRNYXBbeV1beF0gPT0gdW5kZWZpbmVkIHx8IHRoaXMubWFwLmNvbGxpc2lvbkJpdE1hcFt5XVt4XSA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSovXG5cblxuICAgICAgICBpZiAoYmxvY2tlZCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5zcHJpdGUueCA9IG5ld1g7XG4gICAgICAgICAgICB0aGlzLnNwcml0ZS55ID0gbmV3WTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy9DaGVjayBmb3IgZXZlbnRcbiAgICAgICAgbGV0IG9yaWdpbmFsWCA9IHRoaXMuc3ByaXRlLng7XG4gICAgICAgIGxldCB4VGlsZXMgPSBvcmlnaW5hbFggLyB0aGlzLm1hcC5maW5hbFRpbGVXaWR0aDtcbiAgICAgICAgeFRpbGVzID0gTWF0aC5yb3VuZCh4VGlsZXMpO1xuXG4gICAgICAgIGxldCBvcmlnaW5hbFkgPSB0aGlzLnNwcml0ZS55O1xuICAgICAgICBsZXQgeVRpbGVzID0gb3JpZ2luYWxZIC8gdGhpcy5tYXAuZmluYWxUaWxlSGVpZ2h0O1xuICAgICAgICB5VGlsZXMgPSBNYXRoLnJvdW5kKHlUaWxlcyk7XG5cbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBUaWxlT2JqZWN0IH0gZnJvbSBcIi4vVGlsZU9iamVjdFwiO1xuaW1wb3J0IHsgVGlsZWRNYXAgfSBmcm9tIFwiLi9UaWxlZE1hcFwiO1xuaW1wb3J0IHsgSGl0RXZlbnQgfSBmcm9tIFwiLi9IaXRFdmVudFwiO1xuaW1wb3J0IHsgUGxhbnQgfSBmcm9tIFwiLi9QbGFudFwiO1xuaW1wb3J0IHsgVG50UHVtcGtpbiB9IGZyb20gXCIuL1RudFB1bXBraW5cIjtcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL1BsYXllclwiO1xuXG5leHBvcnQgY2xhc3MgVGlsZSBleHRlbmRzIFBJWEkuU3ByaXRlIHtcblxuICAgIGdyaWRYOiBudW1iZXI7XG4gICAgZ3JpZFk6IG51bWJlcjtcbiAgICB0aWxlT2JqZWN0OiBUaWxlT2JqZWN0O1xuICAgIG1hcDogVGlsZWRNYXA7XG5cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0dXJlOiBQSVhJLlRleHR1cmUsIGdyaWRYOiBudW1iZXIsIGdyaWRZOiBudW1iZXIsIG1hcDpUaWxlZE1hcCkge1xuICAgICAgICBzdXBlcih0ZXh0dXJlKTtcbiAgICAgICAgdGhpcy5ncmlkWCA9IGdyaWRYO1xuICAgICAgICB0aGlzLmdyaWRZID0gZ3JpZFk7XG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgICAgICAvL2NhbGN1bGF0ZSBvd24gcmVuZGVyIGNvb3JkaW5hdGVzXG4gICAgICAgIHRoaXMueCA9IGdyaWRYICogbWFwLmZpbmFsVGlsZVdpZHRoO1xuICAgICAgICB0aGlzLnkgPSBncmlkWSAqIG1hcC5maW5hbFRpbGVIZWlnaHQ7XG4gICAgfVxuXG4gICAgb25IaXQoaGl0RXZlbnQ6IEhpdEV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRpbGVPYmplY3QpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZU9iamVjdC5vbkhpdChoaXRFdmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblBsYW50KHBsYW50OiBQbGFudCkge1xuICAgICAgICBpZiAodGhpcy50aWxlT2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVPYmplY3Qub25QbGFudChwbGFudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblBsYWNlKHB1bXBraW46IFRudFB1bXBraW4pIHtcbiAgICAgICAgaWYgKHRoaXMudGlsZU9iamVjdCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGxhY2luZyBQdW1wa2luIFROVFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uSGFydmVzdChpbml0aWF0b3I6IFBsYXllcikge1xuICAgICAgICBpZiAodGhpcy50aWxlT2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVPYmplY3Qub25IYXJ2ZXN0KGluaXRpYXRvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc0ZyZWUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZU9iamVjdCA/IGZhbHNlIDogdHJ1ZTtcbiAgICB9XG5cblxuXG5cblxuXG59IiwiaW1wb3J0IHsgVGlsZSB9IGZyb20gXCIuL1RpbGVcIjtcbmltcG9ydCB7IEhpdEV2ZW50IH0gZnJvbSBcIi4vSGl0RXZlbnRcIjtcbmltcG9ydCB7IFBsYW50IH0gZnJvbSBcIi4vUGxhbnRcIjtcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL1BsYXllclwiO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVGlsZU9iamVjdCBleHRlbmRzIFBJWEkuU3ByaXRlIHtcblxuICAgIHBhcmVudDogVGlsZTtcbiAgICBzb2xpZDogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKHRleHR1cmU6IFBJWEkuVGV4dHVyZSwgcGFyZW50OiBUaWxlKSB7XG4gICAgICAgIHN1cGVyKHRleHR1cmUpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRnJlZSgpKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50aWxlT2JqZWN0ID0gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGFkZCBUaWxlT2JqZWN0IHRvIGEgVGlsZSB0aGF0IGFsbHJlYWR5IGhhcyBhbiBUaWxlT2JqZWN0XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9zZXQgcmVuZGVyIGNvb3JkaW5hdGVzXG4gICAgICAgIHRoaXMueCA9IHRoaXMucGFyZW50Lng7XG4gICAgICAgIHRoaXMueSA9IHRoaXMucGFyZW50Lnk7XG4gICAgfVxuXG4gICAgb25IaXQoaGl0ZXZlbnQ6IEhpdEV2ZW50KSB7IH07XG5cbiAgICBvblBsYW50KHBsYW50OiBQbGFudCkgeyB9O1xuXG4gICAgb25IYXJ2ZXN0KGluaXRpYXRvcjogUGxheWVyKSB7IH07XG5cbiAgICBvbkRlc3Ryb3koaW5pdGlhdG9yOiBQbGF5ZXIpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMucGFyZW50LnRpbGVPYmplY3Q7XG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgIH07XG5cblxuXG59IiwiaW1wb3J0IHsgVGlsZU9iamVjdCB9IGZyb20gXCIuL1RpbGVPYmplY3RcIjtcbmltcG9ydCB7IFN0YXR1c0JhciB9IGZyb20gXCIuL1N0YXR1c0JhclwiO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vUGxheWVyXCI7XG5pbXBvcnQgeyBUaWxlIH0gZnJvbSBcIi4vVGlsZVwiO1xuaW1wb3J0IHsgSGl0RXZlbnQgfSBmcm9tIFwiLi9IaXRFdmVudFwiO1xuXG5leHBvcnQgY2xhc3MgVG93ZXIgZXh0ZW5kcyBUaWxlT2JqZWN0IHtcblxuICAgIG93bmVyOiBQbGF5ZXI7XG4gICAgc3RhdHVzQmFyOiBTdGF0dXNCYXI7XG5cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0dXJlOiBQSVhJLlRleHR1cmUsIHBhcmVudDogVGlsZSwgb3duZXI6IFBsYXllcikge1xuICAgICAgICBzdXBlcih0ZXh0dXJlLCBwYXJlbnQpO1xuICAgICAgICB0aGlzLm93bmVyID0gb3duZXI7XG4gICAgfVxuXG4gICAgb25IaXQoaGl0RXZlbnQ6IEhpdEV2ZW50KSB7XG4gICAgfTtcblxuICAgIG9uRGVzdHJveShpbml0aWF0b3I6IFBsYXllcikge1xuXG4gICAgfVxuXG5cbn0iLCJpbXBvcnQgeyBUaWxlT2JqZWN0IH0gZnJvbSBcIi4vVGlsZU9iamVjdFwiO1xuaW1wb3J0IHsgU3RhdHVzQmFyIH0gZnJvbSBcIi4vU3RhdHVzQmFyXCI7XG5pbXBvcnQgeyBUaWxlIH0gZnJvbSBcIi4vVGlsZVwiO1xuaW1wb3J0IHsgSGl0RXZlbnQgfSBmcm9tIFwiLi9IaXRFdmVudFwiO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vUGxheWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBUcmVlIGV4dGVuZHMgVGlsZU9iamVjdCB7XG5cbiAgICBcbiAgICBzdGF0dXNCYXI6IFN0YXR1c0JhcjtcblxuICAgIGNvbnN0cnVjdG9yKHRleHR1cmU6IFBJWEkuVGV4dHVyZSwgcGFyZW50OiBUaWxlKSB7XG4gICAgICAgIHN1cGVyKHRleHR1cmUsIHBhcmVudCk7XG4gICAgfVxuXG4gICAgb25IaXQoaGl0RXZlbnQ6IEhpdEV2ZW50KSB7XG4gICAgfTtcblxuICAgIG9uRGVzdHJveShpbml0aWF0b3I6IFBsYXllcikge1xuXG4gICAgfVxuXG4gICAgb25IYXJ2ZXN0KGluaXRpYXRvcjpQbGF5ZXIpe1xuXG4gICAgfVxuXG5cbn0iLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9QbGF5ZXJcIjtcbmltcG9ydCB7IFRpbGVkU3ByaXRlc2hlZXQgfSBmcm9tIFwiLi9UaWxlZFNwcml0ZXNoZWV0XCI7XG5pbXBvcnQgeyBUaWxlIH0gZnJvbSBcIi4vVGlsZVwiO1xuaW1wb3J0IHsgVG93ZXIgfSBmcm9tIFwiLi9Ub3dlclwiO1xuaW1wb3J0IHsgVHJlZSB9IGZyb20gXCIuL1RyZWVcIjtcbmltcG9ydCB7IFRpbGVPYmplY3QgfSBmcm9tIFwiLi9UaWxlT2JqZWN0XCI7XG5cbmV4cG9ydCBjbGFzcyBUaWxlZE1hcCBleHRlbmRzIFBJWEkuQ29udGFpbmVyIHtcblxuICAgIHN0YXRpYyBNQVBfWk9PTSA9IDQ7XG4gICAgc3RhdGljIFNQUklURV9TQ0FMRTogUElYSS5Qb2ludCA9IG5ldyBQSVhJLlBvaW50KFRpbGVkTWFwLk1BUF9aT09NLCBUaWxlZE1hcC5NQVBfWk9PTSk7XG5cbiAgICBwbGF5ZXJzOiBQbGF5ZXJbXTtcbiAgICBzcHJpdGVzaGVldDogVGlsZWRTcHJpdGVzaGVldDtcbiAgICBpc1BhdXNlZDogYm9vbGVhbjtcbiAgICBmaW5hbFRpbGVXaWR0aDogbnVtYmVyO1xuICAgIGZpbmFsVGlsZUhlaWdodDogbnVtYmVyO1xuICAgIHRpbGVzOiBUaWxlW11bXTtcbiAgICBncmlkV2lkdGg6IG51bWJlcjtcbiAgICBncmlkSGVpZ2h0OiBudW1iZXI7XG4gICAgdGlsZUNvbnRhaW5lcjogUElYSS5Db250YWluZXI7XG4gICAgcGxheWVyQ29udGFpbmVyOiBQSVhJLkNvbnRhaW5lcjtcbiAgICB0aWxlT2JqZWN0Q29udGFpbmVyOiBQSVhJLkNvbnRhaW5lcjtcblxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy50aWxlQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy50aWxlQ29udGFpbmVyKTtcblxuICAgICAgICB0aGlzLnRpbGVPYmplY3RDb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLnRpbGVPYmplY3RDb250YWluZXIpO1xuXG4gICAgICAgIHRoaXMucGxheWVyQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5wbGF5ZXJDb250YWluZXIpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5wbGF5ZXJzID0gW107XG4gICAgfVxuXG5cbiAgICBnZXRNYXBPYmplY3RQcm9wZXJ0eShtYXBPYmplY3Q6IGFueSwgbmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvcCBvZiBtYXBPYmplY3QucHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKHByb3AubmFtZSA9PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3AudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8vTG9hZHMgdGhlIG1hcCB3aXRoIHNwcml0ZXNoZWV0LiBMYXN0IHBhcmFtZXRlciBpcyBjYWxsYmFjayBmdW5jdGlvbiB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgcGFyc2luZyB0aGUgbWFwIHdpdGggdGhlIG5ldyBwYXJzZWQgbWFwIGFzIHBhcmFtZXRlclxuICAgIHN0YXRpYyBsb2FkTWFwKG1hcFBhdGg6IHN0cmluZywgc3ByaXRlc2hlZXQ6IFRpbGVkU3ByaXRlc2hlZXQsIGNhbGxiYWNrOiBGdW5jdGlvbikge1xuXG4gICAgICAgIGNvbnN0IG1hcCA9IG5ldyBUaWxlZE1hcCgpO1xuXG4gICAgICAgIC8vTG9hZCBTcHJpdGVzaGVldFxuICAgICAgICBsZXQgU1BSSVRFX1NDQUxFOiBQSVhJLlBvaW50ID0gbmV3IFBJWEkuUG9pbnQoVGlsZWRNYXAuTUFQX1pPT00sIFRpbGVkTWFwLk1BUF9aT09NKTtcbiAgICAgICAgbWFwLmZpbmFsVGlsZVdpZHRoID0gc3ByaXRlc2hlZXQudGlsZVdpZHRoICogU1BSSVRFX1NDQUxFLng7XG4gICAgICAgIG1hcC5maW5hbFRpbGVIZWlnaHQgPSBzcHJpdGVzaGVldC50aWxlSGVpZ2h0ICogU1BSSVRFX1NDQUxFLnk7XG4gICAgICAgIG1hcC5zcHJpdGVzaGVldCA9IHNwcml0ZXNoZWV0O1xuXG4gICAgICAgIC8vTG9hZCBNYXAgYW5kIFBhcnNlIGl0XG4gICAgICAgICQuZ2V0SlNPTihtYXBQYXRoLCB7fSwgZnVuY3Rpb24gKG1hcERhdGEpIHtcblxuICAgICAgICAgICAgLy9CdWlsZCBhbGwgVGlsZUxheWVycyBmaXJzdFxuICAgICAgICAgICAgZm9yIChjb25zdCB0bCBvZiBtYXBEYXRhLmxheWVycykge1xuICAgICAgICAgICAgICAgIGlmICh0bC50eXBlID09IFwidGlsZWxheWVyXCIpIHtcblxuICAgICAgICAgICAgICAgICAgICBtYXAuZ3JpZFdpZHRoID0gdGwud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIG1hcC5ncmlkSGVpZ2h0ID0gdGwuaGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vSW5pdCBtYXAncyB0aWxlcyBhcnJheVxuICAgICAgICAgICAgICAgICAgICBtYXAudGlsZXMgPSBuZXcgQXJyYXkobWFwLmdyaWRIZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxtYXAudGlsZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnRpbGVzW2ldID0gbmV3IEFycmF5KG1hcC5ncmlkV2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy9HZW5lcmF0ZSBUaWxlcyBmb3IgZWFjaCB0aWxlIHRvIHRoZSBjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGwuaGVpZ2h0OyByb3crKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgdGwud2lkdGg7IGNvbHVtbisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gcm93ICogdGwud2lkdGggKyBjb2x1bW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRsLmRhdGFbaW5kZXhdID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dHVyZSA9IHNwcml0ZXNoZWV0LmdldFRleHR1cmUodGwuZGF0YVtpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdUaWxlID0gbmV3IFRpbGUodGV4dHVyZSwgcm93LCBjb2x1bW4sbWFwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZFRpbGUobmV3VGlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vSXRlcmF0ZSB0aHJvdWdoIE9iamVjdCBMYXllcnNcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGwgb2YgbWFwRGF0YS5sYXllcnMpIHtcblxuICAgICAgICAgICAgICAgIGlmICh0bC50eXBlID09IFwib2JqZWN0Z3JvdXBcIikge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgYWxsIHBsYXllcnMgZmlyc3RcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjbyBvZiB0bC5vYmplY3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgIF9fX19fICBfICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICogICAgIHwgIF9fIFxcfCB8ICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgfCB8X18pIHwgfCBfXyBfIF8gICBfICBfX18gXyBfXyBcbiAgICAgICAgICAgICAgICAgICAgICAgICogICAgIHwgIF9fXy98IHwvIF9gIHwgfCB8IHwvIF8gXFwgJ19ffFxuICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgfCB8ICAgIHwgfCAoX3wgfCB8X3wgfCAgX18vIHwgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICogICAgIHxffCAgICB8X3xcXF9fLF98XFxfXywgfFxcX19ffF98ICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgIF9fLyB8ICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgIHxfX18vICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjby50eXBlID09IFwicGxheWVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IE1hdGgucm91bmQoY28ueCAqIFNQUklURV9TQ0FMRS54KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeSA9IChNYXRoLnJvdW5kKGNvLnkpIC0gY28uaGVpZ2h0KSAqIFNQUklURV9TQ0FMRS55OyAvLyAtY28uaGVpZ2h0IGJlY2F1c2UgdGlsZWQgdXNlcyB0aGUgYm90dG9tLWxlZnQgY29ybmVyIGZvciBjb29yZGluYXRlcyBhbmQgUElYSSB1c2VzIHRoZSB0b3AtbGVmdCBjb3JuZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXJJZDogbnVtYmVyID0gbWFwLmdldE1hcE9iamVjdFByb3BlcnR5KGNvLCBcInBsYXllcklkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BsYXllciA9IG5ldyBQbGF5ZXIoeCwgeSwgdGhpcywgcGxheWVySWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5hZGRQbGF5ZXIobmV3UGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICAgICAgICAgICAgICAvL0dlbmVyYXRlIFNwcml0ZXMgZm9yIGVhY2ggb2JqZWN0IHRvIHRoZSBjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjbyBvZiB0bC5vYmplY3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICBfX19fX19fICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgfF9fICAgX198ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqICAgICAgICB8IHwgX19fX18gICAgICBfX19fXyBfIF9fIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHwgfC8gXyBcXCBcXCAvXFwgLyAvIF8gXFwgJ19ffFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHwgfCAoXykgXFwgViAgViAvICBfXy8gfCAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHxffFxcX19fLyBcXF8vXFxfLyBcXF9fX3xffCAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjby50eXBlID09IFwidG93ZXJcIikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRleHR1cmUgPSBzcHJpdGVzaGVldC5nZXRUZXh0dXJlKGNvLmdpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3duZXJJZCA9IG1hcC5nZXRNYXBPYmplY3RQcm9wZXJ0eShjbywgXCJvd25lclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvd25lciA9IG1hcC5wbGF5ZXJzW293bmVySWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG1hcC5nZXRUaWxlTmVhcmVzdFRvKGNvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VG93ZXIgPSBuZXcgVG93ZXIodGV4dHVyZSwgcGFyZW50LCBvd25lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZFRpbGVPYmplY3QobmV3VG93ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgIF9fX19fX18gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqICAgICB8X18gICBfX3wgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHwgfF8gX18gX19fICBfX18gXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgfCB8ICdfXy8gXyBcXC8gXyBcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHwgfCB8IHwgIF9fLyAgX18vXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgfF98X3wgIFxcX19ffFxcX19ffFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY28udHlwZSA9PSBcInRyZWVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0dXJlID0gc3ByaXRlc2hlZXQuZ2V0VGV4dHVyZShjby5naWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG1hcC5nZXRUaWxlTmVhcmVzdFRvKGNvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VHJlZSA9IG5ldyBUcmVlKHRleHR1cmUsIHBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZFRpbGVPYmplY3QobmV3VHJlZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuXG5cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9DYWxsIG9uRmluaXNoIENhbGxiYWNrXG4gICAgICAgICAgICBjYWxsYmFjayhtYXApO1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIGFkZFBsYXllcihwbGF5ZXI6IFBsYXllcikge1xuICAgICAgICAvL3BsYXllci5zcHJpdGUuc2NhbGUgPSBUaWxlZE1hcC5TUFJJVEVfU0NBTEU7XG4gICAgICAgIHRoaXMucGxheWVyc1twbGF5ZXIucGxheWVySWRdID0gcGxheWVyO1xuICAgICAgICB0aGlzLnBsYXllckNvbnRhaW5lci5hZGRDaGlsZChwbGF5ZXIuc3ByaXRlKTtcbiAgICB9XG5cbiAgICBhZGRUaWxlT2JqZWN0KHRpbGVPYmplY3Q6IFRpbGVPYmplY3QpIHtcbiAgICAgICAgdGlsZU9iamVjdC5zY2FsZSA9IFRpbGVkTWFwLlNQUklURV9TQ0FMRTtcbiAgICAgICAgdGhpcy5wbGF5ZXJDb250YWluZXIuYWRkQ2hpbGQodGlsZU9iamVjdCk7XG4gICAgfVxuXG4gICAgYWRkVGlsZSh0aWxlOiBUaWxlKSB7XG4gICAgICAgIHRpbGUueCA9IHRpbGUuZ3JpZFggKiB0aGlzLnNwcml0ZXNoZWV0LnRpbGVXaWR0aCAqIFRpbGVkTWFwLlNQUklURV9TQ0FMRS54O1xuICAgICAgICB0aWxlLnkgPSB0aWxlLmdyaWRZICogdGhpcy5zcHJpdGVzaGVldC50aWxlSGVpZ2h0ICogVGlsZWRNYXAuU1BSSVRFX1NDQUxFLnk7XG4gICAgICAgIHRpbGUuc2NhbGUgPSBUaWxlZE1hcC5TUFJJVEVfU0NBTEU7XG5cbiAgICAgICAgdGhpcy50aWxlc1t0aWxlLmdyaWRZXVt0aWxlLmdyaWRYXSA9IHRpbGU7XG4gICAgICAgIHRoaXMudGlsZUNvbnRhaW5lci5hZGRDaGlsZCh0aWxlKTtcbiAgICB9XG5cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy5pc1BhdXNlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgcGxheSgpIHtcbiAgICAgICAgdGhpcy5pc1BhdXNlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGdldE9iamVjdENvb3JkaW5hdGVzKG1hcE9iamVjdDogUElYSS5SZWN0YW5nbGUpIHtcblxuICAgICAgICAvL2FuIE9iamVjdCBjYW4gYmUgcGxhY2VkIFwiYmV0d2VlblwiIHRpbGVzIGluIHRpbGVkIG1hcCBlZGl0b3IuIEJ1dCBldm50cyBjYW4gYmUgdHJpZ2dlcmVkIG9ubHkgZnJvbSB3aG9sZSB0aWxlcy4gU28gdGhlIG9iZWpjY3RzIHBvc2l0aW9uIGlzIG1hcHBlZCB0byB0aGUgbmVhcmVzdCBUaWxlXG5cbiAgICAgICAgbGV0IG9yaWdpbmFsWCA9IG1hcE9iamVjdC54ICogVGlsZWRNYXAuU1BSSVRFX1NDQUxFLng7XG4gICAgICAgIGxldCB4VGlsZXMgPSBvcmlnaW5hbFggLyB0aGlzLmZpbmFsVGlsZVdpZHRoO1xuICAgICAgICB4VGlsZXMgPSBNYXRoLnJvdW5kKHhUaWxlcyk7XG5cbiAgICAgICAgbGV0IG9yaWdpbmFsWSA9IChtYXBPYmplY3QueSAtIG1hcE9iamVjdC5oZWlnaHQpICogVGlsZWRNYXAuU1BSSVRFX1NDQUxFLnk7ICAvLyAtY28uaGVpZ2h0IGJlY2F1c2UgdGlsZWQgdXNlcyB0aGUgYm90dG9tLWxlZnQgY29ybmVyIGZvciBjb29yZGluYXRlcyBhbmQgUElYSSB1c2VzIHRoZSB0b3AtbGVmdCBjb3JuZXIgICAgICAgICAgICAgIFxuICAgICAgICBsZXQgeVRpbGVzID0gb3JpZ2luYWxZIC8gdGhpcy5maW5hbFRpbGVIZWlnaHQ7XG4gICAgICAgIHlUaWxlcyA9IE1hdGgucm91bmQoeVRpbGVzKTtcblxuICAgICAgICByZXR1cm4geyBncmlkWDogeFRpbGVzLCBncmlkWTogeVRpbGVzIH07XG4gICAgfVxuXG4gICAgZ2V0VGlsZU5lYXJlc3RUbyhtYXBPYmplY3Q6IFBJWEkuUmVjdGFuZ2xlKTogVGlsZSB7XG4gICAgICAgIGNvbnN0IHBvcyA9IHRoaXMuZ2V0T2JqZWN0Q29vcmRpbmF0ZXMobWFwT2JqZWN0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZXNbcG9zLmdyaWRZXVtwb3MuZ3JpZFhdO1xuICAgIH1cblxufSIsImV4cG9ydCBjbGFzcyBLZXlib2FyZE1hbmFnZXIge1xuXG4gICAgc3RhdGljIGtleVVwcyA9IHt9O1xuICAgIHN0YXRpYyBrZXlEb3ducyA9IHt9O1xuXG4gICAgc3RhdGljIGluaXQoKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgS2V5Ym9hcmRNYW5hZ2VyLm9uS2V5VXApO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgS2V5Ym9hcmRNYW5hZ2VyLm9uS2V5RG93bik7XG4gICAgfVxuXG4gICAgc3RhdGljIG9uS2V5VXAoZXZlbnQpIHtcbiAgICAgICAgZm9yIChjb25zdCBpIGluIEtleWJvYXJkTWFuYWdlci5rZXlVcHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBLZXlib2FyZE1hbmFnZXIua2V5VXBzW2ldO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PSBlbGVtZW50LmtleSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5vbktleVVwID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm9uS2V5VXAoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBvbktleURvd24oZXZlbnQpIHtcbiAgICAgICAgZm9yIChjb25zdCBpIGluIEtleWJvYXJkTWFuYWdlci5rZXlEb3ducykge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IEtleWJvYXJkTWFuYWdlci5rZXlEb3duc1tpXTtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT0gZWxlbWVudC5rZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQub25LZXlEb3duID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm9uS2V5RG93bihldmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIHJlZ2lzdGVyS2V5KGtleSwgb25LZXlEb3duLCBvbktleVVwLCBpZGVudGlmaWVyKSB7XG4gICAgICAgIEtleWJvYXJkTWFuYWdlci5rZXlEb3duc1tpZGVudGlmaWVyXSA9IHsga2V5OiBrZXksIG9uS2V5RG93bjogb25LZXlEb3duIH07XG4gICAgICAgIEtleWJvYXJkTWFuYWdlci5rZXlVcHNbaWRlbnRpZmllcl0gPSB7IGtleToga2V5LCBvbktleVVwOiBvbktleVVwIH07XG4gICAgfVxuXG4gICAgc3RhdGljIHVucmVnaXN0ZXJLZXkoaWRlbnRpZmllcikge1xuICAgICAgICBkZWxldGUgS2V5Ym9hcmRNYW5hZ2VyLmtleURvd25zW2lkZW50aWZpZXJdO1xuICAgICAgICBkZWxldGUgS2V5Ym9hcmRNYW5hZ2VyLmtleVVwc1tpZGVudGlmaWVyXTtcbiAgICB9XG5cblxuXG59XG4iLCJleHBvcnQgY2xhc3MgVXBkYXRlU2NoZWR1bGVyIHtcblxuICAgIHN0YXRpYyBjbGllbnRzOiBvYmplY3QgPSB7fTtcbiAgICBzdGF0aWMgaXNQYXVzZWQ6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgc3RhdGljIHJlZ2lzdGVyKGlkOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbiwgbXlzZWxmOiBvYmplY3QpIHtcbiAgICAgICAgVXBkYXRlU2NoZWR1bGVyLmNsaWVudHNbaWRdID0ge1xuICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgICAgICAgbXlzZWxmOiBteXNlbGZcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgdW5yZWdpc3RlcihpZDogc3RyaW5nKSB7XG4gICAgICAgIGRlbGV0ZSBVcGRhdGVTY2hlZHVsZXIuY2xpZW50c1tpZF07XG4gICAgfVxuXG4gICAgc3RhdGljIGRvU3RlcChkZWx0YTogbnVtYmVyKSB7XG4gICAgICAgIGlmICghVXBkYXRlU2NoZWR1bGVyLmlzUGF1c2VkKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpIGluIFVwZGF0ZVNjaGVkdWxlci5jbGllbnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRDYWxsYmFjayA9IFVwZGF0ZVNjaGVkdWxlci5jbGllbnRzW2ldLmNhbGxiYWNrO1xuICAgICAgICAgICAgICAgIGxldCBteXNlbGYgPSBVcGRhdGVTY2hlZHVsZXIuY2xpZW50c1tpXS5teXNlbGY7XG4gICAgICAgICAgICAgICAgY3VycmVudENhbGxiYWNrKG15c2VsZiwgZGVsdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxuIiwiaW1wb3J0IHsgVGlsZWRTcHJpdGVzaGVldCB9IGZyb20gXCIuL1RpbGVkU3ByaXRlc2hlZXRcIjtcbmltcG9ydCB7IFRpbGVkTWFwIH0gZnJvbSBcIi4vVGlsZWRNYXBcIjtcbmltcG9ydCB7IEtleWJvYXJkTWFuYWdlciB9IGZyb20gXCIuL0tleWJvYXJkTWFuYWdlclwiO1xuaW1wb3J0IHsgVXBkYXRlU2NoZWR1bGVyIH0gZnJvbSBcIi4vVXBkYXRlU2NoZWR1bGVyXCI7XG5cbmNvbnN0IFNQUklURVNIRUVUID0gbmV3IFRpbGVkU3ByaXRlc2hlZXQoXCJkYXRhL2Fzc2V0cy9zcHJpdGVzaGVldC5wbmdcIiwgMSwgMTYsIDE2LCAzMSwgNTcpIC8vS2VubnkgU3ByaXRlc2hlZXQgc2VlIGRhdGEvbWFwcy9LZW5uZXkgUlBHIFRpbGVzLnRzeFxuLy9UT0RPIFBhcnNlIHRoaXMgaW5mb3JtYXRpb24gYXV0b21hdGl4YWxseSBmcm9tIHRzeCBmaWxlXG5cbmNvbnN0IEFQUF9XSURUSCA9IDEwMDA7XG5jb25zdCBBUFBfSEVJR0hUID0gNzAwO1xuXG5leHBvcnQgY2xhc3MgR2FtZU1hbmFnZXIge1xuXG4gICAgc3RhdGljIG1hcDogVGlsZWRNYXA7XG5cbiAgICBzdGF0aWMgbXlDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIiNwaXhpQ2FudmFzXCIpO1xuICAgIHN0YXRpYyBwaXhpQXBwIDogUElYSS5BcHBsaWNhdGlvbjtcblxuXG4gICAgc3RhdGljIHN0YXJ0R2FtZSgpIHtcbiAgICAgICAgLy9DcmVhdGUgUGl4aSBzdHVmZlxuICAgICAgICAvL0NyZWF0ZSBhIFBpeGkgQXBwbGljYXRpb25cbiAgICAgICAgY2xhc3MgUGl4aU9wdGlvbnMgaW1wbGVtZW50cyBQSVhJLkFwcGxpY2F0aW9uT3B0aW9uc3tcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB3aWR0aCxwdWJsaWMgaGVpZ2h0LHB1YmxpYyB2aWV3KXt9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGl4aU9wdGlvbnMgPSBuZXcgUGl4aU9wdGlvbnMoQVBQX1dJRFRILEFQUF9IRUlHSFQsR2FtZU1hbmFnZXIubXlDYW52YXMpO1xuXG4gICAgICAgIEdhbWVNYW5hZ2VyLnBpeGlBcHAgPSBuZXcgUElYSS5BcHBsaWNhdGlvbihwaXhpT3B0aW9ucyk7XG5cbiAgICAgICAgLy9BZGQgdGhlIGNhbnZhcyB0aGF0IFBpeGkgYXV0b21hdGljYWxseSBjcmVhdGVkIGZvciB5b3UgdG8gdGhlIEhUTUwgZG9jdW1lbnRcbiAgICAgICAgLy9TdGlsbCBuZWNjZXNhcnJ5Pz8/P1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKEdhbWVNYW5hZ2VyLnBpeGlBcHAudmlldyk7XG5cbiAgICAgICAgLy9Jbml0IEtleWJvYXJkIE1hbmFnZXJcbiAgICAgICAgS2V5Ym9hcmRNYW5hZ2VyLmluaXQoKTtcblxuICAgICAgICAvL1JlZ2lzdGVyIFVwZGF0ZSBzY2hlZHVsZXJcbiAgICAgICAgR2FtZU1hbmFnZXIucGl4aUFwcC50aWNrZXIuYWRkKFVwZGF0ZVNjaGVkdWxlci5kb1N0ZXApO1xuXG4gICAgICAgIFxuICAgICAgICBUaWxlZE1hcC5sb2FkTWFwKFwiL2RhdGEvbWFwcy9tYXAxLmpzb25cIixTUFJJVEVTSEVFVCxmdW5jdGlvbihwYXJzZWRNYXA6VGlsZWRNYXApe1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJNYXAgcGFyc2VkXCIpO1xuICAgICAgICAgICAgR2FtZU1hbmFnZXIubWFwID0gcGFyc2VkTWFwO1xuICAgICAgICAgICAgR2FtZU1hbmFnZXIucGl4aUFwcC5zdGFnZS5hZGRDaGlsZChwYXJzZWRNYXApO1xuICAgICAgICAgICAgR2FtZU1hbmFnZXIucGl4aUFwcC50aWNrZXIuc3RhcnQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59IiwiaW1wb3J0IHtHYW1lTWFuYWdlcn0gZnJvbSBcIi4vbW9kZWwvR2FtZU1hbmFnZXJcIlxuXG5HYW1lTWFuYWdlci5zdGFydEdhbWUoKTsiXSwic291cmNlUm9vdCI6IiJ9