!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e){t.exports=PIXI},function(t,e){t.exports=$},function(t,e,i){"use strict";i.r(e);var n,r=i(0),o=function(){function t(t,e,i,n,o,a){this.path=t,this.border=e,this.tileHeight=n,this.tileWidth=i,this.rows=o,this.columns=a,this.bigTexture=r.Texture.fromImage(t,!0,r.SCALE_MODES.NEAREST),this.textures=[]}return t.prototype.getTexture=function(t){if(this.textures[t])return this.textures[t];var e=Math.floor((t-1)/this.columns),i=(t-1)%this.columns,n=this.tileWidth,o=this.tileHeight,a=i*n+i*this.border,s=e*o+e*this.border,p=new r.Texture(this.bigTexture.baseTexture,new r.Rectangle(a,s,n,o));return this.textures[t]=p,p},t}(),a=function(){function t(e,i,n,o){this.map=n,this.playerId=o,this.animations=[];for(var a=r.Texture.fromImage("data/assets/player_"+o+".png").baseTexture,s=0;s<4;s++){for(var p=[],c=0;c<3;c++){var u=new r.Texture(a,new r.Rectangle(c*t.SPRITE_WIDTH,s*t.SPRITE_HEIGHT,t.SPRITE_WIDTH,t.SPRITE_HEIGHT));p.push(u)}this.animations.push(p)}this.sprite=new r.extras.AnimatedSprite(this.animations[t.DOWN]),this.sprite.x=e,this.sprite.y=i,this.vx=0,this.vy=0,this.sprite.scale=t.SPRITE_SCALE,this.sprite.animationSpeed=.13,this.sprite.loop=!0,this.lastKey=""}return t.prototype.changeDirection=function(e){0<=e&&e<=3?(this.sprite.textures=this.animations[e],this.sprite.play()):e==t.STOP&&this.sprite.stop()},t.prototype.keyDown=function(e){if(e.key!=this.lastKey)switch(this.lastKey=e.key,e.key){case"ArrowUp":this.vy=-1*t.PLAYER_SPEED,this.changeDirection(t.UP);break;case"ArrowDown":this.vy=1*t.PLAYER_SPEED,this.changeDirection(t.DOWN);break;case"ArrowLeft":this.vx=-1*t.PLAYER_SPEED,this.changeDirection(t.LEFT);break;case"ArrowRight":this.vx=1*t.PLAYER_SPEED,this.changeDirection(t.RIGHT)}},t.prototype.keyUp=function(e){switch(this.lastKey="",e.key){case"ArrowUp":case"ArrowDown":this.vy=0,this.changeDirection(t.STOP);break;case"ArrowLeft":case"ArrowRight":this.vx=0,this.changeDirection(t.STOP)}},t.prototype.doStep=function(t){var e=this.sprite.x+this.vx*t,i=this.sprite.y+this.vy*t;Math.floor(e/this.map.finalTileWidth),Math.floor((e+this.sprite.width)/this.map.finalTileWidth),Math.floor(i/this.map.finalTileHeight),Math.floor((i+this.sprite.height)/this.map.finalTileHeight);this.sprite.x=e,this.sprite.y=i;var n=this.sprite.x/this.map.finalTileWidth;n=Math.round(n);var r=this.sprite.y/this.map.finalTileHeight;r=Math.round(r)},t.UP=0,t.RIGHT=1,t.DOWN=2,t.LEFT=3,t.STOP=4,t.SPRITE_WIDTH=32,t.SPRITE_HEIGHT=36,t.SPRITE_SCALE=new r.Point(1.5,1.5),t.PLAYER_SPEED=3,t}(),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),p=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.gridX=i,o.gridY=n,o.map=r,o.x=i*r.finalTileWidth,o.y=n*r.finalTileHeight,o}return s(e,t),e.prototype.onHit=function(t){this.tileObject&&this.tileObject.onHit(t)},e.prototype.onPlant=function(t){this.tileObject&&this.tileObject.onPlant(t)},e.prototype.onPlace=function(t){null==this.tileObject&&console.log("Placing Pumpkin TNT")},e.prototype.onHarvest=function(t){this.tileObject&&this.tileObject.onHarvest(t)},e.prototype.isFree=function(){return!this.tileObject},e}(r.Sprite),c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),u=function(t){function e(e,i){var n=t.call(this,e)||this;if(n.parent=i,!n.parent.isFree())throw new Error("Can't add TileObject to a Tile that allready has an TileObject");return n.parent.tileObject=n,n.x=n.parent.x,n.y=n.parent.y,n}return c(e,t),e.prototype.onHit=function(t){},e.prototype.onPlant=function(t){},e.prototype.onHarvest=function(t){},e.prototype.onDestroy=function(t){delete this.parent.tileObject,this.destroy()},e}(r.Sprite),h=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),l=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r.owner=n,r}return h(e,t),e.prototype.onHit=function(t){},e.prototype.onDestroy=function(t){},e}(u),f=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.onHit=function(t){},e.prototype.onDestroy=function(t){},e.prototype.onHarvest=function(t){},e}(u),d=i(1),g=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),v=function(t){function e(){var e=t.call(this)||this;return e.tileContainer=new r.Container,e.addChild(e.tileContainer),e.tileObjectContainer=new r.Container,e.addChild(e.tileObjectContainer),e.playerContainer=new r.Container,e.addChild(e.playerContainer),e.players=[],e}return g(e,t),e.prototype.getMapObjectProperty=function(t,e){for(var i=0,n=t.properties;i<n.length;i++){var r=n[i];if(r.name==e)return r.value}},e.loadMap=function(t,i,n){var o=new e,s=new r.Point(e.MAP_ZOOM,e.MAP_ZOOM);o.finalTileWidth=i.tileWidth*s.x,o.finalTileHeight=i.tileHeight*s.y,o.spritesheet=i,d.getJSON(t,{},(function(t){for(var e=0,r=t.layers;e<r.length;e++){if("tilelayer"==(T=r[e]).type){o.gridWidth=T.width,o.gridHeight=T.height,o.tiles=new Array(o.gridHeight);for(var c=0;c<o.tiles.length;c++)o.tiles[c]=new Array(o.gridWidth);for(var u=0;u<T.height;u++)for(var h=0;h<T.width;h++){var f=u*T.width+h;if(T.data[f]>0){var d=i.getTexture(T.data[f]),g=new p(d,u,h,o);o.addTile(g)}}}}for(var v=0,_=t.layers;v<_.length;v++){var T;if("objectgroup"==(T=_[v]).type){for(var P=0,w=T.objects;P<w.length;P++){if("player"==(m=w[P]).type){var O=Math.round(m.x*s.x),b=(Math.round(m.y)-m.height)*s.y,E=o.getMapObjectProperty(m,"playerId"),x=new a(O,b,this,E);o.addPlayer(x)}}for(var S=0,j=T.objects;S<j.length;S++){var m;if("tower"==(m=j[S]).type){d=i.getTexture(m.gid);var A=o.getMapObjectProperty(m,"owner"),C=o.players[A],D=o.getTileNearestTo(m),k=new l(d,D,C);o.addTileObject(k)}else if("tree"==m.type){d=i.getTexture(m.gid);var H=o.getTileNearestTo(m),M=new y(d,H);o.addTileObject(M)}}}}n(o)}))},e.prototype.addPlayer=function(t){this.players[t.playerId]=t,this.playerContainer.addChild(t.sprite)},e.prototype.addTileObject=function(t){t.scale=e.SPRITE_SCALE,this.playerContainer.addChild(t)},e.prototype.addTile=function(t){t.x=t.gridX*this.spritesheet.tileWidth*e.SPRITE_SCALE.x,t.y=t.gridY*this.spritesheet.tileHeight*e.SPRITE_SCALE.y,t.scale=e.SPRITE_SCALE,this.tiles[t.gridY][t.gridX]=t,this.tileContainer.addChild(t)},e.prototype.pause=function(){this.isPaused=!0},e.prototype.play=function(){this.isPaused=!1},e.prototype.getObjectCoordinates=function(t){var i=t.x*e.SPRITE_SCALE.x/this.finalTileWidth;i=Math.round(i);var n=(t.y-t.height)*e.SPRITE_SCALE.y/this.finalTileHeight;return{gridX:i,gridY:n=Math.round(n)}},e.prototype.getTileNearestTo=function(t){var e=this.getObjectCoordinates(t);return this.tiles[e.gridY][e.gridX]},e.MAP_ZOOM=4,e.SPRITE_SCALE=new r.Point(e.MAP_ZOOM,e.MAP_ZOOM),e}(r.Container),_=function(){function t(){}return t.init=function(){document.addEventListener("keyup",t.onKeyUp),document.addEventListener("keydown",t.onKeyDown)},t.onKeyUp=function(e){for(var i in t.keyUps){var n=t.keyUps[i];e.key==n.key&&"function"==typeof n.onKeyUp&&n.onKeyUp(e)}},t.onKeyDown=function(e){for(var i in t.keyDowns){var n=t.keyDowns[i];e.key==n.key&&"function"==typeof n.onKeyDown&&n.onKeyDown(e)}},t.registerKey=function(e,i,n,r){t.keyDowns[r]={key:e,onKeyDown:i},t.keyUps[r]={key:e,onKeyUp:n}},t.unregisterKey=function(e){delete t.keyDowns[e],delete t.keyUps[e]},t.keyUps={},t.keyDowns={},t}(),T=function(){function t(){}return t.register=function(e,i,n){t.clients[e]={callback:i,myself:n}},t.unregister=function(e){delete t.clients[e]},t.doStep=function(e){if(!t.isPaused)for(var i in t.clients){(0,t.clients[i].callback)(t.clients[i].myself,e)}},t.clients={},t.isPaused=!0,t}(),P=new o("data/assets/spritesheet.png",1,16,16,31,57);(function(){function t(){}return t.startGame=function(){var e=new function(t,e,i){this.width=t,this.height=e,this.view=i}(1e3,700,t.myCanvas);t.pixiApp=new r.Application(e),document.body.appendChild(t.pixiApp.view),_.init(),t.pixiApp.ticker.add(T.doStep),v.loadMap("data/maps/map1.json",P,(function(e){console.log("Map parsed"),t.map=e,t.pixiApp.stage.addChild(e),t.pixiApp.ticker.start()}))},t.myCanvas=document.getElementById("#pixiCanvas"),t})().startGame()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiUElYSVwiIiwid2VicGFjazovLy9leHRlcm5hbCBcIiRcIiIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVGlsZWRTcHJpdGVzaGVldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvUGxheWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9UaWxlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9UaWxlT2JqZWN0LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9Ub3dlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVHJlZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVGlsZWRNYXAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL0tleWJvYXJkTWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVXBkYXRlU2NoZWR1bGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9HYW1lTWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJQSVhJIiwiJCIsInBhdGgiLCJib3JkZXIiLCJ0aWxlV2lkdGgiLCJ0aWxlSGVpZ2h0Iiwicm93cyIsImNvbHVtbnMiLCJ0aGlzIiwiYmlnVGV4dHVyZSIsImZyb21JbWFnZSIsIk5FQVJFU1QiLCJ0ZXh0dXJlcyIsImdldFRleHR1cmUiLCJnaWQiLCJyb3ciLCJNYXRoIiwiZmxvb3IiLCJjb2x1bW4iLCJ4IiwieSIsImJhc2VUZXh0dXJlIiwibWFwIiwicGxheWVySWQiLCJhbmltYXRpb25zIiwidGV4dHVyZUFycmF5IiwiUGxheWVyIiwiU1BSSVRFX1dJRFRIIiwiU1BSSVRFX0hFSUdIVCIsInB1c2giLCJzcHJpdGUiLCJBbmltYXRlZFNwcml0ZSIsIkRPV04iLCJ2eCIsInZ5Iiwic2NhbGUiLCJTUFJJVEVfU0NBTEUiLCJhbmltYXRpb25TcGVlZCIsImxvb3AiLCJsYXN0S2V5IiwiY2hhbmdlRGlyZWN0aW9uIiwiZGlyZWN0aW9uIiwicGxheSIsIlNUT1AiLCJzdG9wIiwia2V5RG93biIsImV2ZW50IiwiUExBWUVSX1NQRUVEIiwiVVAiLCJMRUZUIiwiUklHSFQiLCJrZXlVcCIsImRvU3RlcCIsImRlbHRhIiwibmV3WCIsIm5ld1kiLCJmaW5hbFRpbGVXaWR0aCIsIndpZHRoIiwiZmluYWxUaWxlSGVpZ2h0IiwiaGVpZ2h0IiwieFRpbGVzIiwicm91bmQiLCJ5VGlsZXMiLCJ0ZXh0dXJlIiwiZ3JpZFgiLCJncmlkWSIsIm9uSGl0IiwiaGl0RXZlbnQiLCJ0aWxlT2JqZWN0Iiwib25QbGFudCIsInBsYW50Iiwib25QbGFjZSIsInB1bXBraW4iLCJ1bmRlZmluZWQiLCJjb25zb2xlIiwibG9nIiwib25IYXJ2ZXN0IiwiaW5pdGlhdG9yIiwiaXNGcmVlIiwicGFyZW50IiwiRXJyb3IiLCJoaXRldmVudCIsIm9uRGVzdHJveSIsImRlc3Ryb3kiLCJvd25lciIsIlRpbGVPYmplY3QiLCJ0aWxlQ29udGFpbmVyIiwiYWRkQ2hpbGQiLCJ0aWxlT2JqZWN0Q29udGFpbmVyIiwicGxheWVyQ29udGFpbmVyIiwicGxheWVycyIsImdldE1hcE9iamVjdFByb3BlcnR5IiwibWFwT2JqZWN0IiwicHJvcGVydGllcyIsInByb3AiLCJsb2FkTWFwIiwibWFwUGF0aCIsInNwcml0ZXNoZWV0IiwiY2FsbGJhY2siLCJUaWxlZE1hcCIsIk1BUF9aT09NIiwibWFwRGF0YSIsImxheWVycyIsInRsIiwidHlwZSIsImdyaWRXaWR0aCIsImdyaWRIZWlnaHQiLCJ0aWxlcyIsIkFycmF5IiwibGVuZ3RoIiwiaW5kZXgiLCJkYXRhIiwibmV3VGlsZSIsIlRpbGUiLCJhZGRUaWxlIiwib2JqZWN0cyIsImNvIiwibmV3UGxheWVyIiwiYWRkUGxheWVyIiwib3duZXJJZCIsImdldFRpbGVOZWFyZXN0VG8iLCJuZXdUb3dlciIsIlRvd2VyIiwiYWRkVGlsZU9iamVjdCIsIm5ld1RyZWUiLCJUcmVlIiwicGxheWVyIiwidGlsZSIsInBhdXNlIiwiaXNQYXVzZWQiLCJnZXRPYmplY3RDb29yZGluYXRlcyIsInBvcyIsImluaXQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJLZXlib2FyZE1hbmFnZXIiLCJvbktleVVwIiwib25LZXlEb3duIiwia2V5VXBzIiwiZWxlbWVudCIsImtleURvd25zIiwicmVnaXN0ZXJLZXkiLCJpZGVudGlmaWVyIiwidW5yZWdpc3RlcktleSIsInJlZ2lzdGVyIiwiaWQiLCJteXNlbGYiLCJVcGRhdGVTY2hlZHVsZXIiLCJjbGllbnRzIiwidW5yZWdpc3RlciIsImN1cnJlbnRDYWxsYmFjayIsIlNQUklURVNIRUVUIiwic3RhcnRHYW1lIiwicGl4aU9wdGlvbnMiLCJ2aWV3IiwiR2FtZU1hbmFnZXIiLCJteUNhbnZhcyIsInBpeGlBcHAiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJ0aWNrZXIiLCJhZGQiLCJwYXJzZWRNYXAiLCJzdGFnZSIsInN0YXJ0IiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUssTUFBT0EsSUFDdEQsRUFBUEUsR0FBNEIsaUJBQVRGLEVBQW1CLElBQUksSUFBSU0sS0FBT04sRUFBT3JCLEVBQW9CVSxFQUFFZSxFQUFJRSxFQUFLLFNBQVNBLEdBQU8sT0FBT04sRUFBTU0sSUFBUUMsS0FBSyxLQUFNRCxJQUM5SSxPQUFPRixHQUlSekIsRUFBb0I2QixFQUFJLFNBQVMxQixHQUNoQyxJQUFJUyxFQUFTVCxHQUFVQSxFQUFPcUIsV0FDN0IsV0FBd0IsT0FBT3JCLEVBQWdCLFNBQy9DLFdBQThCLE9BQU9BLEdBRXRDLE9BREFILEVBQW9CVSxFQUFFRSxFQUFRLElBQUtBLEdBQzVCQSxHQUlSWixFQUFvQmEsRUFBSSxTQUFTaUIsRUFBUUMsR0FBWSxPQUFPakIsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdUIsRUFBUUMsSUFHekcvQixFQUFvQmtDLEVBQUksR0FJakJsQyxFQUFvQkEsRUFBb0JtQyxFQUFJLEcsZ0JDbEZyRGhDLEVBQU9ELFFBQVVrQyxNLGNDQWpCakMsRUFBT0QsUUFBVW1DLEcsaURDRWpCLGFBV0MsV0FBWUMsRUFBS0MsRUFBT0MsRUFBVUMsRUFBV0MsRUFBS0MsR0FDakRDLEtBQUtOLEtBQU9BLEVBQ1pNLEtBQUtMLE9BQVNBLEVBQ2RLLEtBQUtILFdBQWFBLEVBQ2xCRyxLQUFLSixVQUFZQSxFQUNqQkksS0FBS0YsS0FBT0EsRUFDWkUsS0FBS0QsUUFBVUEsRUFDZkMsS0FBS0MsV0FBYSxVQUFRQyxVQUFVUixHQUFNLEVBQU0sY0FBWVMsU0FDNURILEtBQUtJLFNBQVcsR0EwQmxCLE9BdkJDLFlBQUFDLFdBQUEsU0FBV0MsR0FFVixHQUFJTixLQUFLSSxTQUFTRSxHQUNoQixPQUFPTixLQUFLSSxTQUFTRSxHQUdyQixJQUFJQyxFQUFhQyxLQUFLQyxPQUFPSCxFQUFNLEdBQUtOLEtBQUtELFNBQ3pDVyxHQUFpQkosRUFBTSxHQUFLTixLQUFLRCxRQUVqQ0gsRUFBbUJJLEtBQUtKLFVBQ3hCQyxFQUFvQkcsS0FBS0gsV0FFekJjLEVBQVdELEVBQVNkLEVBQVljLEVBQVNWLEtBQUtMLE9BQzlDaUIsRUFBV0wsRUFBTVYsRUFBYVUsRUFBTVAsS0FBS0wsT0FFekNqQixFQUFZLElBQUksVUFBUXNCLEtBQUtDLFdBQVdZLFlBQWEsSUFBSSxZQUFVRixFQUFHQyxFQUFHaEIsRUFBV0MsSUFHeEYsT0FEQUcsS0FBS0ksU0FBU0UsR0FBTzVCLEVBQ2RBLEdBS1gsRUE3Q0EsR0NDQSxhQXVCSSxXQUFZaUMsRUFBV0MsRUFBV0UsRUFBY0MsR0FDNUNmLEtBQUtjLElBQU1BLEVBQ1hkLEtBQUtlLFNBQVdBLEVBQ2hCZixLQUFLZ0IsV0FBYSxHQUVsQixJQURBLElBQUlILEVBQTJCLFVBQVFYLFVBQVUsc0JBQXNCYSxFQUFRLFFBQVFGLFlBQzlFTixFQUFNLEVBQUdBLEVBQU0sRUFBR0EsSUFBTyxDQUU5QixJQURBLElBQUlVLEVBQTBCLEdBQ3JCUCxFQUFTLEVBQUdBLEVBQVMsRUFBR0EsSUFBVSxDQUN2QyxJQUFJaEMsRUFBSSxJQUFJLFVBQVFtQyxFQUFhLElBQUksWUFBVUgsRUFBU1EsRUFBT0MsYUFBY1osRUFBTVcsRUFBT0UsY0FBZUYsRUFBT0MsYUFBY0QsRUFBT0UsZ0JBQ3JJSCxFQUFhSSxLQUFLM0MsR0FFdEJzQixLQUFLZ0IsV0FBV0ssS0FBS0osR0FHekJqQixLQUFLc0IsT0FBUyxJQUFJLFNBQU9DLGVBQWV2QixLQUFLZ0IsV0FBV0UsRUFBT00sT0FDL0R4QixLQUFLc0IsT0FBT1gsRUFBSUEsRUFDaEJYLEtBQUtzQixPQUFPVixFQUFJQSxFQUNoQlosS0FBS3lCLEdBQUssRUFDVnpCLEtBQUswQixHQUFLLEVBQ1YxQixLQUFLc0IsT0FBT0ssTUFBUVQsRUFBT1UsYUFDM0I1QixLQUFLc0IsT0FBT08sZUFBaUIsSUFDN0I3QixLQUFLc0IsT0FBT1EsTUFBTyxFQUNuQjlCLEtBQUsrQixRQUFVLEdBMEd2QixPQXRHSSxZQUFBQyxnQkFBQSxTQUFnQkMsR0FDUixHQUFLQSxHQUFhQSxHQUFhLEdBQy9CakMsS0FBS3NCLE9BQU9sQixTQUFXSixLQUFLZ0IsV0FBV2lCLEdBQ3ZDakMsS0FBS3NCLE9BQU9ZLFFBRVBELEdBQWFmLEVBQU9pQixNQUN6Qm5DLEtBQUtzQixPQUFPYyxRQUlwQixZQUFBQyxRQUFBLFNBQVFDLEdBQ0osR0FBSUEsRUFBTXZELEtBQU9pQixLQUFLK0IsUUFFbEIsT0FEQS9CLEtBQUsrQixRQUFVTyxFQUFNdkQsSUFDYnVELEVBQU12RCxLQUNWLElBQUssVUFDRGlCLEtBQUswQixJQUFNLEVBQUlSLEVBQU9xQixhQUN0QnZDLEtBQUtnQyxnQkFBZ0JkLEVBQU9zQixJQUM1QixNQUNKLElBQUssWUFDRHhDLEtBQUswQixHQUFLLEVBQUlSLEVBQU9xQixhQUNyQnZDLEtBQUtnQyxnQkFBZ0JkLEVBQU9NLE1BQzVCLE1BQ0osSUFBSyxZQUNEeEIsS0FBS3lCLElBQU0sRUFBSVAsRUFBT3FCLGFBQ3RCdkMsS0FBS2dDLGdCQUFnQmQsRUFBT3VCLE1BQzVCLE1BQ0osSUFBSyxhQUNEekMsS0FBS3lCLEdBQUssRUFBSVAsRUFBT3FCLGFBQ3JCdkMsS0FBS2dDLGdCQUFnQmQsRUFBT3dCLFNBTzVDLFlBQUFDLE1BQUEsU0FBTUwsR0FFRixPQURBdEMsS0FBSytCLFFBQVUsR0FDUE8sRUFBTXZELEtBQ1YsSUFBSyxVQUlMLElBQUssWUFDRGlCLEtBQUswQixHQUFLLEVBQ1YxQixLQUFLZ0MsZ0JBQWdCZCxFQUFPaUIsTUFDNUIsTUFDSixJQUFLLFlBSUwsSUFBSyxhQUNEbkMsS0FBS3lCLEdBQUssRUFDVnpCLEtBQUtnQyxnQkFBZ0JkLEVBQU9pQixRQU14QyxZQUFBUyxPQUFBLFNBQU9DLEdBRUgsSUFBSUMsRUFBTzlDLEtBQUtzQixPQUFPWCxFQUFJWCxLQUFLeUIsR0FBS29CLEVBQ2pDRSxFQUFPL0MsS0FBS3NCLE9BQU9WLEVBQUlaLEtBQUswQixHQUFLbUIsRUFHM0JyQyxLQUFLQyxNQUFNcUMsRUFBTzlDLEtBQUtjLElBQUlrQyxnQkFDN0J4QyxLQUFLQyxPQUFPcUMsRUFBTzlDLEtBQUtzQixPQUFPMkIsT0FBU2pELEtBQUtjLElBQUlrQyxnQkFJL0N4QyxLQUFLQyxNQUFNc0MsRUFBTy9DLEtBQUtjLElBQUlvQyxpQkFDN0IxQyxLQUFLQyxPQUFPc0MsRUFBTy9DLEtBQUtzQixPQUFPNkIsUUFBVW5ELEtBQUtjLElBQUlvQyxpQkFnQnREbEQsS0FBS3NCLE9BQU9YLEVBQUltQyxFQUNoQjlDLEtBQUtzQixPQUFPVixFQUFJbUMsRUFLcEIsSUFDSUssRUFEWXBELEtBQUtzQixPQUFPWCxFQUNIWCxLQUFLYyxJQUFJa0MsZUFDbENJLEVBQVM1QyxLQUFLNkMsTUFBTUQsR0FFcEIsSUFDSUUsRUFEWXRELEtBQUtzQixPQUFPVixFQUNIWixLQUFLYyxJQUFJb0MsZ0JBQ2xDSSxFQUFTOUMsS0FBSzZDLE1BQU1DLElBaEpqQixFQUFBZCxHQUFhLEVBQ2IsRUFBQUUsTUFBZ0IsRUFDaEIsRUFBQWxCLEtBQWUsRUFDZixFQUFBaUIsS0FBZSxFQUNmLEVBQUFOLEtBQWUsRUFFZixFQUFBaEIsYUFBdUIsR0FDdkIsRUFBQUMsY0FBd0IsR0FDeEIsRUFBQVEsYUFBc0IsSUFBSSxRQUFNLElBQUssS0FDckMsRUFBQVcsYUFBZSxFQTJJMUIsRUF2SkEsRyxvVENLQSxjQU9JLFdBQVlnQixFQUFrQkMsRUFBZUMsRUFBZTNDLEdBQTVELE1BQ0ksWUFBTXlDLElBQVEsSyxPQUNkLEVBQUtDLE1BQVFBLEVBQ2IsRUFBS0MsTUFBUUEsRUFDYixFQUFLM0MsSUFBTUEsRUFFWCxFQUFLSCxFQUFJNkMsRUFBUTFDLEVBQUlrQyxlQUNyQixFQUFLcEMsRUFBSTZDLEVBQVEzQyxFQUFJb0MsZ0IsRUFvQzdCLE9BbEQwQixPQWlCdEIsWUFBQVEsTUFBQSxTQUFNQyxHQUNFM0QsS0FBSzRELFlBQ0w1RCxLQUFLNEQsV0FBV0YsTUFBTUMsSUFJOUIsWUFBQUUsUUFBQSxTQUFRQyxHQUNBOUQsS0FBSzRELFlBQ0w1RCxLQUFLNEQsV0FBV0MsUUFBUUMsSUFJaEMsWUFBQUMsUUFBQSxTQUFRQyxHQUNtQkMsTUFBbkJqRSxLQUFLNEQsWUFDTE0sUUFBUUMsSUFBSSx3QkFJcEIsWUFBQUMsVUFBQSxTQUFVQyxHQUNGckUsS0FBSzRELFlBQ0w1RCxLQUFLNEQsV0FBV1EsVUFBVUMsSUFJbEMsWUFBQUMsT0FBQSxXQUNJLE9BQU90RSxLQUFLNEQsWUFRcEIsRUFsREEsQ0FBMEIsVSwyVUNGMUIsY0FLSSxXQUFZTCxFQUFrQmdCLEdBQTlCLE1BQ0ksWUFBTWhCLElBQVEsS0FFZCxHQURBLEVBQUtnQixPQUFTQSxHQUNWLEVBQUtBLE9BQU9ELFNBSVosTUFBTSxJQUFJRSxNQUFNLGtFLE9BSGhCLEVBQUtELE9BQU9YLFdBQWEsRUFPN0IsRUFBS2pELEVBQUksRUFBSzRELE9BQU81RCxFQUNyQixFQUFLQyxFQUFJLEVBQUsyRCxPQUFPM0QsRSxFQWdCN0IsT0FqQ3lDLE9Bb0JyQyxZQUFBOEMsTUFBQSxTQUFNZSxLQUVOLFlBQUFaLFFBQUEsU0FBUUMsS0FFUixZQUFBTSxVQUFBLFNBQVVDLEtBRVYsWUFBQUssVUFBQSxTQUFVTCxVQUNDckUsS0FBS3VFLE9BQU9YLFdBQ25CNUQsS0FBSzJFLFdBS2IsRUFqQ0EsQ0FBeUMsVSwyVUNDekMsY0FLSSxXQUFZcEIsRUFBa0JnQixFQUFjSyxHQUE1QyxNQUNJLFlBQU1yQixFQUFTZ0IsSUFBTyxLLE9BQ3RCLEVBQUtLLE1BQVFBLEUsRUFXckIsT0FsQjJCLE9BVXZCLFlBQUFsQixNQUFBLFNBQU1DLEtBR04sWUFBQWUsVUFBQSxTQUFVTCxLQUtkLEVBbEJBLENBQTJCUSxHLDJVQ0QzQiwyQiwrQ0FpQkEsT0FqQjBCLE9BS3RCLFlBQUFuQixNQUFBLFNBQU1DLEtBR04sWUFBQWUsVUFBQSxTQUFVTCxLQUlWLFlBQUFELFVBQUEsU0FBVUMsS0FLZCxFQWpCQSxDQUEwQlEsRyxrVkNHMUIsY0FrQkksbUJBQ0ksY0FBTyxLLE9BRVAsRUFBS0MsY0FBZ0IsSUFBSSxZQUN6QixFQUFLQyxTQUFTLEVBQUtELGVBRW5CLEVBQUtFLG9CQUFzQixJQUFJLFlBQy9CLEVBQUtELFNBQVMsRUFBS0MscUJBRW5CLEVBQUtDLGdCQUFrQixJQUFJLFlBQzNCLEVBQUtGLFNBQVMsRUFBS0UsaUJBRW5CLEVBQUtDLFFBQVUsRyxFQStMdkIsT0E3TjhCLE9Ba0MxQixZQUFBQyxxQkFBQSxTQUFxQkMsRUFBZ0JySCxHQUNqQyxJQUFtQixVQUFBcUgsRUFBVUMsV0FBVixlQUFzQixDQUFwQyxJQUFNQyxFQUFJLEtBQ1gsR0FBSUEsRUFBS3ZILE1BQVFBLEVBQ2IsT0FBT3VILEVBQUs3RyxRQU9qQixFQUFBOEcsUUFBUCxTQUFlQyxFQUFpQkMsRUFBK0JDLEdBRTNELElBQU01RSxFQUFNLElBQUk2RSxFQUdaL0QsRUFBc0IsSUFBSSxRQUFNK0QsRUFBU0MsU0FBVUQsRUFBU0MsVUFDaEU5RSxFQUFJa0MsZUFBaUJ5QyxFQUFZN0YsVUFBWWdDLEVBQWFqQixFQUMxREcsRUFBSW9DLGdCQUFrQnVDLEVBQVk1RixXQUFhK0IsRUFBYWhCLEVBQzVERSxFQUFJMkUsWUFBY0EsRUFHbEIsVUFBVUQsRUFBUyxJQUFJLFNBQVVLLEdBRzdCLElBQWlCLFVBQUFBLEVBQVFDLE9BQVIsZUFBZ0IsQ0FDN0IsR0FBZSxjQURSQyxFQUFFLE1BQ0ZDLEtBQXFCLENBRXhCbEYsRUFBSW1GLFVBQVlGLEVBQUc5QyxNQUNuQm5DLEVBQUlvRixXQUFhSCxFQUFHNUMsT0FHcEJyQyxFQUFJcUYsTUFBUSxJQUFJQyxNQUFNdEYsRUFBSW9GLFlBQzFCLElBQUksSUFBSTFJLEVBQUUsRUFBR0EsRUFBRXNELEVBQUlxRixNQUFNRSxPQUFRN0ksSUFDN0JzRCxFQUFJcUYsTUFBTTNJLEdBQUssSUFBSTRJLE1BQU10RixFQUFJbUYsV0FJakMsSUFBSyxJQUFJMUYsRUFBTSxFQUFHQSxFQUFNd0YsRUFBRzVDLE9BQVE1QyxJQUMvQixJQUFLLElBQUlHLEVBQVMsRUFBR0EsRUFBU3FGLEVBQUc5QyxNQUFPdkMsSUFBVSxDQUM5QyxJQUFJNEYsRUFBUS9GLEVBQU13RixFQUFHOUMsTUFBUXZDLEVBQzdCLEdBQUlxRixFQUFHUSxLQUFLRCxHQUFTLEVBQUcsQ0FDcEIsSUFBSS9DLEVBQVVrQyxFQUFZcEYsV0FBVzBGLEVBQUdRLEtBQUtELElBQ3ZDRSxFQUFVLElBQUlDLEVBQUtsRCxFQUFTaEQsRUFBS0csRUFBT0ksR0FDOUNBLEVBQUk0RixRQUFRRixNQVNoQyxJQUFpQixVQUFBWCxFQUFRQyxPQUFSLGVBQWdCLENBQTVCLElBQU1DLEVBRVAsR0FBZSxnQkFGUkEsRUFBRSxNQUVGQyxLQUF1QixDQUkxQixJQUFpQixVQUFBRCxFQUFHWSxRQUFILGVBQVksQ0FZekIsR0FBZSxXQVpSQyxFQUFFLE1BWUZaLEtBQWtCLENBQ3JCLElBQUlyRixFQUFJSCxLQUFLNkMsTUFBTXVELEVBQUdqRyxFQUFJaUIsRUFBYWpCLEdBQ25DQyxHQUFLSixLQUFLNkMsTUFBTXVELEVBQUdoRyxHQUFLZ0csRUFBR3pELFFBQVV2QixFQUFhaEIsRUFDaERHLEVBQW1CRCxFQUFJcUUscUJBQXFCeUIsRUFBSSxZQUNoREMsRUFBWSxJQUFJLEVBQU9sRyxFQUFHQyxFQUFHWixLQUFNZSxHQUN6Q0QsRUFBSWdHLFVBQVVELElBT3RCLElBQWlCLFVBQUFkLEVBQUdZLFFBQUgsZUFBWSxDQUF4QixJQUFNQyxFQWFQLEdBQWUsVUFiUkEsRUFBRSxNQWFGWixLQUFpQixDQUVoQnpDLEVBQVVrQyxFQUFZcEYsV0FBV3VHLEVBQUd0RyxLQUF4QyxJQUNNeUcsRUFBVWpHLEVBQUlxRSxxQkFBcUJ5QixFQUFJLFNBQ3ZDaEMsRUFBUTlELEVBQUlvRSxRQUFRNkIsR0FDcEIsRUFBU2pHLEVBQUlrRyxpQkFBaUJKLEdBQ2hDSyxFQUFXLElBQUlDLEVBQU0zRCxFQUFTLEVBQVFxQixHQUMxQzlELEVBQUlxRyxjQUFjRixRQWNqQixHQUFlLFFBQVhMLEVBQUdaLEtBQWdCLENBQ3BCekMsRUFBVWtDLEVBQVlwRixXQUFXdUcsRUFBR3RHLEtBQXhDLElBQ00sRUFBU1EsRUFBSWtHLGlCQUFpQkosR0FDaENRLEVBQVUsSUFBSUMsRUFBSzlELEVBQVMsR0FDaEN6QyxFQUFJcUcsY0FBY0MsTUFjbEMxQixFQUFTNUUsT0FLakIsWUFBQWdHLFVBQUEsU0FBVVEsR0FFTnRILEtBQUtrRixRQUFRb0MsRUFBT3ZHLFVBQVl1RyxFQUNoQ3RILEtBQUtpRixnQkFBZ0JGLFNBQVN1QyxFQUFPaEcsU0FHekMsWUFBQTZGLGNBQUEsU0FBY3ZELEdBQ1ZBLEVBQVdqQyxNQUFRZ0UsRUFBUy9ELGFBQzVCNUIsS0FBS2lGLGdCQUFnQkYsU0FBU25CLElBR2xDLFlBQUE4QyxRQUFBLFNBQVFhLEdBQ0pBLEVBQUs1RyxFQUFJNEcsRUFBSy9ELE1BQVF4RCxLQUFLeUYsWUFBWTdGLFVBQVkrRixFQUFTL0QsYUFBYWpCLEVBQ3pFNEcsRUFBSzNHLEVBQUkyRyxFQUFLOUQsTUFBUXpELEtBQUt5RixZQUFZNUYsV0FBYThGLEVBQVMvRCxhQUFhaEIsRUFDMUUyRyxFQUFLNUYsTUFBUWdFLEVBQVMvRCxhQUV0QjVCLEtBQUttRyxNQUFNb0IsRUFBSzlELE9BQU84RCxFQUFLL0QsT0FBUytELEVBQ3JDdkgsS0FBSzhFLGNBQWNDLFNBQVN3QyxJQUdoQyxZQUFBQyxNQUFBLFdBQ0l4SCxLQUFLeUgsVUFBVyxHQUdwQixZQUFBdkYsS0FBQSxXQUNJbEMsS0FBS3lILFVBQVcsR0FHcEIsWUFBQUMscUJBQUEsU0FBcUJ0QyxHQUlqQixJQUNJaEMsRUFEWWdDLEVBQVV6RSxFQUFJZ0YsRUFBUy9ELGFBQWFqQixFQUMzQlgsS0FBS2dELGVBQzlCSSxFQUFTNUMsS0FBSzZDLE1BQU1ELEdBRXBCLElBQ0lFLEdBRGE4QixFQUFVeEUsRUFBSXdFLEVBQVVqQyxRQUFVd0MsRUFBUy9ELGFBQWFoQixFQUNoRFosS0FBS2tELGdCQUc5QixNQUFPLENBQUVNLE1BQU9KLEVBQVFLLE1BRnhCSCxFQUFTOUMsS0FBSzZDLE1BQU1DLEtBS3hCLFlBQUEwRCxpQkFBQSxTQUFpQjVCLEdBQ2IsSUFBTXVDLEVBQU0zSCxLQUFLMEgscUJBQXFCdEMsR0FDdEMsT0FBT3BGLEtBQUttRyxNQUFNd0IsRUFBSWxFLE9BQU9rRSxFQUFJbkUsUUF4TjlCLEVBQUFvQyxTQUFXLEVBQ1gsRUFBQWhFLGFBQXNCLElBQUksUUFBTStELEVBQVNDLFNBQVVELEVBQVNDLFVBME52RSxFQTdOQSxDQUE4QixhQ1Q5QiwyQkE0Q0EsT0F2Q1csRUFBQWdDLEtBQVAsV0FDSUMsU0FBU0MsaUJBQWlCLFFBQVNDLEVBQWdCQyxTQUNuREgsU0FBU0MsaUJBQWlCLFVBQVdDLEVBQWdCRSxZQUdsRCxFQUFBRCxRQUFQLFNBQWUxRixHQUNYLElBQUssSUFBTTlFLEtBQUt1SyxFQUFnQkcsT0FBUSxDQUNwQyxJQUFNQyxFQUFVSixFQUFnQkcsT0FBTzFLLEdBQ25DOEUsRUFBTXZELEtBQU9vSixFQUFRcEosS0FDUyxtQkFBbkJvSixFQUFRSCxTQUNmRyxFQUFRSCxRQUFRMUYsS0FNekIsRUFBQTJGLFVBQVAsU0FBaUIzRixHQUNiLElBQUssSUFBTTlFLEtBQUt1SyxFQUFnQkssU0FBVSxDQUN0QyxJQUFNRCxFQUFVSixFQUFnQkssU0FBUzVLLEdBQ3JDOEUsRUFBTXZELEtBQU9vSixFQUFRcEosS0FDVyxtQkFBckJvSixFQUFRRixXQUNmRSxFQUFRRixVQUFVM0YsS0FNM0IsRUFBQStGLFlBQVAsU0FBbUJ0SixFQUFLa0osRUFBV0QsRUFBU00sR0FDeENQLEVBQWdCSyxTQUFTRSxHQUFjLENBQUV2SixJQUFLQSxFQUFLa0osVUFBV0EsR0FDOURGLEVBQWdCRyxPQUFPSSxHQUFjLENBQUV2SixJQUFLQSxFQUFLaUosUUFBU0EsSUFHdkQsRUFBQU8sY0FBUCxTQUFxQkQsVUFDVlAsRUFBZ0JLLFNBQVNFLFVBQ3pCUCxFQUFnQkcsT0FBT0ksSUFyQzNCLEVBQUFKLE9BQVMsR0FDVCxFQUFBRSxTQUFXLEdBeUN0QixFQTVDQSxHQ0FBLDJCQTRCQSxPQXZCVyxFQUFBSSxTQUFQLFNBQWdCQyxFQUFZL0MsRUFBb0JnRCxHQUM1Q0MsRUFBZ0JDLFFBQVFILEdBQU0sQ0FDMUIvQyxTQUFVQSxFQUNWZ0QsT0FBUUEsSUFJVCxFQUFBRyxXQUFQLFNBQWtCSixVQUNQRSxFQUFnQkMsUUFBUUgsSUFHNUIsRUFBQTdGLE9BQVAsU0FBY0MsR0FDVixJQUFLOEYsRUFBZ0JsQixTQUNqQixJQUFLLElBQUlqSyxLQUFLbUwsRUFBZ0JDLFFBQVMsRUFHbkNFLEVBRnNCSCxFQUFnQkMsUUFBUXBMLEdBQUdrSSxVQUNwQ2lELEVBQWdCQyxRQUFRcEwsR0FBR2tMLE9BQ2hCN0YsS0FuQjdCLEVBQUErRixRQUFrQixHQUNsQixFQUFBbkIsVUFBb0IsRUF5Qi9CLEVBNUJBLEdDTU1zQixFQUFjLElBQUksRUFBaUIsOEJBQStCLEVBQUcsR0FBSSxHQUFJLEdBQUksS0FNdkYseUJBcUNBLE9BN0JXLEVBQUFDLFVBQVAsV0FHSSxJQUdNQyxFQUFjLElBRmhCLFNBQW1CaEcsRUFBYUUsRUFBYytGLEdBQTNCLEtBQUFqRyxRQUFhLEtBQUFFLFNBQWMsS0FBQStGLE9BRTlCLENBakJWLElBQ0MsSUFnQjhDQyxFQUFZQyxVQUVyRUQsRUFBWUUsUUFBVSxJQUFJLGNBQVlKLEdBSXRDcEIsU0FBU3lCLEtBQUtDLFlBQVlKLEVBQVlFLFFBQVFILE1BRzlDbkIsRUFBZ0JILE9BR2hCdUIsRUFBWUUsUUFBUUcsT0FBT0MsSUFBSWQsRUFBZ0IvRixRQUcvQyxFQUFTMkMsUUFBUSxzQkFBc0J3RCxHQUFZLFNBQVNXLEdBQ3hEeEYsUUFBUUMsSUFBSSxjQUNaZ0YsRUFBWXJJLElBQU00SSxFQUNsQlAsRUFBWUUsUUFBUU0sTUFBTTVFLFNBQVMyRSxHQUNuQ1AsRUFBWUUsUUFBUUcsT0FBT0ksWUE3QjVCLEVBQUFSLFNBQVd2QixTQUFTZ0MsZUFBZSxlQWlDOUMsR0FyQ0EsR0NWWWIiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBQSVhJOyIsIm1vZHVsZS5leHBvcnRzID0gJDsiLCJpbXBvcnQgeyBUZXh0dXJlLCBTQ0FMRV9NT0RFUywgUmVjdGFuZ2xlIH0gZnJvbSBcInBpeGkuanNcIjtcblxuZXhwb3J0IGNsYXNzIFRpbGVkU3ByaXRlc2hlZXR7XG5cblx0cGF0aDogc3RyaW5nO1xuXHRib3JkZXI6IG51bWJlcjtcblx0dGlsZUhlaWdodDogbnVtYmVyO1xuXHR0aWxlV2lkdGg6IG51bWJlcjtcblx0cm93czogbnVtYmVyO1xuXHRjb2x1bW5zOiBudW1iZXI7XG5cdGJpZ1RleHR1cmU6IFRleHR1cmU7XG5cdHRleHR1cmVzOiBUZXh0dXJlW107XG5cblx0Y29uc3RydWN0b3IocGF0aCxib3JkZXIsdGlsZVdpZHRoLHRpbGVIZWlnaHQscm93cyxjb2x1bW5zKXtcblx0XHR0aGlzLnBhdGggPSBwYXRoO1xuXHRcdHRoaXMuYm9yZGVyID0gYm9yZGVyO1xuXHRcdHRoaXMudGlsZUhlaWdodCA9IHRpbGVIZWlnaHQ7XG5cdFx0dGhpcy50aWxlV2lkdGggPSB0aWxlV2lkdGg7XG5cdFx0dGhpcy5yb3dzID0gcm93cztcblx0XHR0aGlzLmNvbHVtbnMgPSBjb2x1bW5zO1xuXHRcdHRoaXMuYmlnVGV4dHVyZSA9IFRleHR1cmUuZnJvbUltYWdlKHBhdGgsIHRydWUsIFNDQUxFX01PREVTLk5FQVJFU1QpO1xuXHRcdHRoaXMudGV4dHVyZXMgPSBbXTtcblx0fVxuXG5cdGdldFRleHR1cmUoZ2lkKTpUZXh0dXJlICB7XG5cdFx0Ly9DaGVjayB3ZXRoZXIgdGV4dHVyZXMgd2FzIGFsbHJlYWR5IGZyYW1lZCBmb3JtIHNwcml0ZXNoZWV0XG5cdFx0aWYgKHRoaXMudGV4dHVyZXNbZ2lkXSkge1xuXHRcdCAgcmV0dXJuIHRoaXMudGV4dHVyZXNbZ2lkXTtcblx0XHR9IGVsc2Uge1xuXHRcdCAgLy9DYWxjdWxhdGUgcm93IGFuZCBjb2x1bW4gZnJvbSBnaWRcblx0XHQgIGxldCByb3c6bnVtYmVyID0gTWF0aC5mbG9vcigoZ2lkIC0gMSkgLyB0aGlzLmNvbHVtbnMpO1xuXHRcdCAgbGV0IGNvbHVtbjpudW1iZXIgPSAoZ2lkIC0gMSkgJSB0aGlzLmNvbHVtbnM7XG5cdFxuXHRcdCAgbGV0IHRpbGVXaWR0aDpudW1iZXIgPSB0aGlzLnRpbGVXaWR0aDtcblx0XHQgIGxldCB0aWxlSGVpZ2h0Om51bWJlciA9IHRoaXMudGlsZUhlaWdodDtcblx0XG5cdFx0ICBsZXQgeDpudW1iZXIgPSBjb2x1bW4gKiB0aWxlV2lkdGggKyBjb2x1bW4gKiB0aGlzLmJvcmRlcjtcblx0XHQgIGxldCB5Om51bWJlciA9IHJvdyAqIHRpbGVIZWlnaHQgKyByb3cgKiB0aGlzLmJvcmRlcjtcblx0XG5cdFx0ICBsZXQgdDpUZXh0dXJlID0gbmV3IFRleHR1cmUodGhpcy5iaWdUZXh0dXJlLmJhc2VUZXh0dXJlLCBuZXcgUmVjdGFuZ2xlKHgsIHksIHRpbGVXaWR0aCwgdGlsZUhlaWdodCkpO1xuXHRcdCAgLy9TYXZlIFRleHR1cmUgaW4gY2FjaGUgYXJyYXlcblx0XHQgIHRoaXMudGV4dHVyZXNbZ2lkXSA9IHQ7XG5cdFx0ICByZXR1cm4gdDtcblx0XHR9XG5cdCAgfVxuXHRcblxufSIsImltcG9ydCB7IFRpbGVkTWFwIH0gZnJvbSBcIi4vVGlsZWRNYXBcIjtcbmltcG9ydCB7IFBvaW50LCBleHRyYXMsIFRleHR1cmUsIEJhc2VUZXh0dXJlLCBSZWN0YW5nbGUgfSBmcm9tIFwicGl4aS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUGxheWVyIHtcblxuXG4gICAgc3RhdGljIFVQOiBudW1iZXIgPSAwO1xuICAgIHN0YXRpYyBSSUdIVDogbnVtYmVyID0gMTtcbiAgICBzdGF0aWMgRE9XTjogbnVtYmVyID0gMjtcbiAgICBzdGF0aWMgTEVGVDogbnVtYmVyID0gMztcbiAgICBzdGF0aWMgU1RPUDogbnVtYmVyID0gNDtcblxuICAgIHN0YXRpYyBTUFJJVEVfV0lEVEg6IG51bWJlciA9IDk2IC8gMztcbiAgICBzdGF0aWMgU1BSSVRFX0hFSUdIVDogbnVtYmVyID0gMTQ0IC8gNDtcbiAgICBzdGF0aWMgU1BSSVRFX1NDQUxFOiBQb2ludCA9IG5ldyBQb2ludCgxLjUsIDEuNSk7XG4gICAgc3RhdGljIFBMQVlFUl9TUEVFRCA9IDM7XG5cblxuICAgIHNwcml0ZTogZXh0cmFzLkFuaW1hdGVkU3ByaXRlO1xuICAgIHZ4OiBudW1iZXI7XG4gICAgdnk6IG51bWJlcjtcbiAgICBhbmltYXRpb25zOiBUZXh0dXJlW11bXTtcbiAgICBtYXA6IFRpbGVkTWFwO1xuICAgIGxhc3RLZXk6IHN0cmluZztcbiAgICBwbGF5ZXJJZDpudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgbWFwOiBUaWxlZE1hcCxwbGF5ZXJJZDpudW1iZXIpIHtcbiAgICAgICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgICAgIHRoaXMucGxheWVySWQgPSBwbGF5ZXJJZDtcbiAgICAgICAgdGhpcy5hbmltYXRpb25zID0gW107XG4gICAgICAgIGxldCBiYXNlVGV4dHVyZTogQmFzZVRleHR1cmUgPSBUZXh0dXJlLmZyb21JbWFnZShgZGF0YS9hc3NldHMvcGxheWVyXyR7cGxheWVySWR9LnBuZ2ApLmJhc2VUZXh0dXJlO1xuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCA0OyByb3crKykge1xuICAgICAgICAgICAgbGV0IHRleHR1cmVBcnJheTogVGV4dHVyZVtdID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCAzOyBjb2x1bW4rKykge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gbmV3IFRleHR1cmUoYmFzZVRleHR1cmUsIG5ldyBSZWN0YW5nbGUoY29sdW1uICogUGxheWVyLlNQUklURV9XSURUSCwgcm93ICogUGxheWVyLlNQUklURV9IRUlHSFQsIFBsYXllci5TUFJJVEVfV0lEVEgsIFBsYXllci5TUFJJVEVfSEVJR0hUKSk7XG4gICAgICAgICAgICAgICAgdGV4dHVyZUFycmF5LnB1c2godCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnMucHVzaCh0ZXh0dXJlQXJyYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zcHJpdGUgPSBuZXcgZXh0cmFzLkFuaW1hdGVkU3ByaXRlKHRoaXMuYW5pbWF0aW9uc1tQbGF5ZXIuRE9XTl0pO1xuICAgICAgICB0aGlzLnNwcml0ZS54ID0geDtcbiAgICAgICAgdGhpcy5zcHJpdGUueSA9IHk7XG4gICAgICAgIHRoaXMudnggPSAwO1xuICAgICAgICB0aGlzLnZ5ID0gMDtcbiAgICAgICAgdGhpcy5zcHJpdGUuc2NhbGUgPSBQbGF5ZXIuU1BSSVRFX1NDQUxFO1xuICAgICAgICB0aGlzLnNwcml0ZS5hbmltYXRpb25TcGVlZCA9IDAuMTM7XG4gICAgICAgIHRoaXMuc3ByaXRlLmxvb3AgPSB0cnVlO1xuICAgICAgICB0aGlzLmxhc3RLZXkgPSBcIlwiO1xuXG4gICAgfVxuXG4gICAgY2hhbmdlRGlyZWN0aW9uKGRpcmVjdGlvbjogbnVtYmVyKSB7XG4gICAgICAgIGlmICgwIDw9IGRpcmVjdGlvbiAmJiBkaXJlY3Rpb24gPD0gMykge1xuICAgICAgICAgICAgdGhpcy5zcHJpdGUudGV4dHVyZXMgPSB0aGlzLmFuaW1hdGlvbnNbZGlyZWN0aW9uXTtcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT0gUGxheWVyLlNUT1ApIHtcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnN0b3AoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGtleURvd24oZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSAhPSB0aGlzLmxhc3RLZXkpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdEtleSA9IGV2ZW50LmtleTtcbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkFycm93VXBcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52eSA9IC0xICogUGxheWVyLlBMQVlFUl9TUEVFRDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXJlY3Rpb24oUGxheWVyLlVQKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkFycm93RG93blwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZ5ID0gMSAqIFBsYXllci5QTEFZRVJfU1BFRUQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGlyZWN0aW9uKFBsYXllci5ET1dOKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZ4ID0gLTEgKiBQbGF5ZXIuUExBWUVSX1NQRUVEO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURpcmVjdGlvbihQbGF5ZXIuTEVGVCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudnggPSAxICogUGxheWVyLlBMQVlFUl9TUEVFRDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXJlY3Rpb24oUGxheWVyLlJJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGtleVVwKGV2ZW50KSB7XG4gICAgICAgIHRoaXMubGFzdEtleSA9IFwiXCI7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dVcFwiOlxuICAgICAgICAgICAgICAgIHRoaXMudnkgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGlyZWN0aW9uKFBsYXllci5TVE9QKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgICAgICAgICAgICB0aGlzLnZ5ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURpcmVjdGlvbihQbGF5ZXIuU1RPUCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XG4gICAgICAgICAgICAgICAgdGhpcy52eCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXJlY3Rpb24oUGxheWVyLlNUT1ApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnZ4ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURpcmVjdGlvbihQbGF5ZXIuU1RPUCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGRvU3RlcChkZWx0YSkge1xuXG4gICAgICAgIGxldCBuZXdYID0gdGhpcy5zcHJpdGUueCArIHRoaXMudnggKiBkZWx0YTtcbiAgICAgICAgbGV0IG5ld1kgPSB0aGlzLnNwcml0ZS55ICsgdGhpcy52eSAqIGRlbHRhO1xuXG4gICAgICAgIGxldCB4UmFuZ2UgPSB7XG4gICAgICAgICAgICBmcm9tOiBNYXRoLmZsb29yKG5ld1ggLyB0aGlzLm1hcC5maW5hbFRpbGVXaWR0aCksXG4gICAgICAgICAgICB0bzogTWF0aC5mbG9vcigobmV3WCArIHRoaXMuc3ByaXRlLndpZHRoKSAvIHRoaXMubWFwLmZpbmFsVGlsZVdpZHRoKVxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCB5UmFuZ2UgPSB7XG4gICAgICAgICAgICBmcm9tOiBNYXRoLmZsb29yKG5ld1kgLyB0aGlzLm1hcC5maW5hbFRpbGVIZWlnaHQpLFxuICAgICAgICAgICAgdG86IE1hdGguZmxvb3IoKG5ld1kgKyB0aGlzLnNwcml0ZS5oZWlnaHQpIC8gdGhpcy5tYXAuZmluYWxUaWxlSGVpZ2h0KVxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBibG9ja2VkID0gZmFsc2U7XG5cbiAgICAgICAgLypcbiAgICAgICAgZm9yIChsZXQgeCA9IHhSYW5nZS5mcm9tOyB4IDw9IHhSYW5nZS50bzsgeCsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB5ID0geVJhbmdlLmZyb207IHkgPD0geVJhbmdlLnRvOyB5KyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXAuY29sbGlzaW9uQml0TWFwW3ldID09IHVuZGVmaW5lZCB8fCB0aGlzLm1hcC5jb2xsaXNpb25CaXRNYXBbeV1beF0gPT0gdW5kZWZpbmVkIHx8IHRoaXMubWFwLmNvbGxpc2lvbkJpdE1hcFt5XVt4XSA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSovXG5cblxuICAgICAgICBpZiAoYmxvY2tlZCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5zcHJpdGUueCA9IG5ld1g7XG4gICAgICAgICAgICB0aGlzLnNwcml0ZS55ID0gbmV3WTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy9DaGVjayBmb3IgZXZlbnRcbiAgICAgICAgbGV0IG9yaWdpbmFsWCA9IHRoaXMuc3ByaXRlLng7XG4gICAgICAgIGxldCB4VGlsZXMgPSBvcmlnaW5hbFggLyB0aGlzLm1hcC5maW5hbFRpbGVXaWR0aDtcbiAgICAgICAgeFRpbGVzID0gTWF0aC5yb3VuZCh4VGlsZXMpO1xuXG4gICAgICAgIGxldCBvcmlnaW5hbFkgPSB0aGlzLnNwcml0ZS55O1xuICAgICAgICBsZXQgeVRpbGVzID0gb3JpZ2luYWxZIC8gdGhpcy5tYXAuZmluYWxUaWxlSGVpZ2h0O1xuICAgICAgICB5VGlsZXMgPSBNYXRoLnJvdW5kKHlUaWxlcyk7XG5cbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBUaWxlT2JqZWN0IH0gZnJvbSBcIi4vVGlsZU9iamVjdFwiO1xuaW1wb3J0IHsgVGlsZWRNYXAgfSBmcm9tIFwiLi9UaWxlZE1hcFwiO1xuaW1wb3J0IHsgSGl0RXZlbnQgfSBmcm9tIFwiLi9IaXRFdmVudFwiO1xuaW1wb3J0IHsgUGxhbnQgfSBmcm9tIFwiLi9QbGFudFwiO1xuaW1wb3J0IHsgVG50UHVtcGtpbiB9IGZyb20gXCIuL1RudFB1bXBraW5cIjtcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL1BsYXllclwiO1xuaW1wb3J0IHsgU3ByaXRlLCBUZXh0dXJlIH0gZnJvbSBcInBpeGkuanNcIjtcblxuZXhwb3J0IGNsYXNzIFRpbGUgZXh0ZW5kcyBTcHJpdGUge1xuXG4gICAgZ3JpZFg6IG51bWJlcjtcbiAgICBncmlkWTogbnVtYmVyO1xuICAgIHRpbGVPYmplY3Q6IFRpbGVPYmplY3Q7XG4gICAgbWFwOiBUaWxlZE1hcDtcblxuICAgIGNvbnN0cnVjdG9yKHRleHR1cmU6IFRleHR1cmUsIGdyaWRYOiBudW1iZXIsIGdyaWRZOiBudW1iZXIsIG1hcDpUaWxlZE1hcCkge1xuICAgICAgICBzdXBlcih0ZXh0dXJlKTtcbiAgICAgICAgdGhpcy5ncmlkWCA9IGdyaWRYO1xuICAgICAgICB0aGlzLmdyaWRZID0gZ3JpZFk7XG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgICAgICAvL2NhbGN1bGF0ZSBvd24gcmVuZGVyIGNvb3JkaW5hdGVzXG4gICAgICAgIHRoaXMueCA9IGdyaWRYICogbWFwLmZpbmFsVGlsZVdpZHRoO1xuICAgICAgICB0aGlzLnkgPSBncmlkWSAqIG1hcC5maW5hbFRpbGVIZWlnaHQ7XG4gICAgfVxuXG4gICAgb25IaXQoaGl0RXZlbnQ6IEhpdEV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRpbGVPYmplY3QpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZU9iamVjdC5vbkhpdChoaXRFdmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblBsYW50KHBsYW50OiBQbGFudCkge1xuICAgICAgICBpZiAodGhpcy50aWxlT2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVPYmplY3Qub25QbGFudChwbGFudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblBsYWNlKHB1bXBraW46IFRudFB1bXBraW4pIHtcbiAgICAgICAgaWYgKHRoaXMudGlsZU9iamVjdCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGxhY2luZyBQdW1wa2luIFROVFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uSGFydmVzdChpbml0aWF0b3I6IFBsYXllcikge1xuICAgICAgICBpZiAodGhpcy50aWxlT2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVPYmplY3Qub25IYXJ2ZXN0KGluaXRpYXRvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc0ZyZWUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZU9iamVjdCA/IGZhbHNlIDogdHJ1ZTtcbiAgICB9XG5cblxuXG5cblxuXG59IiwiaW1wb3J0IHsgVGlsZSB9IGZyb20gXCIuL1RpbGVcIjtcbmltcG9ydCB7IEhpdEV2ZW50IH0gZnJvbSBcIi4vSGl0RXZlbnRcIjtcbmltcG9ydCB7IFBsYW50IH0gZnJvbSBcIi4vUGxhbnRcIjtcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL1BsYXllclwiO1xuaW1wb3J0IHsgU3ByaXRlLCBUZXh0dXJlIH0gZnJvbSBcInBpeGkuanNcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRpbGVPYmplY3QgZXh0ZW5kcyBTcHJpdGUge1xuXG4gICAgcGFyZW50OiBUaWxlO1xuICAgIHNvbGlkOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IodGV4dHVyZTogVGV4dHVyZSwgcGFyZW50OiBUaWxlKSB7XG4gICAgICAgIHN1cGVyKHRleHR1cmUpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRnJlZSgpKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50aWxlT2JqZWN0ID0gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGFkZCBUaWxlT2JqZWN0IHRvIGEgVGlsZSB0aGF0IGFsbHJlYWR5IGhhcyBhbiBUaWxlT2JqZWN0XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9zZXQgcmVuZGVyIGNvb3JkaW5hdGVzXG4gICAgICAgIHRoaXMueCA9IHRoaXMucGFyZW50Lng7XG4gICAgICAgIHRoaXMueSA9IHRoaXMucGFyZW50Lnk7XG4gICAgfVxuXG4gICAgb25IaXQoaGl0ZXZlbnQ6IEhpdEV2ZW50KSB7IH07XG5cbiAgICBvblBsYW50KHBsYW50OiBQbGFudCkgeyB9O1xuXG4gICAgb25IYXJ2ZXN0KGluaXRpYXRvcjogUGxheWVyKSB7IH07XG5cbiAgICBvbkRlc3Ryb3koaW5pdGlhdG9yOiBQbGF5ZXIpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMucGFyZW50LnRpbGVPYmplY3Q7XG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgIH07XG5cblxuXG59IiwiaW1wb3J0IHsgVGlsZU9iamVjdCB9IGZyb20gXCIuL1RpbGVPYmplY3RcIjtcbmltcG9ydCB7IFN0YXR1c0JhciB9IGZyb20gXCIuL1N0YXR1c0JhclwiO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vUGxheWVyXCI7XG5pbXBvcnQgeyBUaWxlIH0gZnJvbSBcIi4vVGlsZVwiO1xuaW1wb3J0IHsgSGl0RXZlbnQgfSBmcm9tIFwiLi9IaXRFdmVudFwiO1xuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gXCJwaXhpLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBUb3dlciBleHRlbmRzIFRpbGVPYmplY3Qge1xuXG4gICAgb3duZXI6IFBsYXllcjtcbiAgICBzdGF0dXNCYXI6IFN0YXR1c0JhcjtcblxuICAgIGNvbnN0cnVjdG9yKHRleHR1cmU6IFRleHR1cmUsIHBhcmVudDogVGlsZSwgb3duZXI6IFBsYXllcikge1xuICAgICAgICBzdXBlcih0ZXh0dXJlLCBwYXJlbnQpO1xuICAgICAgICB0aGlzLm93bmVyID0gb3duZXI7XG4gICAgfVxuXG4gICAgb25IaXQoaGl0RXZlbnQ6IEhpdEV2ZW50KSB7XG4gICAgfTtcblxuICAgIG9uRGVzdHJveShpbml0aWF0b3I6IFBsYXllcikge1xuXG4gICAgfVxuXG5cbn0iLCJpbXBvcnQgeyBUaWxlT2JqZWN0IH0gZnJvbSBcIi4vVGlsZU9iamVjdFwiO1xuaW1wb3J0IHsgU3RhdHVzQmFyIH0gZnJvbSBcIi4vU3RhdHVzQmFyXCI7XG5pbXBvcnQgeyBUaWxlIH0gZnJvbSBcIi4vVGlsZVwiO1xuaW1wb3J0IHsgSGl0RXZlbnQgfSBmcm9tIFwiLi9IaXRFdmVudFwiO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vUGxheWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBUcmVlIGV4dGVuZHMgVGlsZU9iamVjdCB7XG5cbiAgICBcbiAgICBzdGF0dXNCYXI6IFN0YXR1c0JhcjtcblxuICAgIG9uSGl0KGhpdEV2ZW50OiBIaXRFdmVudCkge1xuICAgIH07XG5cbiAgICBvbkRlc3Ryb3koaW5pdGlhdG9yOiBQbGF5ZXIpIHtcblxuICAgIH1cblxuICAgIG9uSGFydmVzdChpbml0aWF0b3I6UGxheWVyKXtcblxuICAgIH1cblxuXG59IiwiaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vUGxheWVyXCI7XG5pbXBvcnQgeyBUaWxlZFNwcml0ZXNoZWV0IH0gZnJvbSBcIi4vVGlsZWRTcHJpdGVzaGVldFwiO1xuaW1wb3J0IHsgVGlsZSB9IGZyb20gXCIuL1RpbGVcIjtcbmltcG9ydCB7IFRvd2VyIH0gZnJvbSBcIi4vVG93ZXJcIjtcbmltcG9ydCB7IFRyZWUgfSBmcm9tIFwiLi9UcmVlXCI7XG5pbXBvcnQgeyBUaWxlT2JqZWN0IH0gZnJvbSBcIi4vVGlsZU9iamVjdFwiO1xuaW1wb3J0IHsgQ29udGFpbmVyLCBQb2ludCwgUmVjdGFuZ2xlIH0gZnJvbSBcInBpeGkuanNcIjtcbmltcG9ydCAqIGFzICQgZnJvbSBcImpxdWVyeVwiO1xuXG5leHBvcnQgY2xhc3MgVGlsZWRNYXAgZXh0ZW5kcyBDb250YWluZXIge1xuXG4gICAgc3RhdGljIE1BUF9aT09NID0gNDtcbiAgICBzdGF0aWMgU1BSSVRFX1NDQUxFOiBQb2ludCA9IG5ldyBQb2ludChUaWxlZE1hcC5NQVBfWk9PTSwgVGlsZWRNYXAuTUFQX1pPT00pO1xuXG4gICAgcGxheWVyczogUGxheWVyW107XG4gICAgc3ByaXRlc2hlZXQ6IFRpbGVkU3ByaXRlc2hlZXQ7XG4gICAgaXNQYXVzZWQ6IGJvb2xlYW47XG4gICAgZmluYWxUaWxlV2lkdGg6IG51bWJlcjtcbiAgICBmaW5hbFRpbGVIZWlnaHQ6IG51bWJlcjtcbiAgICB0aWxlczogVGlsZVtdW107XG4gICAgZ3JpZFdpZHRoOiBudW1iZXI7XG4gICAgZ3JpZEhlaWdodDogbnVtYmVyO1xuICAgIHRpbGVDb250YWluZXI6IENvbnRhaW5lcjtcbiAgICBwbGF5ZXJDb250YWluZXI6IENvbnRhaW5lcjtcbiAgICB0aWxlT2JqZWN0Q29udGFpbmVyOiBDb250YWluZXI7XG5cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMudGlsZUNvbnRhaW5lciA9IG5ldyBDb250YWluZXIoKTtcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLnRpbGVDb250YWluZXIpO1xuXG4gICAgICAgIHRoaXMudGlsZU9iamVjdENvbnRhaW5lciA9IG5ldyBDb250YWluZXIoKTtcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLnRpbGVPYmplY3RDb250YWluZXIpO1xuXG4gICAgICAgIHRoaXMucGxheWVyQ29udGFpbmVyID0gbmV3IENvbnRhaW5lcigpO1xuICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMucGxheWVyQ29udGFpbmVyKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucGxheWVycyA9IFtdO1xuICAgIH1cblxuXG4gICAgZ2V0TWFwT2JqZWN0UHJvcGVydHkobWFwT2JqZWN0OiBhbnksIG5hbWU6IHN0cmluZykge1xuICAgICAgICBmb3IgKGNvbnN0IHByb3Agb2YgbWFwT2JqZWN0LnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wLm5hbWUgPT0gbmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvL0xvYWRzIHRoZSBtYXAgd2l0aCBzcHJpdGVzaGVldC4gTGFzdCBwYXJhbWV0ZXIgaXMgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggaXMgY2FsbGVkIGFmdGVyIHBhcnNpbmcgdGhlIG1hcCB3aXRoIHRoZSBuZXcgcGFyc2VkIG1hcCBhcyBwYXJhbWV0ZXJcbiAgICBzdGF0aWMgbG9hZE1hcChtYXBQYXRoOiBzdHJpbmcsIHNwcml0ZXNoZWV0OiBUaWxlZFNwcml0ZXNoZWV0LCBjYWxsYmFjazogRnVuY3Rpb24pIHtcblxuICAgICAgICBjb25zdCBtYXAgPSBuZXcgVGlsZWRNYXAoKTtcblxuICAgICAgICAvL0xvYWQgU3ByaXRlc2hlZXRcbiAgICAgICAgbGV0IFNQUklURV9TQ0FMRTogUG9pbnQgPSBuZXcgUG9pbnQoVGlsZWRNYXAuTUFQX1pPT00sIFRpbGVkTWFwLk1BUF9aT09NKTtcbiAgICAgICAgbWFwLmZpbmFsVGlsZVdpZHRoID0gc3ByaXRlc2hlZXQudGlsZVdpZHRoICogU1BSSVRFX1NDQUxFLng7XG4gICAgICAgIG1hcC5maW5hbFRpbGVIZWlnaHQgPSBzcHJpdGVzaGVldC50aWxlSGVpZ2h0ICogU1BSSVRFX1NDQUxFLnk7XG4gICAgICAgIG1hcC5zcHJpdGVzaGVldCA9IHNwcml0ZXNoZWV0O1xuXG4gICAgICAgIC8vTG9hZCBNYXAgYW5kIFBhcnNlIGl0XG4gICAgICAgICQuZ2V0SlNPTihtYXBQYXRoLCB7fSwgZnVuY3Rpb24gKG1hcERhdGEpIHtcblxuICAgICAgICAgICAgLy9CdWlsZCBhbGwgVGlsZUxheWVycyBmaXJzdFxuICAgICAgICAgICAgZm9yIChjb25zdCB0bCBvZiBtYXBEYXRhLmxheWVycykge1xuICAgICAgICAgICAgICAgIGlmICh0bC50eXBlID09IFwidGlsZWxheWVyXCIpIHtcblxuICAgICAgICAgICAgICAgICAgICBtYXAuZ3JpZFdpZHRoID0gdGwud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIG1hcC5ncmlkSGVpZ2h0ID0gdGwuaGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vSW5pdCBtYXAncyB0aWxlcyBhcnJheVxuICAgICAgICAgICAgICAgICAgICBtYXAudGlsZXMgPSBuZXcgQXJyYXkobWFwLmdyaWRIZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxtYXAudGlsZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnRpbGVzW2ldID0gbmV3IEFycmF5KG1hcC5ncmlkV2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy9HZW5lcmF0ZSBUaWxlcyBmb3IgZWFjaCB0aWxlIHRvIHRoZSBjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGwuaGVpZ2h0OyByb3crKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgdGwud2lkdGg7IGNvbHVtbisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gcm93ICogdGwud2lkdGggKyBjb2x1bW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRsLmRhdGFbaW5kZXhdID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dHVyZSA9IHNwcml0ZXNoZWV0LmdldFRleHR1cmUodGwuZGF0YVtpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdUaWxlID0gbmV3IFRpbGUodGV4dHVyZSwgcm93LCBjb2x1bW4sbWFwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZFRpbGUobmV3VGlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vSXRlcmF0ZSB0aHJvdWdoIE9iamVjdCBMYXllcnNcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGwgb2YgbWFwRGF0YS5sYXllcnMpIHtcblxuICAgICAgICAgICAgICAgIGlmICh0bC50eXBlID09IFwib2JqZWN0Z3JvdXBcIikge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgYWxsIHBsYXllcnMgZmlyc3RcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjbyBvZiB0bC5vYmplY3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgIF9fX19fICBfICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICogICAgIHwgIF9fIFxcfCB8ICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgfCB8X18pIHwgfCBfXyBfIF8gICBfICBfX18gXyBfXyBcbiAgICAgICAgICAgICAgICAgICAgICAgICogICAgIHwgIF9fXy98IHwvIF9gIHwgfCB8IHwvIF8gXFwgJ19ffFxuICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgfCB8ICAgIHwgfCAoX3wgfCB8X3wgfCAgX18vIHwgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICogICAgIHxffCAgICB8X3xcXF9fLF98XFxfXywgfFxcX19ffF98ICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgIF9fLyB8ICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgIHxfX18vICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjby50eXBlID09IFwicGxheWVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IE1hdGgucm91bmQoY28ueCAqIFNQUklURV9TQ0FMRS54KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeSA9IChNYXRoLnJvdW5kKGNvLnkpIC0gY28uaGVpZ2h0KSAqIFNQUklURV9TQ0FMRS55OyAvLyAtY28uaGVpZ2h0IGJlY2F1c2UgdGlsZWQgdXNlcyB0aGUgYm90dG9tLWxlZnQgY29ybmVyIGZvciBjb29yZGluYXRlcyBhbmQgUElYSSB1c2VzIHRoZSB0b3AtbGVmdCBjb3JuZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXJJZDogbnVtYmVyID0gbWFwLmdldE1hcE9iamVjdFByb3BlcnR5KGNvLCBcInBsYXllcklkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BsYXllciA9IG5ldyBQbGF5ZXIoeCwgeSwgdGhpcywgcGxheWVySWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5hZGRQbGF5ZXIobmV3UGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICAgICAgICAgICAgICAvL0dlbmVyYXRlIFNwcml0ZXMgZm9yIGVhY2ggb2JqZWN0IHRvIHRoZSBjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjbyBvZiB0bC5vYmplY3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICBfX19fX19fICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgfF9fICAgX198ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqICAgICAgICB8IHwgX19fX18gICAgICBfX19fXyBfIF9fIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHwgfC8gXyBcXCBcXCAvXFwgLyAvIF8gXFwgJ19ffFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHwgfCAoXykgXFwgViAgViAvICBfXy8gfCAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHxffFxcX19fLyBcXF8vXFxfLyBcXF9fX3xffCAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjby50eXBlID09IFwidG93ZXJcIikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRleHR1cmUgPSBzcHJpdGVzaGVldC5nZXRUZXh0dXJlKGNvLmdpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3duZXJJZCA9IG1hcC5nZXRNYXBPYmplY3RQcm9wZXJ0eShjbywgXCJvd25lclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvd25lciA9IG1hcC5wbGF5ZXJzW293bmVySWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG1hcC5nZXRUaWxlTmVhcmVzdFRvKGNvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VG93ZXIgPSBuZXcgVG93ZXIodGV4dHVyZSwgcGFyZW50LCBvd25lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZFRpbGVPYmplY3QobmV3VG93ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgIF9fX19fX18gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqICAgICB8X18gICBfX3wgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHwgfF8gX18gX19fICBfX18gXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgfCB8ICdfXy8gXyBcXC8gXyBcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHwgfCB8IHwgIF9fLyAgX18vXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgfF98X3wgIFxcX19ffFxcX19ffFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY28udHlwZSA9PSBcInRyZWVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0dXJlID0gc3ByaXRlc2hlZXQuZ2V0VGV4dHVyZShjby5naWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG1hcC5nZXRUaWxlTmVhcmVzdFRvKGNvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VHJlZSA9IG5ldyBUcmVlKHRleHR1cmUsIHBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZFRpbGVPYmplY3QobmV3VHJlZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuXG5cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9DYWxsIG9uRmluaXNoIENhbGxiYWNrXG4gICAgICAgICAgICBjYWxsYmFjayhtYXApO1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIGFkZFBsYXllcihwbGF5ZXI6IFBsYXllcikge1xuICAgICAgICAvL3BsYXllci5zcHJpdGUuc2NhbGUgPSBUaWxlZE1hcC5TUFJJVEVfU0NBTEU7XG4gICAgICAgIHRoaXMucGxheWVyc1twbGF5ZXIucGxheWVySWRdID0gcGxheWVyO1xuICAgICAgICB0aGlzLnBsYXllckNvbnRhaW5lci5hZGRDaGlsZChwbGF5ZXIuc3ByaXRlKTtcbiAgICB9XG5cbiAgICBhZGRUaWxlT2JqZWN0KHRpbGVPYmplY3Q6IFRpbGVPYmplY3QpIHtcbiAgICAgICAgdGlsZU9iamVjdC5zY2FsZSA9IFRpbGVkTWFwLlNQUklURV9TQ0FMRTtcbiAgICAgICAgdGhpcy5wbGF5ZXJDb250YWluZXIuYWRkQ2hpbGQodGlsZU9iamVjdCk7XG4gICAgfVxuXG4gICAgYWRkVGlsZSh0aWxlOiBUaWxlKSB7XG4gICAgICAgIHRpbGUueCA9IHRpbGUuZ3JpZFggKiB0aGlzLnNwcml0ZXNoZWV0LnRpbGVXaWR0aCAqIFRpbGVkTWFwLlNQUklURV9TQ0FMRS54O1xuICAgICAgICB0aWxlLnkgPSB0aWxlLmdyaWRZICogdGhpcy5zcHJpdGVzaGVldC50aWxlSGVpZ2h0ICogVGlsZWRNYXAuU1BSSVRFX1NDQUxFLnk7XG4gICAgICAgIHRpbGUuc2NhbGUgPSBUaWxlZE1hcC5TUFJJVEVfU0NBTEU7XG5cbiAgICAgICAgdGhpcy50aWxlc1t0aWxlLmdyaWRZXVt0aWxlLmdyaWRYXSA9IHRpbGU7XG4gICAgICAgIHRoaXMudGlsZUNvbnRhaW5lci5hZGRDaGlsZCh0aWxlKTtcbiAgICB9XG5cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy5pc1BhdXNlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgcGxheSgpIHtcbiAgICAgICAgdGhpcy5pc1BhdXNlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGdldE9iamVjdENvb3JkaW5hdGVzKG1hcE9iamVjdDogUmVjdGFuZ2xlKSB7XG5cbiAgICAgICAgLy9hbiBPYmplY3QgY2FuIGJlIHBsYWNlZCBcImJldHdlZW5cIiB0aWxlcyBpbiB0aWxlZCBtYXAgZWRpdG9yLiBCdXQgZXZudHMgY2FuIGJlIHRyaWdnZXJlZCBvbmx5IGZyb20gd2hvbGUgdGlsZXMuIFNvIHRoZSBvYmVqY2N0cyBwb3NpdGlvbiBpcyBtYXBwZWQgdG8gdGhlIG5lYXJlc3QgVGlsZVxuXG4gICAgICAgIGxldCBvcmlnaW5hbFggPSBtYXBPYmplY3QueCAqIFRpbGVkTWFwLlNQUklURV9TQ0FMRS54O1xuICAgICAgICBsZXQgeFRpbGVzID0gb3JpZ2luYWxYIC8gdGhpcy5maW5hbFRpbGVXaWR0aDtcbiAgICAgICAgeFRpbGVzID0gTWF0aC5yb3VuZCh4VGlsZXMpO1xuXG4gICAgICAgIGxldCBvcmlnaW5hbFkgPSAobWFwT2JqZWN0LnkgLSBtYXBPYmplY3QuaGVpZ2h0KSAqIFRpbGVkTWFwLlNQUklURV9TQ0FMRS55OyAgLy8gLWNvLmhlaWdodCBiZWNhdXNlIHRpbGVkIHVzZXMgdGhlIGJvdHRvbS1sZWZ0IGNvcm5lciBmb3IgY29vcmRpbmF0ZXMgYW5kIFBJWEkgdXNlcyB0aGUgdG9wLWxlZnQgY29ybmVyICAgICAgICAgICAgICBcbiAgICAgICAgbGV0IHlUaWxlcyA9IG9yaWdpbmFsWSAvIHRoaXMuZmluYWxUaWxlSGVpZ2h0O1xuICAgICAgICB5VGlsZXMgPSBNYXRoLnJvdW5kKHlUaWxlcyk7XG5cbiAgICAgICAgcmV0dXJuIHsgZ3JpZFg6IHhUaWxlcywgZ3JpZFk6IHlUaWxlcyB9O1xuICAgIH1cblxuICAgIGdldFRpbGVOZWFyZXN0VG8obWFwT2JqZWN0OiBSZWN0YW5nbGUpOiBUaWxlIHtcbiAgICAgICAgY29uc3QgcG9zID0gdGhpcy5nZXRPYmplY3RDb29yZGluYXRlcyhtYXBPYmplY3QpO1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlc1twb3MuZ3JpZFldW3Bvcy5ncmlkWF07XG4gICAgfVxuXG59IiwiZXhwb3J0IGNsYXNzIEtleWJvYXJkTWFuYWdlciB7XG5cbiAgICBzdGF0aWMga2V5VXBzID0ge307XG4gICAgc3RhdGljIGtleURvd25zID0ge307XG5cbiAgICBzdGF0aWMgaW5pdCgpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBLZXlib2FyZE1hbmFnZXIub25LZXlVcCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBLZXlib2FyZE1hbmFnZXIub25LZXlEb3duKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgb25LZXlVcChldmVudCkge1xuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gS2V5Ym9hcmRNYW5hZ2VyLmtleVVwcykge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IEtleWJvYXJkTWFuYWdlci5rZXlVcHNbaV07XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09IGVsZW1lbnQua2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50Lm9uS2V5VXAgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQub25LZXlVcChldmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIG9uS2V5RG93bihldmVudCkge1xuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gS2V5Ym9hcmRNYW5hZ2VyLmtleURvd25zKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gS2V5Ym9hcmRNYW5hZ2VyLmtleURvd25zW2ldO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PSBlbGVtZW50LmtleSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5vbktleURvd24gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQub25LZXlEb3duKGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgcmVnaXN0ZXJLZXkoa2V5LCBvbktleURvd24sIG9uS2V5VXAsIGlkZW50aWZpZXIpIHtcbiAgICAgICAgS2V5Ym9hcmRNYW5hZ2VyLmtleURvd25zW2lkZW50aWZpZXJdID0geyBrZXk6IGtleSwgb25LZXlEb3duOiBvbktleURvd24gfTtcbiAgICAgICAgS2V5Ym9hcmRNYW5hZ2VyLmtleVVwc1tpZGVudGlmaWVyXSA9IHsga2V5OiBrZXksIG9uS2V5VXA6IG9uS2V5VXAgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgdW5yZWdpc3RlcktleShpZGVudGlmaWVyKSB7XG4gICAgICAgIGRlbGV0ZSBLZXlib2FyZE1hbmFnZXIua2V5RG93bnNbaWRlbnRpZmllcl07XG4gICAgICAgIGRlbGV0ZSBLZXlib2FyZE1hbmFnZXIua2V5VXBzW2lkZW50aWZpZXJdO1xuICAgIH1cblxuXG5cbn1cbiIsImV4cG9ydCBjbGFzcyBVcGRhdGVTY2hlZHVsZXIge1xuXG4gICAgc3RhdGljIGNsaWVudHM6IG9iamVjdCA9IHt9O1xuICAgIHN0YXRpYyBpc1BhdXNlZDogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBzdGF0aWMgcmVnaXN0ZXIoaWQ6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uLCBteXNlbGY6IG9iamVjdCkge1xuICAgICAgICBVcGRhdGVTY2hlZHVsZXIuY2xpZW50c1tpZF0gPSB7XG4gICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2ssXG4gICAgICAgICAgICBteXNlbGY6IG15c2VsZlxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHN0YXRpYyB1bnJlZ2lzdGVyKGlkOiBzdHJpbmcpIHtcbiAgICAgICAgZGVsZXRlIFVwZGF0ZVNjaGVkdWxlci5jbGllbnRzW2lkXTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZG9TdGVwKGRlbHRhOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKCFVcGRhdGVTY2hlZHVsZXIuaXNQYXVzZWQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgaW4gVXBkYXRlU2NoZWR1bGVyLmNsaWVudHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudENhbGxiYWNrID0gVXBkYXRlU2NoZWR1bGVyLmNsaWVudHNbaV0uY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgbGV0IG15c2VsZiA9IFVwZGF0ZVNjaGVkdWxlci5jbGllbnRzW2ldLm15c2VsZjtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2FsbGJhY2sobXlzZWxmLCBkZWx0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG4iLCJpbXBvcnQgeyBUaWxlZFNwcml0ZXNoZWV0IH0gZnJvbSBcIi4vVGlsZWRTcHJpdGVzaGVldFwiO1xuaW1wb3J0IHsgVGlsZWRNYXAgfSBmcm9tIFwiLi9UaWxlZE1hcFwiO1xuaW1wb3J0IHsgS2V5Ym9hcmRNYW5hZ2VyIH0gZnJvbSBcIi4vS2V5Ym9hcmRNYW5hZ2VyXCI7XG5pbXBvcnQgeyBVcGRhdGVTY2hlZHVsZXIgfSBmcm9tIFwiLi9VcGRhdGVTY2hlZHVsZXJcIjtcbmltcG9ydCB7IEFwcGxpY2F0aW9uLCBBcHBsaWNhdGlvbk9wdGlvbnMgfSBmcm9tIFwicGl4aS5qc1wiO1xuXG5jb25zdCBTUFJJVEVTSEVFVCA9IG5ldyBUaWxlZFNwcml0ZXNoZWV0KFwiZGF0YS9hc3NldHMvc3ByaXRlc2hlZXQucG5nXCIsIDEsIDE2LCAxNiwgMzEsIDU3KSAvL0tlbm55IFNwcml0ZXNoZWV0IHNlZSBkYXRhL21hcHMvS2VubmV5IFJQRyBUaWxlcy50c3hcbi8vVE9ETyBQYXJzZSB0aGlzIGluZm9ybWF0aW9uIGF1dG9tYXRpeGFsbHkgZnJvbSB0c3ggZmlsZVxuXG5jb25zdCBBUFBfV0lEVEggPSAxMDAwO1xuY29uc3QgQVBQX0hFSUdIVCA9IDcwMDtcblxuZXhwb3J0IGNsYXNzIEdhbWVNYW5hZ2VyIHtcblxuICAgIHN0YXRpYyBtYXA6IFRpbGVkTWFwO1xuXG4gICAgc3RhdGljIG15Q2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCIjcGl4aUNhbnZhc1wiKTtcbiAgICBzdGF0aWMgcGl4aUFwcCA6IEFwcGxpY2F0aW9uO1xuXG5cbiAgICBzdGF0aWMgc3RhcnRHYW1lKCkge1xuICAgICAgICAvL0NyZWF0ZSBQaXhpIHN0dWZmXG4gICAgICAgIC8vQ3JlYXRlIGEgUGl4aSBBcHBsaWNhdGlvblxuICAgICAgICBjbGFzcyBQaXhpT3B0aW9ucyBpbXBsZW1lbnRzIEFwcGxpY2F0aW9uT3B0aW9uc3tcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB3aWR0aCxwdWJsaWMgaGVpZ2h0LHB1YmxpYyB2aWV3KXt9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGl4aU9wdGlvbnMgPSBuZXcgUGl4aU9wdGlvbnMoQVBQX1dJRFRILEFQUF9IRUlHSFQsR2FtZU1hbmFnZXIubXlDYW52YXMpO1xuXG4gICAgICAgIEdhbWVNYW5hZ2VyLnBpeGlBcHAgPSBuZXcgQXBwbGljYXRpb24ocGl4aU9wdGlvbnMpO1xuXG4gICAgICAgIC8vQWRkIHRoZSBjYW52YXMgdGhhdCBQaXhpIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCBmb3IgeW91IHRvIHRoZSBIVE1MIGRvY3VtZW50XG4gICAgICAgIC8vU3RpbGwgbmVjY2VzYXJyeT8/Pz9cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChHYW1lTWFuYWdlci5waXhpQXBwLnZpZXcpO1xuXG4gICAgICAgIC8vSW5pdCBLZXlib2FyZCBNYW5hZ2VyXG4gICAgICAgIEtleWJvYXJkTWFuYWdlci5pbml0KCk7XG5cbiAgICAgICAgLy9SZWdpc3RlciBVcGRhdGUgc2NoZWR1bGVyXG4gICAgICAgIEdhbWVNYW5hZ2VyLnBpeGlBcHAudGlja2VyLmFkZChVcGRhdGVTY2hlZHVsZXIuZG9TdGVwKTtcblxuICAgICAgICBcbiAgICAgICAgVGlsZWRNYXAubG9hZE1hcChcImRhdGEvbWFwcy9tYXAxLmpzb25cIixTUFJJVEVTSEVFVCxmdW5jdGlvbihwYXJzZWRNYXA6VGlsZWRNYXApe1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJNYXAgcGFyc2VkXCIpO1xuICAgICAgICAgICAgR2FtZU1hbmFnZXIubWFwID0gcGFyc2VkTWFwO1xuICAgICAgICAgICAgR2FtZU1hbmFnZXIucGl4aUFwcC5zdGFnZS5hZGRDaGlsZChwYXJzZWRNYXApO1xuICAgICAgICAgICAgR2FtZU1hbmFnZXIucGl4aUFwcC50aWNrZXIuc3RhcnQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59IiwiaW1wb3J0IHtHYW1lTWFuYWdlcn0gZnJvbSBcIi4vbW9kZWwvR2FtZU1hbmFnZXJcIlxuXG5HYW1lTWFuYWdlci5zdGFydEdhbWUoKTsiXSwic291cmNlUm9vdCI6IiJ9