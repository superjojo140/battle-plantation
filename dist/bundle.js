!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){t.exports=PIXI},function(t,e){t.exports=$},function(t,e,n){"use strict";n.r(e);var r,i=n(0),o=function(){function t(t,e,n,r,o,a){this.path=t,this.border=e,this.tileHeight=r,this.tileWidth=n,this.rows=o,this.columns=a,this.bigTexture=i.Texture.fromImage(t,!0,i.SCALE_MODES.NEAREST),this.textures=[]}return t.prototype.getTexture=function(t){if(this.textures[t])return this.textures[t];var e=Math.floor((t-1)/this.columns),n=(t-1)%this.columns,r=this.tileWidth,o=this.tileHeight,a=n*r+n*this.border,s=e*o+e*this.border,p=new i.Texture(this.bigTexture.baseTexture,new i.Rectangle(a,s,r,o));return this.textures[t]=p,p},t}(),a=function(){function t(){}return t.init=function(){document.addEventListener("keyup",t.onKeyUp),document.addEventListener("keydown",t.onKeyDown)},t.onKeyUp=function(e){for(var n in t.keyUps){var r=t.keyUps[n];r.key!=t.ANY_KEY&&e.key!=r.key||"function"==typeof r.onKeyUp&&r.onKeyUp(e)}},t.onKeyDown=function(e){for(var n in t.keyDowns){var r=t.keyDowns[n];r.key!=t.ANY_KEY&&e.key!=r.key||"function"==typeof r.onKeyDown&&r.onKeyDown(e)}},t.registerKey=function(e,n,r,i){t.keyDowns[i]={key:e,onKeyDown:n},t.keyUps[i]={key:e,onKeyUp:r}},t.unregisterKey=function(e){delete t.keyDowns[e],delete t.keyUps[e]},t.keyUps={},t.keyDowns={},t.ANY_KEY="any_key",t}(),s=function(){function t(){}return t.register=function(e,n){t.clients[e]={callback:n}},t.unregister=function(e){delete t.clients[e]},t.doStep=function(e){if(!t.isPaused)for(var n in t.clients){(0,t.clients[n].callback)(e)}},t.clients={},t.isPaused=!1,t}(),p=function(){function t(e,n,r,o){var p=this;this.keyDown=function(e){if(e.key!=p.lastKey)switch(p.lastKey=e.key,e.key){case p.upKey:p.changeDirection(t.UP),p.vy=-1*t.PLAYER_SPEED;break;case p.downKey:p.changeDirection(t.DOWN),p.vy=1*t.PLAYER_SPEED;break;case p.leftKey:p.changeDirection(t.LEFT),p.vx=-1*t.PLAYER_SPEED;break;case p.rightKey:p.changeDirection(t.RIGHT),p.vx=1*t.PLAYER_SPEED}},this.keyUp=function(e){switch(p.lastKey="",e.key){case p.upKey:case p.downKey:p.changeDirection(t.STOP),p.vy=0;break;case p.leftKey:case p.rightKey:p.changeDirection(t.STOP),p.vx=0}},this.doStep=function(t){var e=p.sprite.x+p.vx*t,n=p.sprite.y+p.vy*t;p.sprite.x=e,p.sprite.y=n},this.map=r,this.playerId=o,this.animations=[];for(var c=i.Texture.fromImage("data/assets/player_"+o+".png").baseTexture,u=0;u<4;u++){for(var y=[],h=0;h<3;h++){var l=new i.Texture(c,new i.Rectangle(h*t.SPRITE_WIDTH,u*t.SPRITE_HEIGHT,t.SPRITE_WIDTH,t.SPRITE_HEIGHT));y.push(l)}this.animations.push(y)}this.sprite=new i.extras.AnimatedSprite(this.animations[t.DOWN]),this.sprite.x=e,this.sprite.y=n,this.vx=0,this.vy=0,this.sprite.scale=t.SPRITE_SCALE,this.sprite.animationSpeed=.13,this.sprite.loop=!0,this.lastKey="",a.registerKey(a.ANY_KEY,this.keyDown,this.keyUp,"player"+o),s.register("player"+o,this.doStep)}return t.prototype.changeDirection=function(e){0<=e&&e<=3?(this.sprite.textures=this.animations[e],this.sprite.play()):e==t.STOP&&this.sprite.stop()},t.prototype.setKeys=function(t,e,n,r,i,o){this.upKey=t,this.downKey=e,this.leftKey=n,this.rightKey=r,this.actionKey=i,this.selectKey=o},t.UP=0,t.RIGHT=1,t.DOWN=2,t.LEFT=3,t.STOP=4,t.SPRITE_WIDTH=32,t.SPRITE_HEIGHT=36,t.SPRITE_SCALE=new i.Point(1.5,1.5),t.PLAYER_SPEED=4,t}(),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.gridX=n,o.gridY=r,o.map=i,o.x=n*i.finalTileWidth,o.y=r*i.finalTileHeight,o}return c(e,t),e.prototype.onHit=function(t){this.tileObject&&this.tileObject.onHit(t)},e.prototype.onPlant=function(t){this.tileObject&&this.tileObject.onPlant(t)},e.prototype.onPlace=function(t){null==this.tileObject&&console.log("Placing Pumpkin TNT")},e.prototype.onHarvest=function(t){this.tileObject&&this.tileObject.onHarvest(t)},e.prototype.isFree=function(){return!this.tileObject},e}(i.Sprite),y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(t){function e(e,n){var r=t.call(this,e)||this;if(r.parent=n,!r.parent.isFree())throw new Error("Can't add TileObject to a Tile that allready has an TileObject");return r.parent.tileObject=r,r.x=r.parent.x,r.y=r.parent.y,r}return y(e,t),e.prototype.onHit=function(t){},e.prototype.onPlant=function(t){},e.prototype.onHarvest=function(t){},e.prototype.onDestroy=function(t){delete this.parent.tileObject,this.destroy()},e}(i.Sprite),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.owner=r,i}return l(e,t),e.prototype.onHit=function(t){},e.prototype.onDestroy=function(t){},e}(h),d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(t){function e(n,r){var o=t.call(this)||this;return o.parent=n,o.progress=r,n.parent.map.tileObjectContainer.addChild(o),o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height,o.frame=new i.Graphics,o.frame.lineStyle(e.LINE_THICKNESS,16711680),o.frame.drawRect(0,0,64,3*e.LINE_THICKNESS),o.addChild(o.frame),o.setProgress(r),o}return d(e,t),e.prototype.updateView=function(){this.progressShape=new i.Graphics,this.progressShape.lineStyle(e.LINE_THICKNESS,65280),this.progressShape.drawRect(e.LINE_THICKNESS,e.LINE_THICKNESS,64*this.progress,e.LINE_THICKNESS),this.addChild(this.progressShape)},e.prototype.setProgress=function(t){this.progress=t,this.updateView()},e.LINE_THICKNESS=3,e}(i.Container),_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.statusBar=new g(r,.5),r}return _(e,t),e.prototype.onHit=function(t){},e.prototype.onDestroy=function(t){},e.prototype.onHarvest=function(t){},e}(h),v=n(1),P=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=function(t){function e(){var e=t.call(this)||this;return e.tileContainer=new i.Container,e.addChild(e.tileContainer),e.tileObjectContainer=new i.Container,e.addChild(e.tileObjectContainer),e.playerContainer=new i.Container,e.addChild(e.playerContainer),e.players=[],e}return P(e,t),e.prototype.getMapObjectProperty=function(t,e){for(var n=0,r=t.properties;n<r.length;n++){var i=r[n];if(i.name==e)return i.value}},e.loadMap=function(t,n,r){var o=new e,a=new i.Point(e.MAP_ZOOM,e.MAP_ZOOM);o.finalTileWidth=n.tileWidth*a.x,o.finalTileHeight=n.tileHeight*a.y,o.spritesheet=n,v.getJSON(t,{},(function(t){for(var e=0,i=t.layers;e<i.length;e++){if("tilelayer"==(v=i[e]).type){o.gridWidth=v.width,o.gridHeight=v.height,o.tiles=new Array(o.gridHeight);for(var s=0;s<o.tiles.length;s++)o.tiles[s]=new Array(o.gridWidth);for(var c=0;c<v.height;c++)for(var y=0;y<v.width;y++){var h=c*v.width+y;if(v.data[h]>0){var l=n.getTexture(v.data[h]),d=new u(l,c,y,o);o.addTile(d)}}}}for(var g=0,_=t.layers;g<_.length;g++){var v;if("objectgroup"==(v=_[g]).type){for(var P=0,O=v.objects;P<O.length;P++){if("player"==(C=O[P]).type){var T=Math.round(C.x*a.x),S=(Math.round(C.y)-C.height)*a.y,E=o.getMapObjectProperty(C,"playerId"),b=new p(T,S,this,E);o.addPlayer(b)}}for(var x=0,j=v.objects;x<j.length;x++){var C;if("tower"==(C=j[x]).type){l=n.getTexture(C.gid);var K=o.getMapObjectProperty(C,"owner"),A=o.players[K],I=o.getTileNearestTo(C),k=new f(l,I,A);o.addTileObject(k)}else if("tree"==C.type){l=n.getTexture(C.gid);var m=o.getTileNearestTo(C),H=new w(l,m);o.addTileObject(H)}}}}r(o)}))},e.prototype.addPlayer=function(t){this.players[t.playerId]=t,this.playerContainer.addChild(t.sprite)},e.prototype.addTileObject=function(t){t.scale=e.SPRITE_SCALE,this.playerContainer.addChild(t)},e.prototype.addTile=function(t){t.x=t.gridX*this.spritesheet.tileWidth*e.SPRITE_SCALE.x,t.y=t.gridY*this.spritesheet.tileHeight*e.SPRITE_SCALE.y,t.scale=e.SPRITE_SCALE,this.tiles[t.gridY][t.gridX]=t,this.tileContainer.addChild(t)},e.prototype.pause=function(){this.isPaused=!0},e.prototype.play=function(){this.isPaused=!1},e.prototype.getObjectCoordinates=function(t){var n=t.x*e.SPRITE_SCALE.x/this.finalTileWidth;n=Math.round(n);var r=(t.y-t.height)*e.SPRITE_SCALE.y/this.finalTileHeight;return{gridX:n,gridY:r=Math.round(r)}},e.prototype.getTileNearestTo=function(t){var e=this.getObjectCoordinates(t);return this.tiles[e.gridY][e.gridX]},e.MAP_ZOOM=4,e.SPRITE_SCALE=new i.Point(e.MAP_ZOOM,e.MAP_ZOOM),e}(i.Container),T=new o("data/assets/spritesheet.png",1,16,16,31,57);(function(){function t(){}return t.startGame=function(){var e=new function(t,e){this.width=t,this.height=e}(512,512);t.pixiApp=new i.Application(e),document.body.appendChild(t.pixiApp.view),a.init(),t.pixiApp.ticker.add(s.doStep),O.loadMap("data/maps/map1.json",T,(function(e){console.log("Map parsed"),t.map=e,t.pixiApp.stage.addChild(e),t.pixiApp.ticker.start();var n=e.players;n[0].setKeys("ArrowUp","ArrowDown","ArrowLeft","ArrowRight","m","n"),n[1].setKeys("w","s","a","d","x","y")}))},t})().startGame()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiUElYSVwiIiwid2VicGFjazovLy9leHRlcm5hbCBcIiRcIiIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVGlsZWRTcHJpdGVzaGVldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvS2V5Ym9hcmRNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9VcGRhdGVTY2hlZHVsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL1BsYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVGlsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVGlsZU9iamVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVG93ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL1N0YXR1c0Jhci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVHJlZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvVGlsZWRNYXAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL0dhbWVNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlBJWEkiLCIkIiwicGF0aCIsImJvcmRlciIsInRpbGVXaWR0aCIsInRpbGVIZWlnaHQiLCJyb3dzIiwiY29sdW1ucyIsInRoaXMiLCJiaWdUZXh0dXJlIiwiZnJvbUltYWdlIiwiTkVBUkVTVCIsInRleHR1cmVzIiwiZ2V0VGV4dHVyZSIsImdpZCIsInJvdyIsIk1hdGgiLCJmbG9vciIsImNvbHVtbiIsIngiLCJ5IiwiYmFzZVRleHR1cmUiLCJpbml0IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiS2V5Ym9hcmRNYW5hZ2VyIiwib25LZXlVcCIsIm9uS2V5RG93biIsImV2ZW50Iiwia2V5VXBzIiwiZWxlbWVudCIsIkFOWV9LRVkiLCJrZXlEb3ducyIsInJlZ2lzdGVyS2V5IiwiaWRlbnRpZmllciIsInVucmVnaXN0ZXJLZXkiLCJyZWdpc3RlciIsImlkIiwiY2FsbGJhY2siLCJVcGRhdGVTY2hlZHVsZXIiLCJjbGllbnRzIiwidW5yZWdpc3RlciIsImRvU3RlcCIsImRlbHRhIiwiaXNQYXVzZWQiLCJjdXJyZW50Q2FsbGJhY2siLCJtYXAiLCJwbGF5ZXJJZCIsImtleURvd24iLCJsYXN0S2V5IiwidXBLZXkiLCJjaGFuZ2VEaXJlY3Rpb24iLCJQbGF5ZXIiLCJVUCIsInZ5IiwiUExBWUVSX1NQRUVEIiwiZG93bktleSIsIkRPV04iLCJsZWZ0S2V5IiwiTEVGVCIsInZ4IiwicmlnaHRLZXkiLCJSSUdIVCIsImtleVVwIiwiU1RPUCIsIm5ld1giLCJzcHJpdGUiLCJuZXdZIiwiYW5pbWF0aW9ucyIsInRleHR1cmVBcnJheSIsIlNQUklURV9XSURUSCIsIlNQUklURV9IRUlHSFQiLCJwdXNoIiwiQW5pbWF0ZWRTcHJpdGUiLCJzY2FsZSIsIlNQUklURV9TQ0FMRSIsImFuaW1hdGlvblNwZWVkIiwibG9vcCIsImRpcmVjdGlvbiIsInBsYXkiLCJzdG9wIiwic2V0S2V5cyIsImFjdGlvbktleSIsInNlbGVjdEtleSIsInRleHR1cmUiLCJncmlkWCIsImdyaWRZIiwiZmluYWxUaWxlV2lkdGgiLCJmaW5hbFRpbGVIZWlnaHQiLCJvbkhpdCIsImhpdEV2ZW50IiwidGlsZU9iamVjdCIsIm9uUGxhbnQiLCJwbGFudCIsIm9uUGxhY2UiLCJwdW1wa2luIiwidW5kZWZpbmVkIiwiY29uc29sZSIsImxvZyIsIm9uSGFydmVzdCIsImluaXRpYXRvciIsImlzRnJlZSIsInBhcmVudCIsIkVycm9yIiwiaGl0ZXZlbnQiLCJvbkRlc3Ryb3kiLCJkZXN0cm95Iiwib3duZXIiLCJUaWxlT2JqZWN0IiwicHJvZ3Jlc3MiLCJ0aWxlT2JqZWN0Q29udGFpbmVyIiwiYWRkQ2hpbGQiLCJ3aWR0aCIsImhlaWdodCIsImZyYW1lIiwibGluZVN0eWxlIiwiU3RhdHVzQmFyIiwiTElORV9USElDS05FU1MiLCJkcmF3UmVjdCIsInNldFByb2dyZXNzIiwidXBkYXRlVmlldyIsInByb2dyZXNzU2hhcGUiLCJzdGF0dXNCYXIiLCJ0aWxlQ29udGFpbmVyIiwicGxheWVyQ29udGFpbmVyIiwicGxheWVycyIsImdldE1hcE9iamVjdFByb3BlcnR5IiwibWFwT2JqZWN0IiwicHJvcGVydGllcyIsInByb3AiLCJsb2FkTWFwIiwibWFwUGF0aCIsInNwcml0ZXNoZWV0IiwiVGlsZWRNYXAiLCJNQVBfWk9PTSIsIm1hcERhdGEiLCJsYXllcnMiLCJ0bCIsInR5cGUiLCJncmlkV2lkdGgiLCJncmlkSGVpZ2h0IiwidGlsZXMiLCJBcnJheSIsImxlbmd0aCIsImluZGV4IiwiZGF0YSIsIm5ld1RpbGUiLCJUaWxlIiwiYWRkVGlsZSIsIm9iamVjdHMiLCJjbyIsInJvdW5kIiwibmV3UGxheWVyIiwiYWRkUGxheWVyIiwib3duZXJJZCIsImdldFRpbGVOZWFyZXN0VG8iLCJuZXdUb3dlciIsIlRvd2VyIiwiYWRkVGlsZU9iamVjdCIsIm5ld1RyZWUiLCJwbGF5ZXIiLCJ0aWxlIiwicGF1c2UiLCJnZXRPYmplY3RDb29yZGluYXRlcyIsInhUaWxlcyIsInlUaWxlcyIsInBvcyIsIlNQUklURVNIRUVUIiwic3RhcnRHYW1lIiwicGl4aU9wdGlvbnMiLCJHYW1lTWFuYWdlciIsInBpeGlBcHAiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJ2aWV3IiwidGlja2VyIiwiYWRkIiwicGFyc2VkTWFwIiwic3RhZ2UiLCJzdGFydCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVBQUVPLEdBQ3RCWCxPQUFPQyxlQUFlVSxFQUFJLFVBQVcsQ0FBRVQsWUFBWSxFQUFNSyxNQUFP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K0IsRUFBRyxHQUFJLEdBQUksR0FBSSxLQU12Rix5QkF3Q0EsT0FqQ1csRUFBQUMsVUFBUCxXQUdJLElBR01DLEVBQWMsSUFGaEIsU0FBbUJ6RCxFQUFhQyxHQUFiLEtBQUFELFFBQWEsS0FBQUMsU0FFaEIsQ0FoQlYsSUFDQyxLQWlCWHlELEVBQVlDLFFBQVUsSUFBSSxjQUFZRixHQUl0Q2xKLFNBQVNxSixLQUFLQyxZQUFZSCxFQUFZQyxRQUFRRyxNQUc5Q3JKLEVBQWdCSCxPQUdoQm9KLEVBQVlDLFFBQVFJLE9BQU9DLElBQUl6SSxFQUFnQkcsUUFHL0MsRUFBU3dGLFFBQVEsc0JBQXNCcUMsR0FBWSxTQUFTVSxHQUN4RGhGLFFBQVFDLElBQUksY0FDWndFLEVBQVk1SCxJQUFNbUksRUFDbEJQLEVBQVlDLFFBQVFPLE1BQU1uRSxTQUFTa0UsR0FDbkNQLEVBQVlDLFFBQVFJLE9BQU9JLFFBRTNCLElBQU10RCxFQUFVb0QsRUFBVXBELFFBQzFCQSxFQUFRLEdBQUc1QyxRQUFRLFVBQVUsWUFBWSxZQUFZLGFBQWEsSUFBSSxLQUN0RTRDLEVBQVEsR0FBRzVDLFFBQVEsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLFNBSW5ELEdBeENBLEdDVll1RiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IFBJWEk7IiwibW9kdWxlLmV4cG9ydHMgPSAkOyIsImltcG9ydCB7IFRleHR1cmUsIFNDQUxFX01PREVTLCBSZWN0YW5nbGUgfSBmcm9tIFwicGl4aS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgVGlsZWRTcHJpdGVzaGVldHtcblxuXHRwYXRoOiBzdHJpbmc7XG5cdGJvcmRlcjogbnVtYmVyO1xuXHR0aWxlSGVpZ2h0OiBudW1iZXI7XG5cdHRpbGVXaWR0aDogbnVtYmVyO1xuXHRyb3dzOiBudW1iZXI7XG5cdGNvbHVtbnM6IG51bWJlcjtcblx0YmlnVGV4dHVyZTogVGV4dHVyZTtcblx0dGV4dHVyZXM6IFRleHR1cmVbXTtcblxuXHRjb25zdHJ1Y3RvcihwYXRoLGJvcmRlcix0aWxlV2lkdGgsdGlsZUhlaWdodCxyb3dzLGNvbHVtbnMpe1xuXHRcdHRoaXMucGF0aCA9IHBhdGg7XG5cdFx0dGhpcy5ib3JkZXIgPSBib3JkZXI7XG5cdFx0dGhpcy50aWxlSGVpZ2h0ID0gdGlsZUhlaWdodDtcblx0XHR0aGlzLnRpbGVXaWR0aCA9IHRpbGVXaWR0aDtcblx0XHR0aGlzLnJvd3MgPSByb3dzO1xuXHRcdHRoaXMuY29sdW1ucyA9IGNvbHVtbnM7XG5cdFx0dGhpcy5iaWdUZXh0dXJlID0gVGV4dHVyZS5mcm9tSW1hZ2UocGF0aCwgdHJ1ZSwgU0NBTEVfTU9ERVMuTkVBUkVTVCk7XG5cdFx0dGhpcy50ZXh0dXJlcyA9IFtdO1xuXHR9XG5cblx0Z2V0VGV4dHVyZShnaWQpOlRleHR1cmUgIHtcblx0XHQvL0NoZWNrIHdldGhlciB0ZXh0dXJlcyB3YXMgYWxscmVhZHkgZnJhbWVkIGZvcm0gc3ByaXRlc2hlZXRcblx0XHRpZiAodGhpcy50ZXh0dXJlc1tnaWRdKSB7XG5cdFx0ICByZXR1cm4gdGhpcy50ZXh0dXJlc1tnaWRdO1xuXHRcdH0gZWxzZSB7XG5cdFx0ICAvL0NhbGN1bGF0ZSByb3cgYW5kIGNvbHVtbiBmcm9tIGdpZFxuXHRcdCAgbGV0IHJvdzpudW1iZXIgPSBNYXRoLmZsb29yKChnaWQgLSAxKSAvIHRoaXMuY29sdW1ucyk7XG5cdFx0ICBsZXQgY29sdW1uOm51bWJlciA9IChnaWQgLSAxKSAlIHRoaXMuY29sdW1ucztcblx0XG5cdFx0ICBsZXQgdGlsZVdpZHRoOm51bWJlciA9IHRoaXMudGlsZVdpZHRoO1xuXHRcdCAgbGV0IHRpbGVIZWlnaHQ6bnVtYmVyID0gdGhpcy50aWxlSGVpZ2h0O1xuXHRcblx0XHQgIGxldCB4Om51bWJlciA9IGNvbHVtbiAqIHRpbGVXaWR0aCArIGNvbHVtbiAqIHRoaXMuYm9yZGVyO1xuXHRcdCAgbGV0IHk6bnVtYmVyID0gcm93ICogdGlsZUhlaWdodCArIHJvdyAqIHRoaXMuYm9yZGVyO1xuXHRcblx0XHQgIGxldCB0OlRleHR1cmUgPSBuZXcgVGV4dHVyZSh0aGlzLmJpZ1RleHR1cmUuYmFzZVRleHR1cmUsIG5ldyBSZWN0YW5nbGUoeCwgeSwgdGlsZVdpZHRoLCB0aWxlSGVpZ2h0KSk7XG5cdFx0ICAvL1NhdmUgVGV4dHVyZSBpbiBjYWNoZSBhcnJheVxuXHRcdCAgdGhpcy50ZXh0dXJlc1tnaWRdID0gdDtcblx0XHQgIHJldHVybiB0O1xuXHRcdH1cblx0ICB9XG5cdFxuXG59IiwiZXhwb3J0IGNsYXNzIEtleWJvYXJkTWFuYWdlciB7XG5cbiAgICBzdGF0aWMga2V5VXBzID0ge307XG4gICAgc3RhdGljIGtleURvd25zID0ge307XG4gICAgc3RhdGljIEFOWV9LRVkgPSBcImFueV9rZXlcIjtcblxuICAgIHN0YXRpYyBpbml0KCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIEtleWJvYXJkTWFuYWdlci5vbktleVVwKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIEtleWJvYXJkTWFuYWdlci5vbktleURvd24pO1xuICAgIH1cblxuICAgIHN0YXRpYyBvbktleVVwKGV2ZW50KSB7XG4gICAgICAgIGZvciAoY29uc3QgaSBpbiBLZXlib2FyZE1hbmFnZXIua2V5VXBzKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gS2V5Ym9hcmRNYW5hZ2VyLmtleVVwc1tpXTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmtleSA9PSBLZXlib2FyZE1hbmFnZXIuQU5ZX0tFWSB8fCBldmVudC5rZXkgPT0gZWxlbWVudC5rZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQub25LZXlVcCA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5vbktleVVwKGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgb25LZXlEb3duKGV2ZW50KSB7XG4gICAgICAgIGZvciAoY29uc3QgaSBpbiBLZXlib2FyZE1hbmFnZXIua2V5RG93bnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBLZXlib2FyZE1hbmFnZXIua2V5RG93bnNbaV07XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5rZXkgPT0gS2V5Ym9hcmRNYW5hZ2VyLkFOWV9LRVkgfHwgZXZlbnQua2V5ID09IGVsZW1lbnQua2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50Lm9uS2V5RG93biA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5vbktleURvd24oZXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyByZWdpc3RlcktleShrZXksIG9uS2V5RG93biwgb25LZXlVcCwgaWRlbnRpZmllcikge1xuICAgICAgICBLZXlib2FyZE1hbmFnZXIua2V5RG93bnNbaWRlbnRpZmllcl0gPSB7IGtleToga2V5LCBvbktleURvd246IG9uS2V5RG93biB9O1xuICAgICAgICBLZXlib2FyZE1hbmFnZXIua2V5VXBzW2lkZW50aWZpZXJdID0geyBrZXk6IGtleSwgb25LZXlVcDogb25LZXlVcCB9O1xuICAgIH1cblxuICAgIHN0YXRpYyB1bnJlZ2lzdGVyS2V5KGlkZW50aWZpZXIpIHtcbiAgICAgICAgZGVsZXRlIEtleWJvYXJkTWFuYWdlci5rZXlEb3duc1tpZGVudGlmaWVyXTtcbiAgICAgICAgZGVsZXRlIEtleWJvYXJkTWFuYWdlci5rZXlVcHNbaWRlbnRpZmllcl07XG4gICAgfVxuXG5cblxufVxuIiwiZXhwb3J0IGNsYXNzIFVwZGF0ZVNjaGVkdWxlciB7XG5cbiAgICBzdGF0aWMgY2xpZW50czogb2JqZWN0ID0ge307XG4gICAgc3RhdGljIGlzUGF1c2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBzdGF0aWMgcmVnaXN0ZXIoaWQ6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XG4gICAgICAgIFVwZGF0ZVNjaGVkdWxlci5jbGllbnRzW2lkXSA9IHtcbiAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHN0YXRpYyB1bnJlZ2lzdGVyKGlkOiBzdHJpbmcpIHtcbiAgICAgICAgZGVsZXRlIFVwZGF0ZVNjaGVkdWxlci5jbGllbnRzW2lkXTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZG9TdGVwKGRlbHRhOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKCFVcGRhdGVTY2hlZHVsZXIuaXNQYXVzZWQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgaW4gVXBkYXRlU2NoZWR1bGVyLmNsaWVudHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudENhbGxiYWNrID0gVXBkYXRlU2NoZWR1bGVyLmNsaWVudHNbaV0uY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgY3VycmVudENhbGxiYWNrKGRlbHRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbiIsImltcG9ydCB7IFRpbGVkTWFwIH0gZnJvbSBcIi4vVGlsZWRNYXBcIjtcbmltcG9ydCB7IFBvaW50LCBleHRyYXMsIFRleHR1cmUsIEJhc2VUZXh0dXJlLCBSZWN0YW5nbGUgfSBmcm9tIFwicGl4aS5qc1wiO1xuaW1wb3J0IHsgS2V5Ym9hcmRNYW5hZ2VyIH0gZnJvbSBcIi4vS2V5Ym9hcmRNYW5hZ2VyXCI7XG5pbXBvcnQgeyBVcGRhdGVTY2hlZHVsZXIgfSBmcm9tIFwiLi9VcGRhdGVTY2hlZHVsZXJcIjtcblxuZXhwb3J0IGNsYXNzIFBsYXllciB7XG5cblxuICAgIHN0YXRpYyBVUDogbnVtYmVyID0gMDtcbiAgICBzdGF0aWMgUklHSFQ6IG51bWJlciA9IDE7XG4gICAgc3RhdGljIERPV046IG51bWJlciA9IDI7XG4gICAgc3RhdGljIExFRlQ6IG51bWJlciA9IDM7XG4gICAgc3RhdGljIFNUT1A6IG51bWJlciA9IDQ7XG5cbiAgICBzdGF0aWMgU1BSSVRFX1dJRFRIOiBudW1iZXIgPSA5NiAvIDM7XG4gICAgc3RhdGljIFNQUklURV9IRUlHSFQ6IG51bWJlciA9IDE0NCAvIDQ7XG4gICAgc3RhdGljIFNQUklURV9TQ0FMRTogUG9pbnQgPSBuZXcgUG9pbnQoMS41LCAxLjUpO1xuICAgIHN0YXRpYyBQTEFZRVJfU1BFRUQgPSA0O1xuXG5cbiAgICBzcHJpdGU6IGV4dHJhcy5BbmltYXRlZFNwcml0ZTtcbiAgICB2eDogbnVtYmVyO1xuICAgIHZ5OiBudW1iZXI7XG4gICAgYW5pbWF0aW9uczogVGV4dHVyZVtdW107XG4gICAgbWFwOiBUaWxlZE1hcDtcbiAgICBsYXN0S2V5OiBzdHJpbmc7XG4gICAgcGxheWVySWQ6bnVtYmVyO1xuXG4gICAgdXBLZXk6c3RyaW5nO1xuICAgIGRvd25LZXk6c3RyaW5nO1xuICAgIGxlZnRLZXk6c3RyaW5nO1xuICAgIHJpZ2h0S2V5OnN0cmluZztcbiAgICBhY3Rpb25LZXk6c3RyaW5nO1xuICAgIHNlbGVjdEtleTpzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgbWFwOiBUaWxlZE1hcCxwbGF5ZXJJZDpudW1iZXIpIHtcbiAgICAgICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgICAgIHRoaXMucGxheWVySWQgPSBwbGF5ZXJJZDtcbiAgICAgICAgdGhpcy5hbmltYXRpb25zID0gW107XG4gICAgICAgIGxldCBiYXNlVGV4dHVyZTogQmFzZVRleHR1cmUgPSBUZXh0dXJlLmZyb21JbWFnZShgZGF0YS9hc3NldHMvcGxheWVyXyR7cGxheWVySWR9LnBuZ2ApLmJhc2VUZXh0dXJlO1xuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCA0OyByb3crKykge1xuICAgICAgICAgICAgbGV0IHRleHR1cmVBcnJheTogVGV4dHVyZVtdID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCAzOyBjb2x1bW4rKykge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gbmV3IFRleHR1cmUoYmFzZVRleHR1cmUsIG5ldyBSZWN0YW5nbGUoY29sdW1uICogUGxheWVyLlNQUklURV9XSURUSCwgcm93ICogUGxheWVyLlNQUklURV9IRUlHSFQsIFBsYXllci5TUFJJVEVfV0lEVEgsIFBsYXllci5TUFJJVEVfSEVJR0hUKSk7XG4gICAgICAgICAgICAgICAgdGV4dHVyZUFycmF5LnB1c2godCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnMucHVzaCh0ZXh0dXJlQXJyYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zcHJpdGUgPSBuZXcgZXh0cmFzLkFuaW1hdGVkU3ByaXRlKHRoaXMuYW5pbWF0aW9uc1tQbGF5ZXIuRE9XTl0pO1xuICAgICAgICB0aGlzLnNwcml0ZS54ID0geDtcbiAgICAgICAgdGhpcy5zcHJpdGUueSA9IHk7XG4gICAgICAgIHRoaXMudnggPSAwO1xuICAgICAgICB0aGlzLnZ5ID0gMDtcbiAgICAgICAgdGhpcy5zcHJpdGUuc2NhbGUgPSBQbGF5ZXIuU1BSSVRFX1NDQUxFO1xuICAgICAgICB0aGlzLnNwcml0ZS5hbmltYXRpb25TcGVlZCA9IDAuMTM7XG4gICAgICAgIHRoaXMuc3ByaXRlLmxvb3AgPSB0cnVlO1xuICAgICAgICB0aGlzLmxhc3RLZXkgPSBcIlwiO1xuXG4gICAgICAgIC8vcmVnaXN0ZXIga2V5IGV2ZW50c1xuICAgICAgICBLZXlib2FyZE1hbmFnZXIucmVnaXN0ZXJLZXkoS2V5Ym9hcmRNYW5hZ2VyLkFOWV9LRVksdGhpcy5rZXlEb3duLHRoaXMua2V5VXAsXCJwbGF5ZXJcIitwbGF5ZXJJZCk7XG4gICAgICAgIFVwZGF0ZVNjaGVkdWxlci5yZWdpc3RlcihcInBsYXllclwiK3BsYXllcklkLHRoaXMuZG9TdGVwKTtcblxuICAgIH1cblxuICAgIGNoYW5nZURpcmVjdGlvbihkaXJlY3Rpb246IG51bWJlcikge1xuICAgICAgICBpZiAoMCA8PSBkaXJlY3Rpb24gJiYgZGlyZWN0aW9uIDw9IDMpIHtcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnRleHR1cmVzID0gdGhpcy5hbmltYXRpb25zW2RpcmVjdGlvbl07XG4gICAgICAgICAgICB0aGlzLnNwcml0ZS5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09IFBsYXllci5TVE9QKSB7XG4gICAgICAgICAgICB0aGlzLnNwcml0ZS5zdG9wKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRLZXlzKHVwS2V5LGRvd25LZXksbGVmdEtleSxyaWdodEtleSxhY3Rpb25LZXksc2VsZWN0S2V5KXtcbiAgICAgICAgdGhpcy51cEtleSA9IHVwS2V5O1xuICAgICAgICB0aGlzLmRvd25LZXkgPSBkb3duS2V5O1xuICAgICAgICB0aGlzLmxlZnRLZXkgPSBsZWZ0S2V5O1xuICAgICAgICB0aGlzLnJpZ2h0S2V5ID0gcmlnaHRLZXk7XG4gICAgICAgIHRoaXMuYWN0aW9uS2V5ID0gYWN0aW9uS2V5O1xuICAgICAgICB0aGlzLnNlbGVjdEtleSA9IHNlbGVjdEtleTtcbiAgICB9XG5cbiAgICBrZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5rZXkgIT0gdGhpcy5sYXN0S2V5KSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RLZXkgPSBldmVudC5rZXk7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy51cEtleTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXJlY3Rpb24oUGxheWVyLlVQKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52eSA9IC0xICogUGxheWVyLlBMQVlFUl9TUEVFRDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLmRvd25LZXk6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGlyZWN0aW9uKFBsYXllci5ET1dOKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52eSA9IDEgKiBQbGF5ZXIuUExBWUVSX1NQRUVEO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMubGVmdEtleTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXJlY3Rpb24oUGxheWVyLkxFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZ4ID0gLTEgKiBQbGF5ZXIuUExBWUVSX1NQRUVEO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIHRoaXMucmlnaHRLZXk6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGlyZWN0aW9uKFBsYXllci5SSUdIVCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudnggPSAxICogUGxheWVyLlBMQVlFUl9TUEVFRDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGtleVVwID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMubGFzdEtleSA9IFwiXCI7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgICAgICBjYXNlIHRoaXMudXBLZXk6XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXJlY3Rpb24oUGxheWVyLlNUT1ApO1xuICAgICAgICAgICAgICAgIHRoaXMudnkgPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSB0aGlzLmRvd25LZXk6ICBcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURpcmVjdGlvbihQbGF5ZXIuU1RPUCk7XG4gICAgICAgICAgICAgICAgdGhpcy52eSA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHRoaXMubGVmdEtleTogICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXJlY3Rpb24oUGxheWVyLlNUT1ApO1xuICAgICAgICAgICAgICAgIHRoaXMudnggPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSB0aGlzLnJpZ2h0S2V5OiAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXJlY3Rpb24oUGxheWVyLlNUT1ApO1xuICAgICAgICAgICAgICAgIHRoaXMudnggPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBkb1N0ZXAgPSAoZGVsdGEpID0+IHtcblxuICAgICAgICBsZXQgbmV3WCA9IHRoaXMuc3ByaXRlLnggKyB0aGlzLnZ4ICogZGVsdGE7XG4gICAgICAgIGxldCBuZXdZID0gdGhpcy5zcHJpdGUueSArIHRoaXMudnkgKiBkZWx0YTtcblxuICAgICAgICB0aGlzLnNwcml0ZS54ID0gbmV3WDtcbiAgICAgICAgdGhpcy5zcHJpdGUueSA9IG5ld1k7XG5cbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBUaWxlT2JqZWN0IH0gZnJvbSBcIi4vVGlsZU9iamVjdFwiO1xuaW1wb3J0IHsgVGlsZWRNYXAgfSBmcm9tIFwiLi9UaWxlZE1hcFwiO1xuaW1wb3J0IHsgSGl0RXZlbnQgfSBmcm9tIFwiLi9IaXRFdmVudFwiO1xuaW1wb3J0IHsgUGxhbnQgfSBmcm9tIFwiLi9QbGFudFwiO1xuaW1wb3J0IHsgVG50UHVtcGtpbiB9IGZyb20gXCIuL1RudFB1bXBraW5cIjtcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL1BsYXllclwiO1xuaW1wb3J0IHsgU3ByaXRlLCBUZXh0dXJlIH0gZnJvbSBcInBpeGkuanNcIjtcblxuZXhwb3J0IGNsYXNzIFRpbGUgZXh0ZW5kcyBTcHJpdGUge1xuXG4gICAgZ3JpZFg6IG51bWJlcjtcbiAgICBncmlkWTogbnVtYmVyO1xuICAgIHRpbGVPYmplY3Q6IFRpbGVPYmplY3Q7XG4gICAgbWFwOiBUaWxlZE1hcDtcblxuICAgIGNvbnN0cnVjdG9yKHRleHR1cmU6IFRleHR1cmUsIGdyaWRYOiBudW1iZXIsIGdyaWRZOiBudW1iZXIsIG1hcDpUaWxlZE1hcCkge1xuICAgICAgICBzdXBlcih0ZXh0dXJlKTtcbiAgICAgICAgdGhpcy5ncmlkWCA9IGdyaWRYO1xuICAgICAgICB0aGlzLmdyaWRZID0gZ3JpZFk7XG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgICAgICAvL2NhbGN1bGF0ZSBvd24gcmVuZGVyIGNvb3JkaW5hdGVzXG4gICAgICAgIHRoaXMueCA9IGdyaWRYICogbWFwLmZpbmFsVGlsZVdpZHRoO1xuICAgICAgICB0aGlzLnkgPSBncmlkWSAqIG1hcC5maW5hbFRpbGVIZWlnaHQ7XG4gICAgfVxuXG4gICAgb25IaXQoaGl0RXZlbnQ6IEhpdEV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRpbGVPYmplY3QpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZU9iamVjdC5vbkhpdChoaXRFdmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblBsYW50KHBsYW50OiBQbGFudCkge1xuICAgICAgICBpZiAodGhpcy50aWxlT2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVPYmplY3Qub25QbGFudChwbGFudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblBsYWNlKHB1bXBraW46IFRudFB1bXBraW4pIHtcbiAgICAgICAgaWYgKHRoaXMudGlsZU9iamVjdCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGxhY2luZyBQdW1wa2luIFROVFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uSGFydmVzdChpbml0aWF0b3I6IFBsYXllcikge1xuICAgICAgICBpZiAodGhpcy50aWxlT2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVPYmplY3Qub25IYXJ2ZXN0KGluaXRpYXRvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc0ZyZWUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZU9iamVjdCA/IGZhbHNlIDogdHJ1ZTtcbiAgICB9XG5cblxuXG5cblxuXG59IiwiaW1wb3J0IHsgVGlsZSB9IGZyb20gXCIuL1RpbGVcIjtcbmltcG9ydCB7IEhpdEV2ZW50IH0gZnJvbSBcIi4vSGl0RXZlbnRcIjtcbmltcG9ydCB7IFBsYW50IH0gZnJvbSBcIi4vUGxhbnRcIjtcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL1BsYXllclwiO1xuaW1wb3J0IHsgU3ByaXRlLCBUZXh0dXJlIH0gZnJvbSBcInBpeGkuanNcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRpbGVPYmplY3QgZXh0ZW5kcyBTcHJpdGUge1xuXG4gICAgcGFyZW50OiBUaWxlO1xuICAgIHNvbGlkOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IodGV4dHVyZTogVGV4dHVyZSwgcGFyZW50OiBUaWxlKSB7XG4gICAgICAgIHN1cGVyKHRleHR1cmUpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50LmlzRnJlZSgpKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC50aWxlT2JqZWN0ID0gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGFkZCBUaWxlT2JqZWN0IHRvIGEgVGlsZSB0aGF0IGFsbHJlYWR5IGhhcyBhbiBUaWxlT2JqZWN0XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9zZXQgcmVuZGVyIGNvb3JkaW5hdGVzXG4gICAgICAgIHRoaXMueCA9IHRoaXMucGFyZW50Lng7XG4gICAgICAgIHRoaXMueSA9IHRoaXMucGFyZW50Lnk7XG4gICAgfVxuXG4gICAgb25IaXQoaGl0ZXZlbnQ6IEhpdEV2ZW50KSB7IH07XG5cbiAgICBvblBsYW50KHBsYW50OiBQbGFudCkgeyB9O1xuXG4gICAgb25IYXJ2ZXN0KGluaXRpYXRvcjogUGxheWVyKSB7IH07XG5cbiAgICBvbkRlc3Ryb3koaW5pdGlhdG9yOiBQbGF5ZXIpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMucGFyZW50LnRpbGVPYmplY3Q7XG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgIH07XG5cblxuXG59IiwiaW1wb3J0IHsgVGlsZU9iamVjdCB9IGZyb20gXCIuL1RpbGVPYmplY3RcIjtcbmltcG9ydCB7IFN0YXR1c0JhciB9IGZyb20gXCIuL1N0YXR1c0JhclwiO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vUGxheWVyXCI7XG5pbXBvcnQgeyBUaWxlIH0gZnJvbSBcIi4vVGlsZVwiO1xuaW1wb3J0IHsgSGl0RXZlbnQgfSBmcm9tIFwiLi9IaXRFdmVudFwiO1xuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gXCJwaXhpLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBUb3dlciBleHRlbmRzIFRpbGVPYmplY3Qge1xuXG4gICAgb3duZXI6IFBsYXllcjtcbiAgICBzdGF0dXNCYXI6IFN0YXR1c0JhcjtcblxuICAgIGNvbnN0cnVjdG9yKHRleHR1cmU6IFRleHR1cmUsIHBhcmVudDogVGlsZSwgb3duZXI6IFBsYXllcikge1xuICAgICAgICBzdXBlcih0ZXh0dXJlLCBwYXJlbnQpO1xuICAgICAgICB0aGlzLm93bmVyID0gb3duZXI7XG4gICAgfVxuXG4gICAgb25IaXQoaGl0RXZlbnQ6IEhpdEV2ZW50KSB7XG4gICAgfTtcblxuICAgIG9uRGVzdHJveShpbml0aWF0b3I6IFBsYXllcikge1xuXG4gICAgfVxuXG5cbn0iLCJpbXBvcnQgeyBUaWxlT2JqZWN0IH0gZnJvbSBcIi4vVGlsZU9iamVjdFwiO1xuaW1wb3J0IHsgQ29udGFpbmVyLCBHcmFwaGljcyB9IGZyb20gXCJwaXhpLmpzXCI7XG5pbXBvcnQgeyBHYW1lTWFuYWdlciB9IGZyb20gXCIuL0dhbWVNYW5hZ2VyXCI7XG5cbmV4cG9ydCBjbGFzcyBTdGF0dXNCYXIgZXh0ZW5kcyBDb250YWluZXIge1xuXG4gICAgZnJhbWU6IEdyYXBoaWNzO1xuICAgIHByb2dyZXNzU2hhcGU6IEdyYXBoaWNzO1xuICAgIHByb2dyZXNzOiBudW1iZXI7IC8vRnJvbSAwIHRvIDFcbiAgICBwYXJlbnQgOiBUaWxlT2JqZWN0O1xuXG4gICAgc3RhdGljIExJTkVfVEhJQ0tORVNTID0gMztcblxuICAgIGNvbnN0cnVjdG9yKHBhcmVudDogVGlsZU9iamVjdCwgcHJvZ3Jlc3M6IG51bWJlcikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHByb2dyZXNzO1xuXG4gICAgICAgIGNvbnN0IG1hcCA9IHBhcmVudC5wYXJlbnQubWFwO1xuICAgICAgICBtYXAudGlsZU9iamVjdENvbnRhaW5lci5hZGRDaGlsZCh0aGlzKTtcbiAgICAgICAgLy9wb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcbiAgICAgICAgdGhpcy54ID0gcGFyZW50Lng7XG4gICAgICAgIHRoaXMueSA9IHBhcmVudC55O1xuICAgICAgICB0aGlzLndpZHRoID0gcGFyZW50LndpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IHBhcmVudC5oZWlnaHRcbiAgICAgICAgLy9EcmF3IHlvdXJzZWxmXG4gICAgICAgIHRoaXMuZnJhbWUgPSBuZXcgR3JhcGhpY3MoKTtcbiAgICAgICAgLy8gc2V0IHRoZSBsaW5lIHN0eWxlIHRvIGhhdmUgYSB3aWR0aCBvZiA1IGFuZCBzZXQgdGhlIGNvbG9yIHRvIHJlZFxuICAgICAgICB0aGlzLmZyYW1lLmxpbmVTdHlsZShTdGF0dXNCYXIuTElORV9USElDS05FU1MsIDB4RkYwMDAwKTtcbiAgICAgICAgLy8gZHJhdyBhIHJlY3RhbmdsZVxuICAgICAgICB0aGlzLmZyYW1lLmRyYXdSZWN0KDAsIDAsIDY0LCBTdGF0dXNCYXIuTElORV9USElDS05FU1MqMyk7XG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5mcmFtZSk7XG5cbiBcblxuICAgICAgICB0aGlzLnNldFByb2dyZXNzKHByb2dyZXNzKTtcbiAgICB9XG5cbiAgICB1cGRhdGVWaWV3KCkge1xuICAgICAgICAvL1BhaW50IHlvdXJzZWxmXG4gICAgICAgIHRoaXMucHJvZ3Jlc3NTaGFwZSA9IG5ldyBHcmFwaGljcygpO1xuICAgICAgICAvLyBzZXQgdGhlIGxpbmUgc3R5bGUgdG8gaGF2ZSBhIHdpZHRoIG9mIDUgYW5kIHNldCB0aGUgY29sb3IgdG8gcmVkXG4gICAgICAgIHRoaXMucHJvZ3Jlc3NTaGFwZS5saW5lU3R5bGUoU3RhdHVzQmFyLkxJTkVfVEhJQ0tORVNTLCAweDAwRkYwMCk7XG4gICAgICAgIC8vIGRyYXcgYSByZWN0YW5nbGVcbiAgICAgICAgdGhpcy5wcm9ncmVzc1NoYXBlLmRyYXdSZWN0KFN0YXR1c0Jhci5MSU5FX1RISUNLTkVTUywgU3RhdHVzQmFyLkxJTkVfVEhJQ0tORVNTLCA2NCAqIHRoaXMucHJvZ3Jlc3MsIFN0YXR1c0Jhci5MSU5FX1RISUNLTkVTUyk7XG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5wcm9ncmVzc1NoYXBlKTtcbiAgICB9XG5cbiAgICBzZXRQcm9ncmVzcyhwcm9ncmVzczogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MgPSBwcm9ncmVzcztcbiAgICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XG4gICAgfVxuXG5cbn0iLCJpbXBvcnQgeyBUaWxlT2JqZWN0IH0gZnJvbSBcIi4vVGlsZU9iamVjdFwiO1xuaW1wb3J0IHsgU3RhdHVzQmFyIH0gZnJvbSBcIi4vU3RhdHVzQmFyXCI7XG5pbXBvcnQgeyBUaWxlIH0gZnJvbSBcIi4vVGlsZVwiO1xuaW1wb3J0IHsgSGl0RXZlbnQgfSBmcm9tIFwiLi9IaXRFdmVudFwiO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vUGxheWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBUcmVlIGV4dGVuZHMgVGlsZU9iamVjdCB7XG5cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0dXJlLHBhcmVudCl7XG4gICAgICAgIHN1cGVyKHRleHR1cmUscGFyZW50KTtcbiAgICAgICAgdGhpcy5zdGF0dXNCYXIgPSBuZXcgU3RhdHVzQmFyKHRoaXMsMC41KTtcbiAgICB9XG5cbiAgICBzdGF0dXNCYXI6IFN0YXR1c0JhcjtcblxuICAgIG9uSGl0KGhpdEV2ZW50OiBIaXRFdmVudCkge1xuICAgIH07XG5cbiAgICBvbkRlc3Ryb3koaW5pdGlhdG9yOiBQbGF5ZXIpIHtcblxuICAgIH1cblxuICAgIG9uSGFydmVzdChpbml0aWF0b3I6UGxheWVyKXtcblxuICAgIH1cblxuXG59IiwiaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vUGxheWVyXCI7XG5pbXBvcnQgeyBUaWxlZFNwcml0ZXNoZWV0IH0gZnJvbSBcIi4vVGlsZWRTcHJpdGVzaGVldFwiO1xuaW1wb3J0IHsgVGlsZSB9IGZyb20gXCIuL1RpbGVcIjtcbmltcG9ydCB7IFRvd2VyIH0gZnJvbSBcIi4vVG93ZXJcIjtcbmltcG9ydCB7IFRyZWUgfSBmcm9tIFwiLi9UcmVlXCI7XG5pbXBvcnQgeyBUaWxlT2JqZWN0IH0gZnJvbSBcIi4vVGlsZU9iamVjdFwiO1xuaW1wb3J0IHsgQ29udGFpbmVyLCBQb2ludCwgUmVjdGFuZ2xlIH0gZnJvbSBcInBpeGkuanNcIjtcbmltcG9ydCAqIGFzICQgZnJvbSBcImpxdWVyeVwiO1xuXG5leHBvcnQgY2xhc3MgVGlsZWRNYXAgZXh0ZW5kcyBDb250YWluZXIge1xuXG4gICAgc3RhdGljIE1BUF9aT09NID0gNDtcbiAgICBzdGF0aWMgU1BSSVRFX1NDQUxFOiBQb2ludCA9IG5ldyBQb2ludChUaWxlZE1hcC5NQVBfWk9PTSwgVGlsZWRNYXAuTUFQX1pPT00pO1xuXG4gICAgcGxheWVyczogUGxheWVyW107XG4gICAgc3ByaXRlc2hlZXQ6IFRpbGVkU3ByaXRlc2hlZXQ7XG4gICAgaXNQYXVzZWQ6IGJvb2xlYW47XG4gICAgZmluYWxUaWxlV2lkdGg6IG51bWJlcjtcbiAgICBmaW5hbFRpbGVIZWlnaHQ6IG51bWJlcjtcbiAgICB0aWxlczogVGlsZVtdW107XG4gICAgZ3JpZFdpZHRoOiBudW1iZXI7XG4gICAgZ3JpZEhlaWdodDogbnVtYmVyO1xuICAgIHRpbGVDb250YWluZXI6IENvbnRhaW5lcjtcbiAgICBwbGF5ZXJDb250YWluZXI6IENvbnRhaW5lcjtcbiAgICB0aWxlT2JqZWN0Q29udGFpbmVyOiBDb250YWluZXI7XG5cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMudGlsZUNvbnRhaW5lciA9IG5ldyBDb250YWluZXIoKTtcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLnRpbGVDb250YWluZXIpO1xuXG4gICAgICAgIHRoaXMudGlsZU9iamVjdENvbnRhaW5lciA9IG5ldyBDb250YWluZXIoKTtcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLnRpbGVPYmplY3RDb250YWluZXIpO1xuXG4gICAgICAgIHRoaXMucGxheWVyQ29udGFpbmVyID0gbmV3IENvbnRhaW5lcigpO1xuICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMucGxheWVyQ29udGFpbmVyKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucGxheWVycyA9IFtdO1xuICAgIH1cblxuXG4gICAgZ2V0TWFwT2JqZWN0UHJvcGVydHkobWFwT2JqZWN0OiBhbnksIG5hbWU6IHN0cmluZykge1xuICAgICAgICBmb3IgKGNvbnN0IHByb3Agb2YgbWFwT2JqZWN0LnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wLm5hbWUgPT0gbmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9wLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvL0xvYWRzIHRoZSBtYXAgd2l0aCBzcHJpdGVzaGVldC4gTGFzdCBwYXJhbWV0ZXIgaXMgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggaXMgY2FsbGVkIGFmdGVyIHBhcnNpbmcgdGhlIG1hcCB3aXRoIHRoZSBuZXcgcGFyc2VkIG1hcCBhcyBwYXJhbWV0ZXJcbiAgICBzdGF0aWMgbG9hZE1hcChtYXBQYXRoOiBzdHJpbmcsIHNwcml0ZXNoZWV0OiBUaWxlZFNwcml0ZXNoZWV0LCBjYWxsYmFjazogRnVuY3Rpb24pIHtcblxuICAgICAgICBjb25zdCBtYXAgPSBuZXcgVGlsZWRNYXAoKTtcblxuICAgICAgICAvL0xvYWQgU3ByaXRlc2hlZXRcbiAgICAgICAgbGV0IFNQUklURV9TQ0FMRTogUG9pbnQgPSBuZXcgUG9pbnQoVGlsZWRNYXAuTUFQX1pPT00sIFRpbGVkTWFwLk1BUF9aT09NKTtcbiAgICAgICAgbWFwLmZpbmFsVGlsZVdpZHRoID0gc3ByaXRlc2hlZXQudGlsZVdpZHRoICogU1BSSVRFX1NDQUxFLng7XG4gICAgICAgIG1hcC5maW5hbFRpbGVIZWlnaHQgPSBzcHJpdGVzaGVldC50aWxlSGVpZ2h0ICogU1BSSVRFX1NDQUxFLnk7XG4gICAgICAgIG1hcC5zcHJpdGVzaGVldCA9IHNwcml0ZXNoZWV0O1xuXG4gICAgICAgIC8vTG9hZCBNYXAgYW5kIFBhcnNlIGl0XG4gICAgICAgICQuZ2V0SlNPTihtYXBQYXRoLCB7fSwgZnVuY3Rpb24gKG1hcERhdGEpIHtcblxuICAgICAgICAgICAgLy9CdWlsZCBhbGwgVGlsZUxheWVycyBmaXJzdFxuICAgICAgICAgICAgZm9yIChjb25zdCB0bCBvZiBtYXBEYXRhLmxheWVycykge1xuICAgICAgICAgICAgICAgIGlmICh0bC50eXBlID09IFwidGlsZWxheWVyXCIpIHtcblxuICAgICAgICAgICAgICAgICAgICBtYXAuZ3JpZFdpZHRoID0gdGwud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIG1hcC5ncmlkSGVpZ2h0ID0gdGwuaGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vSW5pdCBtYXAncyB0aWxlcyBhcnJheVxuICAgICAgICAgICAgICAgICAgICBtYXAudGlsZXMgPSBuZXcgQXJyYXkobWFwLmdyaWRIZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxtYXAudGlsZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnRpbGVzW2ldID0gbmV3IEFycmF5KG1hcC5ncmlkV2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy9HZW5lcmF0ZSBUaWxlcyBmb3IgZWFjaCB0aWxlIHRvIHRoZSBjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGwuaGVpZ2h0OyByb3crKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgdGwud2lkdGg7IGNvbHVtbisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gcm93ICogdGwud2lkdGggKyBjb2x1bW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRsLmRhdGFbaW5kZXhdID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dHVyZSA9IHNwcml0ZXNoZWV0LmdldFRleHR1cmUodGwuZGF0YVtpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdUaWxlID0gbmV3IFRpbGUodGV4dHVyZSwgcm93LCBjb2x1bW4sbWFwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZFRpbGUobmV3VGlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vSXRlcmF0ZSB0aHJvdWdoIE9iamVjdCBMYXllcnNcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGwgb2YgbWFwRGF0YS5sYXllcnMpIHtcblxuICAgICAgICAgICAgICAgIGlmICh0bC50eXBlID09IFwib2JqZWN0Z3JvdXBcIikge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgYWxsIHBsYXllcnMgZmlyc3RcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjbyBvZiB0bC5vYmplY3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgIF9fX19fICBfICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICogICAgIHwgIF9fIFxcfCB8ICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgfCB8X18pIHwgfCBfXyBfIF8gICBfICBfX18gXyBfXyBcbiAgICAgICAgICAgICAgICAgICAgICAgICogICAgIHwgIF9fXy98IHwvIF9gIHwgfCB8IHwvIF8gXFwgJ19ffFxuICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgfCB8ICAgIHwgfCAoX3wgfCB8X3wgfCAgX18vIHwgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICogICAgIHxffCAgICB8X3xcXF9fLF98XFxfXywgfFxcX19ffF98ICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgIF9fLyB8ICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgIHxfX18vICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjby50eXBlID09IFwicGxheWVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IE1hdGgucm91bmQoY28ueCAqIFNQUklURV9TQ0FMRS54KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeSA9IChNYXRoLnJvdW5kKGNvLnkpIC0gY28uaGVpZ2h0KSAqIFNQUklURV9TQ0FMRS55OyAvLyAtY28uaGVpZ2h0IGJlY2F1c2UgdGlsZWQgdXNlcyB0aGUgYm90dG9tLWxlZnQgY29ybmVyIGZvciBjb29yZGluYXRlcyBhbmQgUElYSSB1c2VzIHRoZSB0b3AtbGVmdCBjb3JuZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXJJZDogbnVtYmVyID0gbWFwLmdldE1hcE9iamVjdFByb3BlcnR5KGNvLCBcInBsYXllcklkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BsYXllciA9IG5ldyBQbGF5ZXIoeCwgeSwgdGhpcywgcGxheWVySWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5hZGRQbGF5ZXIobmV3UGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICAgICAgICAgICAgICAvL0dlbmVyYXRlIFNwcml0ZXMgZm9yIGVhY2ggb2JqZWN0IHRvIHRoZSBjb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjbyBvZiB0bC5vYmplY3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICBfX19fX19fICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgfF9fICAgX198ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqICAgICAgICB8IHwgX19fX18gICAgICBfX19fXyBfIF9fIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHwgfC8gXyBcXCBcXCAvXFwgLyAvIF8gXFwgJ19ffFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHwgfCAoXykgXFwgViAgViAvICBfXy8gfCAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHxffFxcX19fLyBcXF8vXFxfLyBcXF9fX3xffCAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjby50eXBlID09IFwidG93ZXJcIikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRleHR1cmUgPSBzcHJpdGVzaGVldC5nZXRUZXh0dXJlKGNvLmdpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3duZXJJZCA9IG1hcC5nZXRNYXBPYmplY3RQcm9wZXJ0eShjbywgXCJvd25lclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvd25lciA9IG1hcC5wbGF5ZXJzW293bmVySWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG1hcC5nZXRUaWxlTmVhcmVzdFRvKGNvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VG93ZXIgPSBuZXcgVG93ZXIodGV4dHVyZSwgcGFyZW50LCBvd25lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZFRpbGVPYmplY3QobmV3VG93ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgIF9fX19fX18gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqICAgICB8X18gICBfX3wgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHwgfF8gX18gX19fICBfX18gXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgfCB8ICdfXy8gXyBcXC8gXyBcXFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgIHwgfCB8IHwgIF9fLyAgX18vXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgfF98X3wgIFxcX19ffFxcX19ffFxuICAgICAgICAgICAgICAgICAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY28udHlwZSA9PSBcInRyZWVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0dXJlID0gc3ByaXRlc2hlZXQuZ2V0VGV4dHVyZShjby5naWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG1hcC5nZXRUaWxlTmVhcmVzdFRvKGNvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VHJlZSA9IG5ldyBUcmVlKHRleHR1cmUsIHBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmFkZFRpbGVPYmplY3QobmV3VHJlZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuXG5cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9DYWxsIG9uRmluaXNoIENhbGxiYWNrXG4gICAgICAgICAgICBjYWxsYmFjayhtYXApO1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIGFkZFBsYXllcihwbGF5ZXI6IFBsYXllcikge1xuICAgICAgICAvL3BsYXllci5zcHJpdGUuc2NhbGUgPSBUaWxlZE1hcC5TUFJJVEVfU0NBTEU7XG4gICAgICAgIHRoaXMucGxheWVyc1twbGF5ZXIucGxheWVySWRdID0gcGxheWVyO1xuICAgICAgICB0aGlzLnBsYXllckNvbnRhaW5lci5hZGRDaGlsZChwbGF5ZXIuc3ByaXRlKTtcbiAgICB9XG5cbiAgICBhZGRUaWxlT2JqZWN0KHRpbGVPYmplY3Q6IFRpbGVPYmplY3QpIHtcbiAgICAgICAgdGlsZU9iamVjdC5zY2FsZSA9IFRpbGVkTWFwLlNQUklURV9TQ0FMRTtcbiAgICAgICAgdGhpcy5wbGF5ZXJDb250YWluZXIuYWRkQ2hpbGQodGlsZU9iamVjdCk7XG4gICAgfVxuXG4gICAgYWRkVGlsZSh0aWxlOiBUaWxlKSB7XG4gICAgICAgIHRpbGUueCA9IHRpbGUuZ3JpZFggKiB0aGlzLnNwcml0ZXNoZWV0LnRpbGVXaWR0aCAqIFRpbGVkTWFwLlNQUklURV9TQ0FMRS54O1xuICAgICAgICB0aWxlLnkgPSB0aWxlLmdyaWRZICogdGhpcy5zcHJpdGVzaGVldC50aWxlSGVpZ2h0ICogVGlsZWRNYXAuU1BSSVRFX1NDQUxFLnk7XG4gICAgICAgIHRpbGUuc2NhbGUgPSBUaWxlZE1hcC5TUFJJVEVfU0NBTEU7XG5cbiAgICAgICAgdGhpcy50aWxlc1t0aWxlLmdyaWRZXVt0aWxlLmdyaWRYXSA9IHRpbGU7XG4gICAgICAgIHRoaXMudGlsZUNvbnRhaW5lci5hZGRDaGlsZCh0aWxlKTtcbiAgICB9XG5cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy5pc1BhdXNlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgcGxheSgpIHtcbiAgICAgICAgdGhpcy5pc1BhdXNlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGdldE9iamVjdENvb3JkaW5hdGVzKG1hcE9iamVjdDogUmVjdGFuZ2xlKSB7XG5cbiAgICAgICAgLy9hbiBPYmplY3QgY2FuIGJlIHBsYWNlZCBcImJldHdlZW5cIiB0aWxlcyBpbiB0aWxlZCBtYXAgZWRpdG9yLiBCdXQgZXZudHMgY2FuIGJlIHRyaWdnZXJlZCBvbmx5IGZyb20gd2hvbGUgdGlsZXMuIFNvIHRoZSBvYmVqY2N0cyBwb3NpdGlvbiBpcyBtYXBwZWQgdG8gdGhlIG5lYXJlc3QgVGlsZVxuXG4gICAgICAgIGxldCBvcmlnaW5hbFggPSBtYXBPYmplY3QueCAqIFRpbGVkTWFwLlNQUklURV9TQ0FMRS54O1xuICAgICAgICBsZXQgeFRpbGVzID0gb3JpZ2luYWxYIC8gdGhpcy5maW5hbFRpbGVXaWR0aDtcbiAgICAgICAgeFRpbGVzID0gTWF0aC5yb3VuZCh4VGlsZXMpO1xuXG4gICAgICAgIGxldCBvcmlnaW5hbFkgPSAobWFwT2JqZWN0LnkgLSBtYXBPYmplY3QuaGVpZ2h0KSAqIFRpbGVkTWFwLlNQUklURV9TQ0FMRS55OyAgLy8gLWNvLmhlaWdodCBiZWNhdXNlIHRpbGVkIHVzZXMgdGhlIGJvdHRvbS1sZWZ0IGNvcm5lciBmb3IgY29vcmRpbmF0ZXMgYW5kIFBJWEkgdXNlcyB0aGUgdG9wLWxlZnQgY29ybmVyICAgICAgICAgICAgICBcbiAgICAgICAgbGV0IHlUaWxlcyA9IG9yaWdpbmFsWSAvIHRoaXMuZmluYWxUaWxlSGVpZ2h0O1xuICAgICAgICB5VGlsZXMgPSBNYXRoLnJvdW5kKHlUaWxlcyk7XG5cbiAgICAgICAgcmV0dXJuIHsgZ3JpZFg6IHhUaWxlcywgZ3JpZFk6IHlUaWxlcyB9O1xuICAgIH1cblxuICAgIGdldFRpbGVOZWFyZXN0VG8obWFwT2JqZWN0OiBSZWN0YW5nbGUpOiBUaWxlIHtcbiAgICAgICAgY29uc3QgcG9zID0gdGhpcy5nZXRPYmplY3RDb29yZGluYXRlcyhtYXBPYmplY3QpO1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlc1twb3MuZ3JpZFldW3Bvcy5ncmlkWF07XG4gICAgfVxuXG59IiwiaW1wb3J0IHsgVGlsZWRTcHJpdGVzaGVldCB9IGZyb20gXCIuL1RpbGVkU3ByaXRlc2hlZXRcIjtcbmltcG9ydCB7IFRpbGVkTWFwIH0gZnJvbSBcIi4vVGlsZWRNYXBcIjtcbmltcG9ydCB7IEtleWJvYXJkTWFuYWdlciB9IGZyb20gXCIuL0tleWJvYXJkTWFuYWdlclwiO1xuaW1wb3J0IHsgVXBkYXRlU2NoZWR1bGVyIH0gZnJvbSBcIi4vVXBkYXRlU2NoZWR1bGVyXCI7XG5pbXBvcnQgeyBBcHBsaWNhdGlvbiwgQXBwbGljYXRpb25PcHRpb25zIH0gZnJvbSBcInBpeGkuanNcIjtcblxuY29uc3QgU1BSSVRFU0hFRVQgPSBuZXcgVGlsZWRTcHJpdGVzaGVldChcImRhdGEvYXNzZXRzL3Nwcml0ZXNoZWV0LnBuZ1wiLCAxLCAxNiwgMTYsIDMxLCA1NykgLy9LZW5ueSBTcHJpdGVzaGVldCBzZWUgZGF0YS9tYXBzL0tlbm5leSBSUEcgVGlsZXMudHN4XG4vL1RPRE8gUGFyc2UgdGhpcyBpbmZvcm1hdGlvbiBhdXRvbWF0aXhhbGx5IGZyb20gdHN4IGZpbGVcblxuY29uc3QgQVBQX1dJRFRIID0gNTEyO1xuY29uc3QgQVBQX0hFSUdIVCA9IDUxMjtcblxuZXhwb3J0IGNsYXNzIEdhbWVNYW5hZ2VyIHtcblxuICAgIHN0YXRpYyBtYXA6IFRpbGVkTWFwO1xuXG4gICAgc3RhdGljIHBpeGlBcHAgOiBBcHBsaWNhdGlvbjtcblxuXG4gICAgc3RhdGljIHN0YXJ0R2FtZSgpIHtcbiAgICAgICAgLy9DcmVhdGUgUGl4aSBzdHVmZlxuICAgICAgICAvL0NyZWF0ZSBhIFBpeGkgQXBwbGljYXRpb25cbiAgICAgICAgY2xhc3MgUGl4aU9wdGlvbnMgaW1wbGVtZW50cyBBcHBsaWNhdGlvbk9wdGlvbnN7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihwdWJsaWMgd2lkdGgscHVibGljIGhlaWdodCl7fVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBpeGlPcHRpb25zID0gbmV3IFBpeGlPcHRpb25zKEFQUF9XSURUSCxBUFBfSEVJR0hUKTtcblxuICAgICAgICBHYW1lTWFuYWdlci5waXhpQXBwID0gbmV3IEFwcGxpY2F0aW9uKHBpeGlPcHRpb25zKTtcblxuICAgICAgICAvL0FkZCB0aGUgY2FudmFzIHRoYXQgUGl4aSBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgZm9yIHlvdSB0byB0aGUgSFRNTCBkb2N1bWVudFxuICAgICAgICAvL1N0aWxsIG5lY2Nlc2Fycnk/Pz8/XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoR2FtZU1hbmFnZXIucGl4aUFwcC52aWV3KTtcblxuICAgICAgICAvL0luaXQgS2V5Ym9hcmQgTWFuYWdlclxuICAgICAgICBLZXlib2FyZE1hbmFnZXIuaW5pdCgpO1xuXG4gICAgICAgIC8vUmVnaXN0ZXIgVXBkYXRlIHNjaGVkdWxlclxuICAgICAgICBHYW1lTWFuYWdlci5waXhpQXBwLnRpY2tlci5hZGQoVXBkYXRlU2NoZWR1bGVyLmRvU3RlcCk7XG5cbiAgICAgICAgXG4gICAgICAgIFRpbGVkTWFwLmxvYWRNYXAoXCJkYXRhL21hcHMvbWFwMS5qc29uXCIsU1BSSVRFU0hFRVQsZnVuY3Rpb24ocGFyc2VkTWFwOlRpbGVkTWFwKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWFwIHBhcnNlZFwiKTtcbiAgICAgICAgICAgIEdhbWVNYW5hZ2VyLm1hcCA9IHBhcnNlZE1hcDtcbiAgICAgICAgICAgIEdhbWVNYW5hZ2VyLnBpeGlBcHAuc3RhZ2UuYWRkQ2hpbGQocGFyc2VkTWFwKTtcbiAgICAgICAgICAgIEdhbWVNYW5hZ2VyLnBpeGlBcHAudGlja2VyLnN0YXJ0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBsYXllcnMgPSBwYXJzZWRNYXAucGxheWVycztcbiAgICAgICAgICAgIHBsYXllcnNbMF0uc2V0S2V5cyhcIkFycm93VXBcIixcIkFycm93RG93blwiLFwiQXJyb3dMZWZ0XCIsXCJBcnJvd1JpZ2h0XCIsXCJtXCIsXCJuXCIpO1xuICAgICAgICAgICAgcGxheWVyc1sxXS5zZXRLZXlzKFwid1wiLFwic1wiLFwiYVwiLFwiZFwiLFwieFwiLFwieVwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59IiwiaW1wb3J0IHtHYW1lTWFuYWdlcn0gZnJvbSBcIi4vbW9kZWwvR2FtZU1hbmFnZXJcIlxuXG5HYW1lTWFuYWdlci5zdGFydEdhbWUoKTsiXSwic291cmNlUm9vdCI6IiJ9